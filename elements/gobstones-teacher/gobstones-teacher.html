<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/notification-icons.html">
<link rel="import" href="../../scripts/behaviors/busListenerBehavior.html">
<link rel="import" href="../../scripts/jquery.html">
<link rel="import" href="../../scripts/simplemde.html">
<link rel="import" href="./project-linter.html">
<link rel="import" href="./alert-banner.html">
<link rel="import" href="./activity-settings.html">

</head><body><dom-module id="gobstones-teacher">
  <template>

    <style>
      paper-tab {
        --paper-tab-content-unselected: {
          opacity: 0.5;
        }
      }

      .fab-sync {
        /* --paper-fab-background: var(--fab-sync-background);
        --paper-fab-keyboard-focus-background: var(--fab-sync-background);
        */
        width: 10px;
        height: 10px !important;
        position: absolute;
        left: 3px;
        top: 3px;
        --paper-fab-iron-icon: {
          width: 10px !important;
          height: 10px !important;
        }
      }

      .fab-sync.sync-on {
        background-color: #1da65b !important;
      }

      .fab-sync.sync-off {
        background-color: #d93c46 !important;
      }

      .editor {
        position: absolute;
        width: 100%;
        height: 100%;
        left: 0;
        top: 0;
      }

      .visible {
        visibility: visible;
      }

      .unvisible {
        visibility: hidden;
      }

      .button-tooltip {
        font-size: 15px;
      }

      .solution-selector {
        position: absolute;
        right: 15px;
        z-index: 99;
        background-color: rgba(0, 0, 0, 0.02);
        border-radius: 5px;
        padding-left: 5px;
        padding-right: 5px;
      }

      /* @faloi:
      Esto no debería ser necesasrio, pero por algún motivo no importa los estilos del paper-dialog. */
      .buttons > paper-button {
        display: var(--layout-inline_-_display);
        -ms-flex-align: var(--layout-center-center_-_-ms-flex-align);
        -webkit-align-items: var(--layout-center-center_-_-webkit-align-items);
        align-items: var(--layout-center-center_-_align-items);
        -ms-flex-pack: var(--layout-center-center_-_-ms-flex-pack);
        -webkit-justify-content: var(--layout-center-center_-_-webkit-justify-content);
        justify-content: var(--layout-center-center_-_justify-content);
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;
        font-family: var(--paper-font-common-base_-_font-family);
        -webkit-font-smoothing: var(--paper-font-common-base_-_-webkit-font-smoothing);
      }
    </style>

    <div>
      <paper-tooltip for="fab-sync-button" position="right" animation-config="{{tooltipAnimation}}">
        <div class="button-tooltip">
          [[localize("tooltip-blocks-sync")]]
        </div>
      </paper-tooltip>
      <paper-tabs id="editorTab" selected="{{selectedTab}}" class="bottom self-end">
        <paper-tab>[[localize("teachers-library")]]</paper-tab>
        <paper-tab hidden$="{{_isTextMode(constructionMode)}}">[[localize("students-code")]]</paper-tab>
        <paper-tab hidden$="{{_isBlocksMode(constructionMode)}}">[[localize("students-code")]]</paper-tab>
        <paper-tab>[[localize("description")]]</paper-tab>
        <paper-tab>[[localize("attire")]]</paper-tab>
        <paper-tab>[[localize("settings")]]</paper-tab>
      </paper-tabs>

      <paper-dialog id="projectLinterModal" modal="">
        <paper-dialog-scrollable>
          <project-linter></project-linter>
        </paper-dialog-scrollable>

        <div class="buttons">
          <paper-button dialog-dismiss="">[[localize("cancel")]]</paper-button>
          <paper-button dialog-confirm="" autofocus="" on-click="_saveProject">[[localize("save")]]</paper-button>
        </div>
      </paper-dialog>

      <paper-dialog id="activitySettingsModal" modal="">
        <paper-dialog-scrollable>
          <activity-settings></activity-settings>
        </paper-dialog-scrollable>
      </paper-dialog>

      <div style="position: relative">
        <div class$="editor {{_teacherLibraryClass(selectedTab)}}">
          <template is="dom-if" if="{{!studentSolutionDirty}}">
            <alert-banner code="define-primitives-here" title="Definí aquí las primitivas para tu actividad" message="Los procedimientos y funciones que definas podrán ser utilizados por tus estudiantes en sus soluciones." level="info"></alert-banner>
          </template>
          <template is="dom-if" if="{{studentSolutionDirty}}">
            <alert-banner code="student-code-changed" title="Realizaste cambios en la solución del estudiante" message="Si renombrás o eliminás alguna primitiva que está en uso, deberás actualizar manualmente la solución del estudiante." level="warning"></alert-banner>
          </template>
          <gobstones-editor id="teacher-library-editor"></gobstones-editor>
        </div>

        <gobstones-blockly id="blocks-editor" class$="editor {{_blocksClass(selectedTab)}}"></gobstones-blockly>

        <gobstones-editor id="code-editor" class$="editor {{_codeClass(selectedTab)}}"></gobstones-editor>

        <description-editor id="description-editor" class$="editor {{_descriptionClass(selectedTab)}}"></description-editor>

        <attire-editor id="attire-editor" class$="editor {{_attireClass(selectedTab)}}"></attire-editor>

        <metadata-editor id="metadata-editor" class$="editor {{_metadataClass(selectedTab)}}"></metadata-editor>
      </div>
    </div>
  </template>

  </dom-module>
<script src="gobstones-teacher.js"></script></body></html>