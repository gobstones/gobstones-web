{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 21f6dd5f397bf19a08c5","webpack:///./src/i18n.js","webpack:///./src/exceptions.js","webpack:///./src/ast.js","webpack:///./src/token.js","webpack:///./src/runtime.js","webpack:///./src/value.js","webpack:///./src/reader.js","webpack:///./src/i18n/es.js","webpack:///./src/symtable.js","webpack:///./src/instruction.js","webpack:///./src/index.js","webpack:///./src/i18n/en.js","webpack:///./src/i18n/pt.js","webpack:///./src/bigint.js","webpack:///./src/runner.js","webpack:///./src/parser.js","webpack:///./src/lexer.js","webpack:///./src/linter.js","webpack:///./src/recursion_checker.js","webpack:///./src/compiler.js","webpack:///./src/vm.js","webpack:///./src/board_formats.js"],"names":["i18n","i18nWithLanguage","i18nPosition","CURRENT_LANGUAGE","dictionaries","LOCALE_ES","LOCALE_EN","LOCALE_PT","message","code","thunk","Error","oldLanguage","position","filename","line","column","GbsInterpreterException","startPos","endPos","errorType","reason","args","row","isGobstonesException","length","apply","GbsWarning","GbsSyntaxError","GbsRuntimeError","N_Main","Symbol","for","N_DefProgram","N_DefInteractiveProgram","N_DefProcedure","N_DefFunction","N_DefType","N_StmtBlock","N_StmtReturn","N_StmtIf","N_StmtRepeat","N_StmtForeach","N_StmtWhile","N_StmtSwitch","N_StmtAssignVariable","N_StmtAssignTuple","N_StmtProcedureCall","N_PatternWildcard","N_PatternVariable","N_PatternNumber","N_PatternStructure","N_PatternTuple","N_PatternTimeout","N_ExprVariable","N_ExprConstantNumber","N_ExprConstantString","N_ExprChoose","N_ExprMatching","N_ExprList","N_ExprRange","N_ExprTuple","N_ExprStructure","N_ExprStructureUpdate","N_ExprFunctionCall","N_SwitchBranch","N_MatchingBranch","N_FieldBinding","N_ConstructorDeclaration","indent","string","lines","split","push","join","showASTs","showAST","node","Array","Token","toString","tag","keyFor","substring","children","nodes","res","ASTNode","_tag","_children","_startPos","UnknownPosition","_endPos","_attributes","replace","contents","map","toMulangLike","attributes","ASTMain","definitions","ASTDefProgram","body","ASTDefInteractiveProgram","branches","ASTDefProcedure","name","parameters","ASTDefFunction","ASTDefType","typeName","constructorDeclarations","ASTStmtBlock","statements","ASTStmtReturn","result","ASTStmtIf","condition","thenBlock","elseBlock","ASTStmtRepeat","times","ASTStmtForeach","pattern","range","ASTStmtWhile","ASTStmtSwitch","subject","ASTSwitchBranch","ASTMatchingBranch","ASTStmtAssignVariable","variable","value","ASTStmtAssignTuple","variables","ASTStmtProcedureCall","procedureName","ASTPatternWildcard","ASTPatternVariable","variableName","ASTPatternNumber","number","ASTPatternStructure","constructorName","ASTPatternTuple","ASTPatternTimeout","timeout","parseInt","ASTExprVariable","ASTExprConstantNumber","ASTExprConstantString","ASTExprChoose","trueExpr","falseExpr","ASTExprMatching","ASTExprList","elements","ASTExprRange","first","second","last","ASTExprTuple","ASTExprStructure","fieldBindings","names","fieldBinding","fieldName","ASTExprStructureUpdate","original","ASTExprFunctionCall","functionName","ASTFieldBinding","ASTConstructorDeclaration","fieldNames","T_EOF","T_NUM","T_STRING","T_UPPERID","T_LOWERID","T_PROGRAM","T_INTERACTIVE","T_PROCEDURE","T_FUNCTION","T_RETURN","T_IF","T_THEN","T_ELSEIF","T_ELSE","T_CHOOSE","T_WHEN","T_OTHERWISE","T_MATCHING","T_SELECT","T_ON","T_REPEAT","T_FOREACH","T_IN","T_WHILE","T_SWITCH","T_TO","T_LET","T_NOT","T_DIV","T_MOD","T_TYPE","T_IS","T_RECORD","T_VARIANT","T_CASE","T_FIELD","T_UNDERSCORE","T_TIMEOUT","T_LPAREN","T_RPAREN","T_LBRACE","T_RBRACE","T_LBRACK","T_RBRACK","T_COMMA","T_SEMICOLON","T_ELLIPSIS","T_RANGE","T_GETS","T_PIPE","T_ARROW","T_ASSIGN","T_EQ","T_NE","T_LE","T_GE","T_LT","T_GT","T_AND","T_OR","T_CONCAT","T_PLUS","T_MINUS","T_TIMES","T_POW","_value","boolFromValue","typesWithOpposite","typesWithOrder","fail","boolEnum","colorEnum","dirEnum","keyEventEnum","modifiers","charKeys","specialKeys","symbolKeys","arrowKeys","keys","concat","eventNames","modifier","key","KEY_EVENT_ENUM","eventEnum","toEnum","enumeration","indexOf","fromEnum","index","dirOpposite","dirName","dirNext","dirPrev","colorNext","colorName","colorPrev","RuntimeState","_width","_height","_board","x","y","_emptyCell","_head","newState","cell","jboard","width","height","head","board","asNumber","newCell","ValueInteger","n","add","le","sub","canMove","delta","_deltaForDirection","PrimitiveOperation","argumentTypes","argumentValidator","implementation","_argumentTypes","_argumentValidator","_implementation","globalState","typeAny","TypeAny","typeInteger","TypeInteger","typeString","TypeString","typeBool","TypeStructure","typeListAny","TypeList","valueFromBool","bool","ValueStructure","typeColor","valueFromColor","colorFromValue","typeDir","valueFromDir","dirFromValue","noValidation","isInteger","type","isBool","isColor","isDir","enumIndex","genericLE","a","b","indexA","indexB","genericGE","ge","genericLT","lt","genericGT","gt","genericNext","genericPrev","genericOpposite","negate","validateTypeAmong","types","validateCompatibleTypes","RuntimePrimitives","_primitiveTypes","_primitiveProcedures","_primitiveFunctions","boolName","eventName","v1","v2","errorMessage","color","putStone","numStones","removeStone","dir","move","goToEdge","emptyBoardContents","errMsg","current","ValueList","list","num","mul","eq","div","mod","pow","equal","msg","append","tail","init","typeNames","constructorNames","primitiveName","procedureNames","functionNames","joinTypes","Ty_Any","Ty_Integer","Ty_String","Ty_Tuple","Ty_List","Ty_Structure","Type","TypeTuple","componentTypes","_componentTypes","strings","t","contentType","_contentType","suffix","isAny","cases","_typeName","_cases","caseStrings","sortedKeys","fieldTypes","fieldStrings","joinTupleTypes","joinListTypes","joinStructureTypes","joinFields","type1","type2","joinedComponents","i","t1","t2","tj","joinedContent","joinedCases","joinCommon","typeA","typeB","joinedFields","fields1","fields2","checkIncluded","fieldsA","fieldsB","joinedTypes","dictionary","sort","V_Integer","V_String","V_Tuple","V_List","V_Structure","Value","isString","isTuple","isList","isStructure","isBoolean","_number","other","subtract","multiply","z","abs","divide","inc","q","leq","geq","ValueString","_string","chr","ValueTuple","components","_components","_type","_inferType","component","_elements","element","allElements","elem","fields","_constructorName","_fields","newFields","newStructure","_clone","SourceReader","_filename","_index","_line","_column","_regions","r","peek","_","consumeCharacter","consumeInvisibleCharacter","j","region","slice","MultifileReader","input","_filenames","Object","_input","keyword","palabra","pluralize","singular","plural","ordinalNumber","units","describeType","isDirection","description","describeTypeSingular","typeAsNoun","gender","typeAsQualifierSingular","typeAsQualifierPlural","listOfTypes","typeStrings","openingDelimiterName","delimiter","formatTypes","symbol","pragmaName","option","expected","found","op1","op2","pos1","pos2","posFunction","posField","oldCat","oldPos","newCat","newPos","received","arity","expectedType","patternType","cycle","call","caller","callee","location","routineName","valueTag","constructorNameExpected","constructorNameReceived","oldType","newType","receivedType","size","missingFieldName","parameterIndex","numArgs","expectedTypes","millisecs","s","FieldDescriptor","LocalVariable","LocalParameter","LocalIndex","LocalNameDescriptor","category","_category","_position","SymbolTable","_program","_isInteractiveProgram","_procedures","_procedureParameters","_functions","_functionParameters","_types","_typeConstructors","_constructors","_constructorType","_constructorFields","_localNames","isProcedure","isFunction","isType","isConstructor","isField","definition","defProgram","parameter","fieldPos","constructorDeclaration","_declareConstructor","constructorFields","_declareField","localName","setLocalName","globalName","I_PushInteger","I_PushString","I_PushVariable","I_SetVariable","I_UnsetVariable","I_Label","I_Jump","I_JumpIfFalse","I_JumpIfStructure","I_JumpIfTuple","I_Call","I_Return","I_MakeTuple","I_MakeList","I_MakeStructure","I_UpdateStructure","I_ReadTupleComponent","I_ReadStructureField","I_ReadStructureFieldPop","I_Add","I_Dup","I_Pop","I_PrimitiveCall","I_SaveState","I_RestoreState","I_TypeCheck","Code","instructions","_instructions","instruction","ip","labelTargets","opcode","label","argToString","arg","Instruction","_opcode","_args","sargs","IPushInteger","IPushString","IPushVariable","ISetVariable","IUnsetVariable","ILabel","IJump","targetLabel","IJumpIfFalse","IJumpIfStructure","IJumpIfTuple","ICall","nargs","IReturn","IMakeTuple","IMakeList","IMakeStructure","IUpdateStructure","IReadTupleComponent","IReadStructureField","IReadStructureFieldPop","IAdd","IDup","IPop","IPrimitiveCall","ISaveState","IRestoreState","ITypeCheck","DEFAULT_INFINITE_LOOP_TIMEOUT","DEFAULT_LANGUAGE","apiboardToState","apiboard","state","load","apiboardFromState","dump","apivalueFromValue","composedValue","componentKind","it","apiValue","GobstonesInterpreterError","exception","detail","on","start","end","ParseError","ExecutionError","snapshots","regionStack","isTimeout","NormalExecutionResult","finalBoard","returnValue","actualReturnValue","InteractiveExecutionResult","_collectKeyNames","_timeoutValue","onInit","_onInitFunction","onKey","_onKeyFunction","onTimeout","_onTimeoutFunction","runner","symbolTable","program","branch","p","_hasInit","self","language","_onEvent","_hasTimeout","keyCode","eventValue","executeEventWithTimeout","infiniteLoopTimeout","undefined","SnapshotTaker","_runner","_snapshots","callStack","_shouldTakeSnapshot","_snapshot","snapshot","contextNames","stackFrame","uniqueFrameId","routineNameStack","primitives","_noAtomicRoutines","pop","_isRecorded","_isAtomic","ParseResult","isInteractiveProgram","_resultForInteractiveProgram","_resultForProgram","declarations","_collectDeclarations","getAttributes","alias","interpret","snapshotTaker","compile","executeWithTimeoutTakingSnapshots","takeSnapshot","bind","initializeVirtualMachine","allProcedureNames","allFunctionNames","GobstonesInterpreterAPI","Runner","config","setLanguage","setInfiniteLoopTimeout","milliseconds","setXGobstonesEnabled","isEnabled","gbb","read","write","getAst","sourceCode","_withState","abstractSyntaxTree","parse","useLinter","action","initialize","enableLintCheck","lint","Integer","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","LOG_MAX_INT","Math","log","v","radix","parseValue","parseBase","BigInteger","sign","isSmall","prototype","create","SmallInteger","isPrecise","floor","arrayToSmall","arr","trim","compareAbs","createArray","truncate","ceil","l_a","l_b","carry","base","sum","addAny","addSmall","l","plus","a_l","b_l","borrow","difference","subtractAny","subtractSmall","minus","small","multiplyLong","product","a_i","b_j","multiplySmall","shiftLeft","multiplyKaratsuba","max","d","c","ac","bd","abcd","useKaratsuba","l1","l2","multiplySmallAndArray","_multiplyBySmall","square","a_j","divMod1","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","divModSmall","divMod2","part","guess","xlen","highx","highy","check","unshift","reverse","quotient","divModAny","comparison","qSign","mSign","divmod","over","isEven","modPow","exp","isZero","isPositive","isOdd","compare","Infinity","compareTo","equals","notEquals","neq","greater","lesser","greaterOrEquals","lesserOrEquals","isNegative","isUnit","isDivisibleBy","isBasicPrime","isPrime","nPrev","prev","bigInt","isProbablePrime","iterations","randBetween","modInv","zero","newT","one","newR","lastT","lastR","next","powersOfTwo","powers2Length","highestPower2","shift_isSmall","String","shiftRight","remQuo","bitwise","fn","xSign","ySign","xRem","not","yRem","xBits","yBits","xStop","yStop","and","or","xor","LOBMASK_I","LOBMASK_BI","roughLOB","min","gcd","lcm","low","high","round","random","restricted","top","digit","text","absBase","toLowerCase","test","charCodeAt","isNaN","digits","charCode","parseBaseFromArray","val","stringify","charAt","toBase","minusSign","out","left","str","zeros","valueOf","toJSNumber","parseStringValue","decimalPlace","isValid","parseNumberValue","minusOne","isInstance","fromArray","tok","_ast","_primitives","_symtable","_newSymtableWithPrimitives","_linter","Linter","_code","_vm","_result","runState","initialState","execute","parser","Parser","getLanguageOptions","_setLanguageOption","linterCheckId","enabled","enableCheck","Compiler","VirtualMachine","executeWithTimeout","snapshotCallback","runWithTimeoutTakingSnapshots","runEventWithTimeout","symtable","defType","_astDefType","procedures","defProcedure","_astDefProcedure","functions","defFunction","_astDefFunction","typeConstructors","constructor","_astConstructorDeclaration","getOperation","field","Infix","InfixL","InfixR","Prefix","PrecedenceLevel","fixity","operators","_fixity","_operators","token","OPERATORS","_lexer","Lexer","_nextToken","_currentToken","_parseDefinition","_parseDefProgram","_parseDefInteractiveProgram","_parseDefProcedure","_parseDefFunction","_parseDefType","_match","getPendingAttributes","block","_parseStmtBlock","_parseSwitchBranches","_parseUpperid","_parseLoweridSeq","_parseDefTypeRecord","_parseDefTypeVariant","_parseFieldNames","_matchExpected","_parseConstructorDeclaration","_parseLowerid","statement","_parsePureStatement","_parseStmtEllipsis","_parseStmtReturn","_parseStmtIf","_parseStmtRepeat","_parseStmtForeach","_parseStmtWhile","_parseStmtSwitch","_parseStmtLet","_parseStmtAssignVariable","_parseStmtProcedureCall","_parseStatement","tuple","_parseExprTuple","expectInitialIf","_parseExpression","_parsePattern","_parseStmtAssignTuple","keyfor","_parseDelimitedSeq","_parsePatternWildcard","_parsePatternVariable","_parsePatternNumber","_parsePatternStructure","_parsePatternTuple","_parsePatternTimeout","id","_parseExprOperator","level","_parseExprAtom","_parseExprOperatorInfix","_parseExprOperatorInfixL","_parseExprOperatorInfixR","_parseExprOperatorPrefix","isOperator","op","right","result2","inner","_parseExprEllipsis","_parseExprVariableOrFunctionCall","_parseExprConstantNumber","_parseExprConstantString","_parseExprChoose","_parseExprMatching","_parseExprStructureOrStructureUpdate","_parseExprListOrRange","_parseExpressionSeq","expectInitialChoose","expr1","expr2","_parseMatchingBranches","_parseStructure","_parseStructureUpdate","fieldName1","value1","fieldBinding1","_parseNonEmptyDelimitedSeq","_parseFieldBinding","_parseExprListRemainder","_parseExprRange","prefix","possiblyEmpty","expressionList","_parseSwitchBranch","_parseMatchingBranch","nextToken","tokenTag","tagList","rightDelimiter","separator","parseElement","lowerid","upperid","isWhitespace","isDigit","isAlpha","toUpperCase","isUpper","isLower","isIdent","KEYWORDS","SYMBOLS","LANGUAGE_OPTIONS","leadingZeroes","CLOSING_DELIMITERS","_multifileReader","_reader","readCurrentFile","_warnings","_delimiterStack","_pendingAttributes","_languageOptions","_findNextToken","_checkBalancedDelimiters","_readStringWhile","_readStringConstant","_readSymbol","_ignoreWhitespaceAndComments","eof","moreFiles","nextFile","c2","startsWith","consumeString","_ignoreWhitespace","_ignoreComments","_startSingleLineComment","_ignoreSingleLineComment","_evaluatePragma","_readInvisiblePragma","_ignoreMultilineComment","nesting","pragmaDelim","pragma","consumeInvisibleString","_readInvisibleStringUntilDelimiter","_emitWarning","beginRegion","endRegion","setAttribute","languageOption","addLanguageOption","openingDelimiter","isBlockWithReturn","stmt","_enabledLinterChecks","ast","_lintMain","_ensureLintCheckExists","_addDefinitionToSymbolTable","_lintCheck","_lintDefinition","_disableRecursion","defInteractiveProgram","_lintDefProgram","_lintDefInteractiveProgram","_lintDefProcedure","_lintDefFunction","_lintDefType","_lintStmtBlock","exitScope","_lintSwitchBranches","addNewLocalName","_lintStmtReturn","_lintStmtIf","_lintStmtRepeat","_lintStmtForeach","_lintStmtWhile","_lintStmtSwitch","_lintStmtAssignVariable","_lintStmtAssignTuple","_lintStmtProcedureCall","allowReturn","returnAllowed","_lintStatement","_lintExpression","_lintStmtForeachPattern","boundVariables","removeLocalName","_lintPattern","_patternType","_lintBranches","isMatching","_branchesCheckWildcardAndVariable","_branchesCheckNoRepeats","_branchesCheckCompatible","_branchesCheckTypeEvent","_branchesCheckTypeNotEvent","_lintBranchBody","coveredNumbers","coveredConstructors","coveredTuples","coveredTimeout","constructorType","procedureParameters","argument","_lintPatternWildcard","_lintPatternVariable","_lintPatternNumber","_lintPatternStructure","_lintPatternTuple","_lintPatternTimeout","_failExpectedConstructorButGot","expression","_lintExprVariable","_lintExprConstantNumber","_lintExprConstantString","_lintExprChoose","_lintExprMatching","_lintExprList","_lintExprRange","_lintExprTuple","_lintExprStructure","_lintExprStructureUpdate","_lintExprFunctionCall","_lintMatchingBranches","_lintExprStructureOrUpdate","_checkStructureTypeNotEvent","_checkStructureNoRepeatedFields","_checkStructureBindingsCorrect","_checkStructureBindingsComplete","declaredFields","seen","functionParameters","RecursionChecker","callCycle","_currentRoutine","_callGraph","_visitNode","_findCallCycle","_visitNodes","_visitTaggedNode","_visitProgramDefinition","_visitRoutineDefinition","_visitProcedureCall","_visitFunctionCall","_addEdge","visited","parents","f","_findCallCycleFrom","path","g","_nextLabel","_nextVariable","_compileMain","_produce","_compileDefProgram","_compileDefInteractiveProgram","_compileDefProcedure","_compileDefFunction","_compileStatement","_compileMatchBranches","parameterName","_produceList","_compileStmtBlock","_compileStmtReturn","_compileStmtIf","_compileStmtRepeat","_compileStmtForeach","_compileStmtWhile","_compileStmtSwitch","_compileStmtAssignVariable","_compileStmtAssignTuple","_compileStmtProcedureCall","_compileExpression","labelElse","_freshLabel","labelEnd","labelStart","_freshVariable","pos","_compileMatchForeachPatternOrFail","_compilePatternUnbind","_compilePatternCheck","_compilePatternBind","branchLabels","anys","_compileStmtProcedureCallPrimitive","_compileStmtProcedureCallUserDefined","_compilePatternCheckWildcard","_compilePatternCheckVariable","_compilePatternCheckNumber","_compilePatternCheckStructure","_compilePatternCheckTuple","_compilePatternCheckTimeout","_compilePatternBindVariable","_compilePatternBindStructure","_compilePatternBindTuple","_compileExprVariable","_compileExprConstantNumber","_compileExprConstantString","_compileExprChoose","_compileExprMatching","_compileExprList","_compileExprRange","_compileExprTuple","_compileExprStructure","_compileExprStructureUpdate","_compileExprFunctionCall","labelOtherwise","_compileExprFunctionCallAnd","_compileExprFunctionCallOr","_compileExprFunctionCallPrimitive","_compileExprFunctionCallUserDefined","_compileExprFunctionCallFieldAccessor","produce","RT_ExitProgram","RuntimeCondition","RuntimeExitProgram","Frame","frameId","instructionPointer","_routineName","_instructionPointer","_variableTypes","_variables","_stack","_uniqueFrameId","_labelTargets","_nextFrameId","_callStack","_newFrame","_globalStateStack","_snapshotCallback","runWithTimeout","_currentFrame","pushValue","startTime","Date","getTime","_takeSnapshot","_step","_timeoutIfNeeded","_currentInstruction","at","_stepPushInteger","_stepPushString","_stepPushVariable","_stepSetVariable","_stepUnsetVariable","_stepLabel","_stepJump","_stepJumpIfFalse","_stepJumpIfStructure","_stepJumpIfTuple","_stepCall","_stepReturn","_stepMakeTuple","_stepMakeList","_stepMakeStructure","_stepUpdateStructure","_stepReadTupleComponent","_stepReadStructureField","_stepReadStructureFieldPop","_stepAdd","_stepDup","_stepPop","_stepPrimitiveCall","_stepSaveState","_stepRestoreState","_stepTypeCheck","frame","getVariable","newValue","popValue","getVariableType","valType","setVariable","unsetVariable","stackTop","callerFrame","newFrame","stackEmpty","innerFrame","outerFrame","newFieldNames","structure","updateFields","shouldPopStructure","_stepReadStructureFieldGeneric","isOperation","primitive","validateArguments","clone","apiboardFromJboard","apiboardToJboard","gbbFromJboard","gbbToJboard","readJboardFromFile","writeJboardToFile","BoardFormat","formatName","extension","fromJboard","toJboard","_formatName","_description","_extension","_fromJboard","_toJboard","table","cellO","blue","black","red","green","ca","cn","cr","cv","gsboardFromJboard","gsboard","sizeX","sizeY","JSON","gsboardToJboard","gsBoardString","isNumeric","skipWhitespace","readToken","readN","errmsg","readRange","headDeclared","cellDeclared","colores","hx","hy","cx","cy","colorDeclared","colorId","BOARD_FORMAT_LIST","DEFAULT_FORMAT","BOARD_FORMATS","boardFormat","fileExtension","parts","fileBoardFormat","fmt","fs","require","format","readFileSync","writeFileSync"],"mappings":"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","file":"gobstones-interpreter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gobstones-interpreter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gobstones-interpreter\"] = factory();\n\telse\n\t\troot[\"gobstones-interpreter\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 21f6dd5f397bf19a08c5","\nimport { LOCALE_ES } from './i18n/es';\nimport { LOCALE_EN } from './i18n/en';\nimport { LOCALE_PT } from './i18n/pt';\n\nlet CURRENT_LANGUAGE = 'es';\n\nlet dictionaries = {\n  'es': LOCALE_ES,\n  'en': LOCALE_EN,\n  'pt': LOCALE_PT,\n};\n\nexport function i18n(message) {\n  return dictionaries[CURRENT_LANGUAGE][message];\n}\n\nexport function i18nWithLanguage(code, thunk) {\n  if (!(code in dictionaries)) {\n    throw Error('Invalid language code: ' + code);\n  }\n  let oldLanguage = CURRENT_LANGUAGE;\n  CURRENT_LANGUAGE = code;\n  try {\n    return thunk();\n  } finally {\n    CURRENT_LANGUAGE = oldLanguage;\n  }\n}\n\nexport function i18nPosition(position) {\n  return i18n('<position>')(\n           position.filename,\n           position.line,\n           position.column,\n         );\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n.js","import { i18n } from './i18n';\n\n/* Base class for signalling conditions */\nexport class GbsInterpreterException extends Error {\n  /* Note: position should typically be an instance of SourceReader */\n  constructor(startPos, endPos, errorType, reason, args) {\n    super(reason, startPos.filename, startPos.row);\n    this.isGobstonesException = true;\n    this.startPos = startPos;\n    this.endPos = endPos;\n    this.reason = reason;\n    this.args = args;\n\n    this.message = reason === 'boom-called'\n      ? args[0]\n      : i18n(errorType + ':' + reason);\n\n    if (args.length > 0 && typeof this.message === 'function') {\n      this.message = this.message.apply(null, args);\n    }\n  }\n}\n\nexport class GbsWarning extends GbsInterpreterException {\n  constructor(startPos, endPos, reason, args) {\n    super(startPos, endPos, 'warning', reason, args);\n  }\n}\n\nexport class GbsSyntaxError extends GbsInterpreterException {\n  constructor(startPos, endPos, reason, args) {\n    super(startPos, endPos, 'errmsg', reason, args);\n  }\n}\n\nexport class GbsRuntimeError extends GbsInterpreterException {\n  constructor(startPos, endPos, reason, args) {\n    super(startPos, endPos, 'errmsg', reason, args);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/exceptions.js","import { UnknownPosition } from './reader';\nimport { Token } from './token';\n\nexport const N_Main = Symbol.for('N_Main');\n/* Definitions */\nexport const N_DefProgram = Symbol.for('N_DefProgram');\nexport const N_DefInteractiveProgram = Symbol.for('N_DefInteractiveProgram');\nexport const N_DefProcedure = Symbol.for('N_DefProcedure');\nexport const N_DefFunction = Symbol.for('N_DefFunction');\nexport const N_DefType = Symbol.for('N_DefType');\n/* Statements */\nexport const N_StmtBlock = Symbol.for('N_StmtBlock');\nexport const N_StmtReturn = Symbol.for('N_StmtReturn');\nexport const N_StmtIf = Symbol.for('N_StmtIf');\nexport const N_StmtRepeat = Symbol.for('N_StmtRepeat');\nexport const N_StmtForeach = Symbol.for('N_StmtForeach');\nexport const N_StmtWhile = Symbol.for('N_StmtWhile');\nexport const N_StmtSwitch = Symbol.for('N_StmtSwitch');\nexport const N_StmtAssignVariable = Symbol.for('N_StmtAssignVariable');\nexport const N_StmtAssignTuple = Symbol.for('N_StmtAssignTuple');\nexport const N_StmtProcedureCall = Symbol.for('N_StmtProcedureCall');\n/* Patterns */\nexport const N_PatternWildcard = Symbol.for('N_PatternWildcard');\nexport const N_PatternVariable = Symbol.for('N_PatternVariable');\nexport const N_PatternNumber = Symbol.for('N_PatternNumber');\nexport const N_PatternStructure = Symbol.for('N_PatternStructure');\nexport const N_PatternTuple = Symbol.for('N_PatternTuple');\nexport const N_PatternTimeout = Symbol.for('N_PatternTimeout');\n/* Expressions */\nexport const N_ExprVariable = Symbol.for('N_ExprVariable');\nexport const N_ExprConstantNumber = Symbol.for('N_ExprConstantNumber');\nexport const N_ExprConstantString = Symbol.for('N_ExprConstantString');\nexport const N_ExprChoose = Symbol.for('N_ExprChoose');\nexport const N_ExprMatching = Symbol.for('N_ExprMatching');\nexport const N_ExprList = Symbol.for('N_ExprList');\nexport const N_ExprRange = Symbol.for('N_ExprRange');\nexport const N_ExprTuple = Symbol.for('N_ExprTuple');\nexport const N_ExprStructure = Symbol.for('N_ExprStructure');\nexport const N_ExprStructureUpdate = Symbol.for('N_ExprStructureUpdate');\nexport const N_ExprFunctionCall = Symbol.for('N_ExprFunctionCall');\n/* SwitchBranch: pattern -> body */\nexport const N_SwitchBranch = Symbol.for('N_SwitchBranch');\n/* MatchingBranch: pattern -> body */\nexport const N_MatchingBranch = Symbol.for('N_MatchingBranch');\n/* FieldBinding: fieldName <- value */\nexport const N_FieldBinding = Symbol.for('N_FieldBinding');\n/* ConstructorDeclaration */\nexport const N_ConstructorDeclaration = Symbol.for('N_ConstructorDeclaration');\n\n/* Helper functions for the ASTNode toString method */\n\nfunction indent(string) {\n  let lines = [];\n  for (let line of string.split('\\n')) {\n    lines.push('  ' + line);\n  }\n  return lines.join('\\n');\n}\n\nlet showASTs; /* Forward declaration (for ESLint) */\n\nfunction showAST(node) {\n  if (node === null) {\n    return 'null';\n  } else if (node instanceof Array) {\n    return '[\\n' + showASTs(node).join(',\\n') + '\\n]';\n  } else if (node instanceof Token) {\n    return node.toString();\n  } else {\n    let tag = Symbol.keyFor(node.tag).substring(2);\n    return tag + '(\\n' + showASTs(node.children).join(',\\n') + '\\n)';\n  }\n}\n\nshowASTs = function (nodes) {\n  let res = [];\n  for (let node of nodes) {\n    res.push(indent(showAST(node)));\n  }\n  return res;\n};\n\n/* An instance of ASTNode represents a node of the abstract syntax tree.\n * - tag should be a node tag symbol.\n * - children should be (recursively) a possibly empty array of ASTNode's.\n * - startPos and endPos represent the starting and ending\n *   position of the code fragment in the source code, to aid error\n *   reporting.\n */\nexport class ASTNode {\n  constructor(tag, children) {\n    this._tag = tag;\n    this._children = children;\n    this._startPos = UnknownPosition;\n    this._endPos = UnknownPosition;\n    this._attributes = {};\n\n    /* Assert this invariant to protect against common mistakes. */\n    if (!(children instanceof Array)) {\n      throw Error('The children of an ASTNode should be an array.');\n    }\n  }\n\n  toMulangLike() {\n    return {\n      tag: this._tag.toString().replace(/(^Symbol\\(|\\)$)/g, ''),\n      contents: this._children.map((node) => {\n        if (node === null) {\n          return 'null';\n        } else if (node instanceof Array) {\n          return new ASTNode(Symbol('?'), node).toMulangLike().contents;\n        } else if (node instanceof ASTNode) {\n          return node.toMulangLike();\n        } else if (node instanceof Token) {\n          return node.toString();\n        } else {\n          return '?';\n        }\n      })\n    };\n  }\n\n  toString() {\n    return showAST(this);\n  }\n\n  get tag() {\n    return this._tag;\n  }\n\n  get children() {\n    return this._children;\n  }\n\n  set startPos(position) {\n    this._startPos = position;\n  }\n\n  get startPos() {\n    return this._startPos;\n  }\n\n  set endPos(position) {\n    this._endPos = position;\n  }\n\n  get endPos() {\n    return this._endPos;\n  }\n\n  get attributes() {\n    return this._attributes;\n  }\n\n  set attributes(attributes) {\n    this._attributes = attributes;\n  }\n\n}\n\n/* Main */\n\nexport class ASTMain extends ASTNode {\n  constructor(definitions) {\n    super(N_Main, definitions);\n  }\n\n  get definitions() {\n    return this._children;\n  }\n}\n\n/* Definitions */\n\nexport class ASTDefProgram extends ASTNode {\n  constructor(body) {\n    super(N_DefProgram, [body]);\n  }\n\n  get body() {\n    return this.children[0];\n  }\n}\n\nexport class ASTDefInteractiveProgram extends ASTNode {\n  constructor(branches) {\n    super(N_DefInteractiveProgram, branches);\n  }\n\n  get branches() {\n    return this.children;\n  }\n}\n\nexport class ASTDefProcedure extends ASTNode {\n  constructor(name, parameters, body) {\n    super(N_DefProcedure, [name, parameters, body]);\n  }\n\n  get name() {\n    return this.children[0];\n  }\n\n  get parameters() {\n    return this.children[1];\n  }\n\n  get body() {\n    return this.children[2];\n  }\n}\n\nexport class ASTDefFunction extends ASTNode {\n  constructor(name, parameters, body) {\n    super(N_DefFunction, [name, parameters, body]);\n  }\n\n  get name() {\n    return this.children[0];\n  }\n\n  get parameters() {\n    return this.children[1];\n  }\n\n  get body() {\n    return this.children[2];\n  }\n}\n\nexport class ASTDefType extends ASTNode {\n  constructor(typeName, constructorDeclarations) {\n    super(N_DefType, [typeName, constructorDeclarations]);\n  }\n\n  get typeName() {\n    return this._children[0];\n  }\n\n  get constructorDeclarations() {\n    return this._children[1];\n  }\n}\n\n/* Statements */\n\nexport class ASTStmtBlock extends ASTNode {\n  constructor(statements) {\n    super(N_StmtBlock, statements);\n  }\n\n  get statements() {\n    return this.children;\n  }\n}\n\nexport class ASTStmtReturn extends ASTNode {\n  constructor(result) {\n    super(N_StmtReturn, [result]);\n  }\n\n  get result() {\n    return this.children[0];\n  }\n}\n\nexport class ASTStmtIf extends ASTNode {\n  // Note: elseBlock may be null\n  constructor(condition, thenBlock, elseBlock) {\n    super(N_StmtIf, [condition, thenBlock, elseBlock]);\n  }\n\n  get condition() {\n    return this._children[0];\n  }\n\n  get thenBlock() {\n    return this._children[1];\n  }\n\n  get elseBlock() {\n    return this._children[2];\n  }\n}\n\nexport class ASTStmtRepeat extends ASTNode {\n  constructor(times, body) {\n    super(N_StmtRepeat, [times, body]);\n  }\n\n  get times() {\n    return this._children[0];\n  }\n\n  get body() {\n    return this._children[1];\n  }\n}\n\nexport class ASTStmtForeach extends ASTNode {\n  constructor(pattern, range, body) {\n    super(N_StmtForeach, [pattern, range, body]);\n  }\n\n  get pattern() {\n    return this._children[0];\n  }\n\n  get range() {\n    return this._children[1];\n  }\n\n  get body() {\n    return this._children[2];\n  }\n}\n\nexport class ASTStmtWhile extends ASTNode {\n  constructor(condition, body) {\n    super(N_StmtWhile, [condition, body]);\n  }\n\n  get condition() {\n    return this._children[0];\n  }\n\n  get body() {\n    return this._children[1];\n  }\n}\n\nexport class ASTStmtSwitch extends ASTNode {\n  constructor(subject, branches) {\n    super(N_StmtSwitch, [subject, branches]);\n  }\n\n  get subject() {\n    return this._children[0];\n  }\n\n  get branches() {\n    return this._children[1];\n  }\n}\n\nexport class ASTSwitchBranch extends ASTNode {\n  constructor(pattern, body) {\n    super(N_SwitchBranch, [pattern, body]);\n  }\n\n  get pattern() {\n    return this._children[0];\n  }\n\n  get body() {\n    return this._children[1];\n  }\n}\n\nexport class ASTMatchingBranch extends ASTNode {\n  constructor(pattern, body) {\n    super(N_MatchingBranch, [pattern, body]);\n  }\n\n  get pattern() {\n    return this._children[0];\n  }\n\n  get body() {\n    return this._children[1];\n  }\n}\n\nexport class ASTStmtAssignVariable extends ASTNode {\n  constructor(variable, value) {\n    super(N_StmtAssignVariable, [variable, value]);\n  }\n\n  get variable() {\n    return this._children[0];\n  }\n\n  get value() {\n    return this._children[1];\n  }\n}\n\nexport class ASTStmtAssignTuple extends ASTNode {\n  constructor(variables, value) {\n    super(N_StmtAssignTuple, [variables, value]);\n  }\n\n  get variables() {\n    return this._children[0];\n  }\n\n  get value() {\n    return this._children[1];\n  }\n}\n\nexport class ASTStmtProcedureCall extends ASTNode {\n  constructor(procedureName, args) {\n    super(N_StmtProcedureCall, [procedureName, args]);\n  }\n\n  get procedureName() {\n    return this._children[0];\n  }\n\n  get args() {\n    return this._children[1];\n  }\n}\n\n/* Patterns */\n\nexport class ASTPatternWildcard extends ASTNode {\n  constructor() {\n    super(N_PatternWildcard, []);\n  }\n\n  get boundVariables() {\n    return [];\n  }\n}\n\nexport class ASTPatternVariable extends ASTNode {\n  constructor(variableName) {\n    super(N_PatternVariable, [variableName]);\n  }\n\n  get variableName() {\n    return this._children[0];\n  }\n\n  get boundVariables() {\n    return [this._children[0]];\n  }\n}\n\nexport class ASTPatternNumber extends ASTNode {\n  constructor(number) {\n    super(N_PatternNumber, [number]);\n  }\n\n  get number() {\n    return this._children[0];\n  }\n\n  get boundVariables() {\n    return [];\n  }\n}\n\nexport class ASTPatternStructure extends ASTNode {\n  constructor(constructorName, parameters) {\n    super(N_PatternStructure, [constructorName, parameters]);\n  }\n\n  get constructorName() {\n    return this._children[0];\n  }\n\n  get boundVariables() {\n    return this._children[1];\n  }\n}\n\nexport class ASTPatternTuple extends ASTNode {\n  constructor(parameters) {\n    super(N_PatternTuple, parameters);\n  }\n\n  get boundVariables() {\n    return this._children;\n  }\n}\n\nexport class ASTPatternTimeout extends ASTNode {\n  constructor(timeout) {\n    super(N_PatternTimeout, [timeout]);\n  }\n\n  get boundVariables() {\n    return [];\n  }\n\n  get timeout() {\n    return parseInt(this._children[0].value, 10);\n  }\n}\n\n/* Expressions */\n\nexport class ASTExprVariable extends ASTNode {\n  constructor(variableName) {\n    super(N_ExprVariable, [variableName]);\n  }\n\n  get variableName() {\n    return this._children[0];\n  }\n}\n\nexport class ASTExprConstantNumber extends ASTNode {\n  constructor(number) {\n    super(N_ExprConstantNumber, [number]);\n  }\n\n  get number() {\n    return this._children[0];\n  }\n}\n\nexport class ASTExprConstantString extends ASTNode {\n  constructor(string) {\n    super(N_ExprConstantString, [string]);\n  }\n\n  get string() {\n    return this._children[0];\n  }\n}\n\nexport class ASTExprChoose extends ASTNode {\n  constructor(condition, trueExpr, falseExpr) {\n    super(N_ExprChoose, [condition, trueExpr, falseExpr]);\n  }\n\n  get condition() {\n    return this._children[0];\n  }\n\n  get trueExpr() {\n    return this._children[1];\n  }\n\n  get falseExpr() {\n    return this._children[2];\n  }\n}\n\nexport class ASTExprMatching extends ASTNode {\n  constructor(subject, branches) {\n    super(N_ExprMatching, [subject, branches]);\n  }\n\n  get subject() {\n    return this._children[0];\n  }\n\n  get branches() {\n    return this._children[1];\n  }\n}\n\nexport class ASTExprList extends ASTNode {\n  constructor(elements) {\n    super(N_ExprList, elements);\n  }\n\n  get elements() {\n    return this._children;\n  }\n}\n\nexport class ASTExprRange extends ASTNode {\n  // Note: second may be null\n  constructor(first, second, last) {\n    super(N_ExprRange, [first, second, last]);\n  }\n\n  get first() {\n    return this._children[0];\n  }\n\n  get second() {\n    return this._children[1];\n  }\n\n  get last() {\n    return this._children[2];\n  }\n}\n\nexport class ASTExprTuple extends ASTNode {\n  constructor(elements) {\n    super(N_ExprTuple, elements);\n  }\n\n  get elements() {\n    return this.children;\n  }\n}\n\nexport class ASTExprStructure extends ASTNode {\n  constructor(constructorName, fieldBindings) {\n    super(N_ExprStructure, [constructorName, fieldBindings]);\n  }\n\n  get constructorName() {\n    return this._children[0];\n  }\n\n  get fieldBindings() {\n    return this._children[1];\n  }\n\n  fieldNames() {\n    let names = [];\n    for (let fieldBinding of this.fieldBindings) {\n      names.push(fieldBinding.fieldName.value);\n    }\n    return names;\n  }\n}\n\nexport class ASTExprStructureUpdate extends ASTNode {\n  constructor(constructorName, original, fieldBindings) {\n    super(N_ExprStructureUpdate, [constructorName, original, fieldBindings]);\n  }\n\n  get constructorName() {\n    return this._children[0];\n  }\n\n  get original() {\n    return this._children[1];\n  }\n\n  get fieldBindings() {\n    return this._children[2];\n  }\n\n  fieldNames() {\n    let names = [];\n    for (let fieldBinding of this.fieldBindings) {\n      names.push(fieldBinding.fieldName.value);\n    }\n    return names;\n  }\n}\n\nexport class ASTExprFunctionCall extends ASTNode {\n  constructor(functionName, args) {\n    super(N_ExprFunctionCall, [functionName, args]);\n  }\n\n  get functionName() {\n    return this._children[0];\n  }\n\n  get args() {\n    return this._children[1];\n  }\n}\n\nexport class ASTFieldBinding extends ASTNode {\n  constructor(fieldName, value) {\n    super(N_FieldBinding, [fieldName, value]);\n  }\n\n  get fieldName() {\n    return this._children[0];\n  }\n\n  get value() {\n    return this._children[1];\n  }\n}\n\nexport class ASTConstructorDeclaration extends ASTNode {\n  constructor(constructorName, fieldNames) {\n    super(N_ConstructorDeclaration, [constructorName, fieldNames]);\n  }\n\n  get constructorName() {\n    return this._children[0];\n  }\n\n  get fieldNames() {\n    return this._children[1];\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/ast.js","\n/* Token tags are constant symbols */\nexport const T_EOF = Symbol.for('T_EOF');         // End of file\nexport const T_NUM = Symbol.for('T_NUM');         // Number\nexport const T_STRING = Symbol.for('T_STRING');   // String constant\nexport const T_UPPERID = Symbol.for('T_UPPERID'); // Uppercase identifier\nexport const T_LOWERID = Symbol.for('T_LOWERID'); // Lowercase identifier\n\n/* Keywords */\nexport const T_PROGRAM = Symbol.for('T_PROGRAM');\nexport const T_INTERACTIVE = Symbol.for('T_INTERACTIVE');\nexport const T_PROCEDURE = Symbol.for('T_PROCEDURE');\nexport const T_FUNCTION = Symbol.for('T_FUNCTION');\nexport const T_RETURN = Symbol.for('T_RETURN');\nexport const T_IF = Symbol.for('T_IF');\nexport const T_THEN = Symbol.for('T_THEN');\nexport const T_ELSEIF = Symbol.for('T_ELSEIF');\nexport const T_ELSE = Symbol.for('T_ELSE');\nexport const T_CHOOSE = Symbol.for('T_CHOOSE');\nexport const T_WHEN = Symbol.for('T_WHEN');\nexport const T_OTHERWISE = Symbol.for('T_OTHERWISE');\nexport const T_MATCHING = Symbol.for('T_MATCHING');\nexport const T_SELECT = Symbol.for('T_SELECT');\nexport const T_ON = Symbol.for('T_ON');\nexport const T_REPEAT = Symbol.for('T_REPEAT');\nexport const T_FOREACH = Symbol.for('T_FOREACH');\nexport const T_IN = Symbol.for('T_IN');\nexport const T_WHILE = Symbol.for('T_WHILE');\nexport const T_SWITCH = Symbol.for('T_SWITCH');\nexport const T_TO = Symbol.for('T_TO');\nexport const T_LET = Symbol.for('T_LET');\nexport const T_NOT = Symbol.for('T_NOT');\nexport const T_DIV = Symbol.for('T_DIV');\nexport const T_MOD = Symbol.for('T_MOD');\nexport const T_TYPE = Symbol.for('T_TYPE');\nexport const T_IS = Symbol.for('T_IS');\nexport const T_RECORD = Symbol.for('T_RECORD');\nexport const T_VARIANT = Symbol.for('T_VARIANT');\nexport const T_CASE = Symbol.for('T_CASE');\nexport const T_FIELD = Symbol.for('T_FIELD');\nexport const T_UNDERSCORE = Symbol.for('T_UNDERSCORE');\nexport const T_TIMEOUT = Symbol.for('T_TIMEOUT');\n\n/* Symbols */\nexport const T_LPAREN = Symbol.for('T_LPAREN');\nexport const T_RPAREN = Symbol.for('T_RPAREN');\nexport const T_LBRACE = Symbol.for('T_LBRACE');\nexport const T_RBRACE = Symbol.for('T_RBRACE');\nexport const T_LBRACK = Symbol.for('T_LBRACK');\nexport const T_RBRACK = Symbol.for('T_RBRACK');\nexport const T_COMMA = Symbol.for('T_COMMA');\nexport const T_SEMICOLON = Symbol.for('T_SEMICOLON');\nexport const T_ELLIPSIS = Symbol.for('T_ELLIPSIS');\nexport const T_RANGE = Symbol.for('T_RANGE');\nexport const T_GETS = Symbol.for('T_GETS');\nexport const T_PIPE = Symbol.for('T_PIPE');\nexport const T_ARROW = Symbol.for('T_ARROW');\nexport const T_ASSIGN = Symbol.for('T_ASSIGN');\nexport const T_EQ = Symbol.for('T_EQ');\nexport const T_NE = Symbol.for('T_NE');\nexport const T_LE = Symbol.for('T_LE');\nexport const T_GE = Symbol.for('T_GE');\nexport const T_LT = Symbol.for('T_LT');\nexport const T_GT = Symbol.for('T_GT');\nexport const T_AND = Symbol.for('T_AND');\nexport const T_OR = Symbol.for('T_OR');\nexport const T_CONCAT = Symbol.for('T_CONCAT');\nexport const T_PLUS = Symbol.for('T_PLUS');\nexport const T_MINUS = Symbol.for('T_MINUS');\nexport const T_TIMES = Symbol.for('T_TIMES');\nexport const T_POW = Symbol.for('T_POW');\n\n/* A token is given by:\n * - A token tag (e.g. T_LOWERID, T_NUM).\n * - Possibly, a value (e.g. 'nroBolitas', 8).\n *   When the value is irrelevant, we provide null by convention.\n * - Two positions, representing its location in the source. */\nexport class Token {\n  constructor(tag, value, startPos, endPos) {\n    this._tag = tag;\n    this._value = value;\n    this._startPos = startPos;\n    this._endPos = endPos;\n  }\n\n  toString() {\n    let tag = Symbol.keyFor(this._tag).substring(2);\n    switch (tag) {\n      case 'NUM': case 'STRING': case 'UPPERID': case 'LOWERID':\n        return tag + '(\"' + this._value + '\")';\n      default:\n        return tag;\n    }\n  }\n\n  get tag() {\n    return this._tag;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  get startPos() {\n    return this._startPos;\n  }\n\n  get endPos() {\n    return this._endPos;\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/token.js","import { i18n } from './i18n';\nimport {\n  ValueInteger,\n  ValueList,\n  ValueStructure,\n  TypeAny,\n  TypeInteger,\n  TypeString,\n  TypeStructure,\n  TypeList,\n  joinTypes,\n} from './value';\nimport {\n  GbsRuntimeError,\n} from './exceptions';\n\n/*\n * This module provides the runtime support for the execution of a program.\n *\n * The runtime support includes:\n *\n * - A definition of a class RuntimeState, representing the global state\n *   of a program.\n *\n * - A definition of a class RuntimePrimitives, representing the available\n *   primitive functions.\n *\n * This file is a particular implementation, in which RuntimeState\n * represents a Gobstones board, and RuntimePrimitives are the primitives\n * functions and procedures available in Gobstones.\n *\n * Potential variants of the language might have a different notion of\n * global state, and different available primitives.\n */\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsRuntimeError(startPos, endPos, reason, args);\n}\n\nfunction boolEnum() {\n  return [\n    i18n('CONS:False'),\n    i18n('CONS:True'),\n  ];\n}\n\nfunction colorEnum() {\n  return [\n    i18n('CONS:Color0'),\n    i18n('CONS:Color1'),\n    i18n('CONS:Color2'),\n    i18n('CONS:Color3'),\n  ];\n}\n\nfunction dirEnum() {\n  return [\n    i18n('CONS:Dir0'),\n    i18n('CONS:Dir1'),\n    i18n('CONS:Dir2'),\n    i18n('CONS:Dir3'),\n  ];\n}\n\n/* Enumeration of all the constructors of the Event type, including\n * INIT and TIMEOUT. */\nfunction keyEventEnum() {\n  let modifiers = [\n    '', 'CTRL_', 'ALT_', 'SHIFT_', 'CTRL_ALT_', 'CTRL_SHIFT_', 'ALT_SHIFT_',\n    'CTRL_ALT_SHIFT_',\n  ];\n  let charKeys = [\n    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',\n    'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  ];\n  let specialKeys = [\n    'SPACE', 'RETURN', 'TAB', 'BACKSPACE', 'ESCAPE',\n    'INSERT', 'DELETE', 'HOME', 'END', 'PAGEUP', 'PAGEDOWN',\n    'F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8', 'F9', 'F10', 'F11', 'F12',\n  ];\n  let symbolKeys = [\n    'AMPERSAND', 'ASTERISK', 'AT', 'BACKSLASH', 'CARET', 'COLON', 'DOLLAR',\n    'EQUALS', 'EXCLAIM', 'GREATER', 'HASH', 'LESS', 'PERCENT', 'PLUS',\n    'SEMICOLON', 'SLASH', 'QUESTION', 'QUOTE',\n    'QUOTEDBL', 'UNDERSCORE', 'LEFTPAREN', 'RIGHTPAREN',\n    'LEFTBRACKET', 'RIGHTBRACKET', 'LEFTBRACE', 'RIGHTBRACE',\n  ];\n  let arrowKeys = [\n    'LEFT', 'RIGHT', 'UP', 'DOWN',\n  ];\n  let keys = charKeys.concat(specialKeys).concat(symbolKeys).concat(arrowKeys);\n\n  let eventNames = [];\n  for (let modifier of modifiers) {\n    for (let key of keys) {\n      eventNames.push('K_' + modifier + key);\n    }\n  }\n  return eventNames;\n}\n\nlet KEY_EVENT_ENUM = keyEventEnum();\n\nfunction eventEnum() {\n  return [i18n('CONS:INIT'), i18n('CONS:TIMEOUT')].concat(KEY_EVENT_ENUM);\n}\n\nfunction toEnum(enumeration, name) {\n  return enumeration.indexOf(name);\n}\n\nfunction fromEnum(enumeration, index) {\n  return enumeration[index];\n}\n\nfunction dirOpposite(dirName) {\n  return fromEnum(dirEnum(), (toEnum(dirEnum(), dirName) + 2) % 4);\n}\n\nfunction dirNext(dirName) {\n  return fromEnum(dirEnum(), (toEnum(dirEnum(), dirName) + 1) % 4);\n}\n\nfunction dirPrev(dirName) {\n  return fromEnum(dirEnum(), (toEnum(dirEnum(), dirName) + 3) % 4);\n}\n\nfunction colorNext(colorName) {\n  return fromEnum(colorEnum(), (toEnum(colorEnum(), colorName) + 1) % 4);\n}\n\nfunction colorPrev(colorName) {\n  return fromEnum(colorEnum(), (toEnum(colorEnum(), colorName) + 3) % 4);\n}\n\n/*\n * An instance of RuntimeState represents the current global state of\n * a program. In the case of Gobstones, it is a Gobstones board.\n *\n * It MUST implement the following methods:\n *\n *   this.clone() ~~> returns a copy of the state\n *\n */\nexport class RuntimeState {\n  constructor() {\n    /*\n     * The board is represented as a list of columns, so that board[x] is the\n     * x-th column and board[x][y] is the cell at (x, y).\n     *\n     * By default, create an empty 9x9 board.\n     */\n    this._width = 11;\n    this._height = 7;\n    this._board = [];\n    for (let x = 0; x < this._width; x++) {\n      let column = [];\n      for (let y = 0; y < this._height; y++) {\n        column.push(this._emptyCell());\n      }\n      this._board.push(column);\n    }\n    this._head = {'x': 0, 'y': 0};\n  }\n\n  clone() {\n    let newState = new RuntimeState();\n    newState._width = this._width;\n    newState._height = this._height;\n    newState._board = [];\n    for (let x = 0; x < this._width; x++) {\n      let column = [];\n      for (let y = 0; y < this._height; y++) {\n        let cell = {};\n        for (let colorName of colorEnum()) {\n          cell[colorName] = this._board[x][y][colorName];\n        }\n        column.push(cell);\n      }\n      newState._board.push(column);\n    }\n    newState._head = {'x': this._head.x, 'y': this._head.y};\n    return newState;\n  }\n\n  /* Dump the state to a Jboard data structure */\n  dump() {\n    let jboard = {};\n    jboard.width = this._width;\n    jboard.height = this._height;\n    jboard.head = [this._head.x, this._head.y];\n    jboard.board = [];\n    for (let x = 0; x < this._width; x++) {\n      let column = [];\n      for (let y = 0; y < this._height; y++) {\n        let cell = {};\n        cell['a'] = this._board[x][y][i18n('CONS:Color0')].asNumber();\n        cell['n'] = this._board[x][y][i18n('CONS:Color1')].asNumber();\n        cell['r'] = this._board[x][y][i18n('CONS:Color2')].asNumber();\n        cell['v'] = this._board[x][y][i18n('CONS:Color3')].asNumber();\n        column.push(cell);\n      }\n      jboard.board.push(column);\n    }\n    return jboard;\n  }\n\n  /* Load the state from a Jboard data structure */\n  load(jboard) {\n    this._width = jboard.width;\n    this._height = jboard.height;\n    this._head.x = jboard.head[0];\n    this._head.y = jboard.head[1];\n    this._board = [];\n    for (let x = 0; x < this._width; x++) {\n      let row = [];\n      for (let y = 0; y < this._height; y++) {\n        let cell = jboard.board[x][y];\n        let newCell = {};\n        newCell[i18n('CONS:Color0')] = new ValueInteger(cell['a']);\n        newCell[i18n('CONS:Color1')] = new ValueInteger(cell['n']);\n        newCell[i18n('CONS:Color2')] = new ValueInteger(cell['r']);\n        newCell[i18n('CONS:Color3')] = new ValueInteger(cell['v']);\n        row.push(newCell);\n      }\n      this._board.push(row);\n    }\n  }\n\n  /* Gobstones specific methods */\n\n  putStone(colorName) {\n    let n = this._board[this._head.x][this._head.y][colorName];\n    n = n.add(new ValueInteger(1));\n    this._board[this._head.x][this._head.y][colorName] = n;\n  }\n\n  removeStone(colorName) {\n    let n = this._board[this._head.x][this._head.y][colorName];\n    if (n.le(new ValueInteger(0))) {\n      throw Error('Cannot remove stone.');\n    }\n    n = n.sub(new ValueInteger(1));\n    this._board[this._head.x][this._head.y][colorName] = n;\n  }\n\n  numStones(colorName) {\n    return this._board[this._head.x][this._head.y][colorName];\n  }\n\n  move(dirName) {\n    if (!this.canMove(dirName)) {\n      throw Error('Cannot move.');\n    }\n    let delta = this._deltaForDirection(dirName);\n    this._head.x += delta[0];\n    this._head.y += delta[1];\n  }\n\n  goToEdge(dirName) {\n    if (dirName === i18n('CONS:Dir0')) {\n      this._head.y = this._height - 1;\n    } else if (dirName === i18n('CONS:Dir1')) {\n      this._head.x = this._width - 1;\n    } else if (dirName === i18n('CONS:Dir2')) {\n      this._head.y = 0;\n    } else if (dirName === i18n('CONS:Dir3')) {\n      this._head.x = 0;\n    } else {\n      throw Error('Invalid direction: ' + dirName);\n    }\n  }\n\n  emptyBoardContents() {\n    for (let x = 0; x < this._width; x++) {\n      for (let y = 0; y < this._height; y++) {\n        this._board[x][y] = this._emptyCell();\n      }\n    }\n  }\n\n  canMove(dirName) {\n    let delta = this._deltaForDirection(dirName);\n    let x = this._head.x + delta[0];\n    let y = this._head.y + delta[1];\n    return 0 <= x && x < this._width && 0 <= y && y < this._height;\n  }\n\n  _deltaForDirection(dirName) {\n    let delta;\n    if (dirName === i18n('CONS:Dir0')) {\n      delta = [0, 1];\n    } else if (dirName === i18n('CONS:Dir1')) {\n      delta = [1, 0];\n    } else if (dirName === i18n('CONS:Dir2')) {\n      delta = [0, -1];\n    } else if (dirName === i18n('CONS:Dir3')) {\n      delta = [-1, 0];\n    } else {\n      throw Error('Invalid direction: ' + dirName);\n    }\n    return delta;\n  }\n\n  _emptyCell() {\n    let cell = {};\n    for (let colorName of colorEnum()) {\n      cell[colorName] = new ValueInteger(0);\n    }\n    return cell;\n  }\n}\n\nclass PrimitiveOperation {\n\n  constructor(argumentTypes, argumentValidator, implementation) {\n    this._argumentTypes = argumentTypes;\n    this._argumentValidator = argumentValidator;\n    this._implementation = implementation;\n  }\n\n  get argumentTypes() {\n    return this._argumentTypes;\n  }\n\n  nargs() {\n    return this._argumentTypes.length;\n  }\n\n  call(globalState, args) {\n    return this._implementation.apply(null, [globalState].concat(args));\n  }\n\n  /* Check that the arguments are valid according to the validator.\n   * The validator should be a function receiving a start and end\n   * positions, and a list of arguments.\n   * It should throw a GbsRuntimeError if the arguments are invalid.\n   */\n  validateArguments(startPos, endPos, globalState, args) {\n    this._argumentValidator(startPos, endPos, globalState, args);\n  }\n\n}\n\n/* Casting Gobstones values to JavaScript values and vice-versa */\n\nlet typeAny = new TypeAny();\n\nlet typeInteger = new TypeInteger();\n\nlet typeString = new TypeString();\n\nfunction typeBool() {\n  return new TypeStructure(i18n('TYPE:Bool'), {});\n}\n\nlet typeListAny = new TypeList(new TypeAny());\n\nfunction valueFromBool(bool) {\n  if (bool) {\n    return new ValueStructure(i18n('TYPE:Bool'), i18n('CONS:True'), {});\n  } else {\n    return new ValueStructure(i18n('TYPE:Bool'), i18n('CONS:False'), {});\n  }\n}\n\nexport function boolFromValue(value) {\n  return value.constructorName === i18n('CONS:True');\n}\n\nfunction typeColor() {\n  return new TypeStructure(i18n('TYPE:Color'), {});\n}\n\nfunction valueFromColor(colorName) {\n  return new ValueStructure(i18n('TYPE:Color'), colorName, {});\n}\n\nfunction colorFromValue(value) {\n  return value.constructorName;\n}\n\nfunction typeDir() {\n  return new TypeStructure(i18n('TYPE:Dir'), {});\n}\n\nfunction valueFromDir(dirName) {\n  return new ValueStructure(i18n('TYPE:Dir'), dirName, {});\n}\n\nfunction dirFromValue(value) {\n  return value.constructorName;\n}\n\n/* Argument validators */\n\nfunction noValidation(startPos, endPos, globalState, args) {\n  /* No validation */\n}\n\nfunction isInteger(x) {\n  return joinTypes(x.type(), typeInteger) !== null;\n}\n\nfunction isBool(x) {\n  return joinTypes(x.type(), typeBool()) !== null;\n}\n\nfunction isColor(x) {\n  return joinTypes(x.type(), typeColor()) !== null;\n}\n\nfunction isDir(x) {\n  return joinTypes(x.type(), typeDir()) !== null;\n}\n\nexport function typesWithOpposite() {\n  return [typeInteger, typeBool(), typeDir()];\n}\n\nexport function typesWithOrder() {\n  return [\n    typeInteger, typeBool(), typeColor(), typeDir()\n  ];\n}\n\n/* Generic operations */\n\nfunction enumIndex(value) {\n  if (isBool(value)) {\n    if (boolFromValue(value)) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else if (isColor(value)) {\n    return toEnum(colorEnum(), colorFromValue(value));\n  } else if (isDir(value)) {\n    return toEnum(dirEnum(), dirFromValue(value));\n  } else {\n    throw Error('Value should be Bool, Color or Dir.');\n  }\n}\n\nfunction genericLE(a, b) {\n  if (isInteger(a)) {\n    return valueFromBool(a.le(b));\n  } else {\n    let indexA = enumIndex(a);\n    let indexB = enumIndex(b);\n    return valueFromBool(indexA <= indexB);\n  }\n}\n\nfunction genericGE(a, b) {\n  if (isInteger(a)) {\n    return valueFromBool(a.ge(b));\n  } else {\n    let indexA = enumIndex(a);\n    let indexB = enumIndex(b);\n    return valueFromBool(indexA >= indexB);\n  }\n}\n\nfunction genericLT(a, b) {\n  if (isInteger(a)) {\n    return valueFromBool(a.lt(b));\n  } else {\n    let indexA = enumIndex(a);\n    let indexB = enumIndex(b);\n    return valueFromBool(indexA < indexB);\n  }\n}\n\nfunction genericGT(a, b) {\n  if (isInteger(a)) {\n    return valueFromBool(a.gt(b));\n  } else {\n    let indexA = enumIndex(a);\n    let indexB = enumIndex(b);\n    return valueFromBool(indexA > indexB);\n  }\n}\n\nfunction genericNext(a) {\n  if (isInteger(a)) {\n    return a.add(new ValueInteger(1));\n  } else if (isBool(a)) {\n    if (boolFromValue(a)) {\n      return valueFromBool(false);\n    } else {\n      return valueFromBool(true);\n    }\n  } else if (isColor(a)) {\n    return valueFromColor(colorNext(colorFromValue(a)));\n  } else if (isDir(a)) {\n    return valueFromDir(dirNext(dirFromValue(a)));\n  } else {\n    throw Error('genericNext: value has no next.');\n  }\n}\n\nfunction genericPrev(a) {\n  if (isInteger(a)) {\n    return a.sub(new ValueInteger(1));\n  } else if (isBool(a)) {\n    if (boolFromValue(a)) {\n      return valueFromBool(false);\n    } else {\n      return valueFromBool(true);\n    }\n  } else if (isColor(a)) {\n    return valueFromColor(colorPrev(colorFromValue(a)));\n  } else if (isDir(a)) {\n    return valueFromDir(dirPrev(dirFromValue(a)));\n  } else {\n    throw Error('genericPrev: value has no prev.');\n  }\n}\n\nfunction genericOpposite(a) {\n  if (isInteger(a)) {\n    return a.negate();\n  } else if (isBool(a)) {\n    return valueFromBool(!boolFromValue(a));\n  } else if (isDir(a)) {\n    return valueFromDir(dirOpposite(dirFromValue(a)));\n  } else {\n    throw Error('genericOpposite: value has no opposite.');\n  }\n}\n/* Validate that the type of 'x' is among the given list of types */\nfunction validateTypeAmong(startPos, endPos, x, types) {\n  /* Succeed if the type of x is in the list 'types' */\n  for (let type of types) {\n    if (joinTypes(x.type(), type) !== null) {\n      return;\n    }\n  }\n  /* Report error */\n  fail(startPos, endPos,\n    'expected-value-of-some-type-but-got', [\n      types,\n      x.type()\n    ]\n  );\n}\n\n/* Validate that the types of 'x' and 'y' are compatible */\nfunction validateCompatibleTypes(startPos, endPos, x, y) {\n  if (joinTypes(x.type(), y.type()) === null) {\n    fail(startPos, endPos,\n      'expected-values-to-have-compatible-types', [\n        x.type(),\n        y.type(),\n      ]\n    );\n  }\n}\n\n/* Runtime primitives */\n\nexport class RuntimePrimitives {\n\n  constructor() {\n    /* this._primitiveTypes is a dictionary indexed by type names.\n     *\n     * this._primitiveTypes[typeName] is a dictionary indexed by\n     * the constructor names of the given type.\n     *\n     * this._primitiveTypes[typeName][constructorName]\n     * is a list of field names.\n     */\n    this._primitiveTypes = {};\n\n    /* this._primitiveProcedures and this._primitiveFunctions\n     * are dictionaries indexed by the name of the primitive operation\n     * (procedure or function). Their value is an instance of\n     * PrimitiveOperation.\n     */\n    this._primitiveProcedures = {};\n    this._primitiveFunctions = {};\n\n    /* --Primitive types-- */\n\n    /* Booleans */\n    this._primitiveTypes[i18n('TYPE:Bool')] = {};\n    for (let boolName of boolEnum()) {\n      this._primitiveTypes[i18n('TYPE:Bool')][boolName] = [];\n    }\n\n    /* Colors */\n    this._primitiveTypes[i18n('TYPE:Color')] = {};\n    for (let colorName of colorEnum()) {\n      this._primitiveTypes[i18n('TYPE:Color')][colorName] = [];\n    }\n\n    /* Directions */\n    this._primitiveTypes[i18n('TYPE:Dir')] = {};\n    for (let dirName of dirEnum()) {\n      this._primitiveTypes[i18n('TYPE:Dir')][dirName] = [];\n    }\n\n    /* Events */\n    this._primitiveTypes[i18n('TYPE:Event')] = {};\n    for (let eventName of eventEnum()) {\n      this._primitiveTypes[i18n('TYPE:Event')][eventName] = [];\n    }\n\n    /* --Primitive procedures-- */\n\n    this._primitiveProcedures[i18n('PRIM:TypeCheck')] =\n      new PrimitiveOperation(\n        [typeAny, typeAny, typeString],\n        function (startPos, endPos, globalState, args) {\n          let v1 = args[0];\n          let v2 = args[1];\n          let errorMessage = args[2];\n          if (joinTypes(v1.type(), v2.type()) === null) {\n            fail(startPos, endPos, 'typecheck-failed', [\n                errorMessage.string,\n                v1.type(),\n                v2.type(),\n            ]);\n          }\n        },\n        function (globalState, color) {\n          return null;\n        }\n      );\n\n    this._primitiveProcedures[i18n('PRIM:PutStone')] =\n      new PrimitiveOperation(\n        [typeColor()], noValidation,\n        function (globalState, color) {\n          globalState.putStone(colorFromValue(color));\n          return null;\n        }\n      );\n\n    this._primitiveProcedures[i18n('PRIM:RemoveStone')] =\n      new PrimitiveOperation(\n        [typeColor()],\n        function (startPos, endPos, globalState, args) {\n          let colorName = colorFromValue(args[0]);\n          if (globalState.numStones(colorName).le(new ValueInteger(0))) {\n            fail(startPos, endPos, 'cannot-remove-stone', [colorName]);\n          }\n        },\n        function (globalState, color) {\n          globalState.removeStone(colorFromValue(color));\n          return null;\n        }\n      );\n\n    this._primitiveProcedures[i18n('PRIM:Move')] =\n      new PrimitiveOperation(\n        [typeDir()],\n        function (startPos, endPos, globalState, args) {\n          let dirName = dirFromValue(args[0]);\n          if (!globalState.canMove(dirName)) {\n            fail(startPos, endPos, 'cannot-move-to', [dirName]);\n          }\n        },\n        function (globalState, dir) {\n          globalState.move(dirFromValue(dir));\n          return null;\n        }\n      );\n\n    this._primitiveProcedures[i18n('PRIM:GoToEdge')] =\n      new PrimitiveOperation(\n        [typeDir()], noValidation,\n        function (globalState, dir) {\n          globalState.goToEdge(dirFromValue(dir));\n          return null;\n        }\n      );\n\n    this._primitiveProcedures[i18n('PRIM:EmptyBoardContents')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState, dir) {\n          globalState.emptyBoardContents();\n          return null;\n        }\n      );\n\n    this._primitiveProcedures['_FAIL'] =\n      /* Procedure that always fails */\n      new PrimitiveOperation(\n        [typeString],\n        function (startPos, endPos, globalState, args) {\n          fail(startPos, endPos, args[0].string, []);\n        },\n        function (globalState, errMsg) {\n          /* Unreachable */\n          return null;\n        }\n      );\n\n    /* --Primitive functions-- */\n\n    this._primitiveFunctions['_makeRange'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let first = args[0];\n          let last = args[1];\n          validateCompatibleTypes(startPos, endPos, first, last);\n          validateTypeAmong(startPos, endPos, first, typesWithOrder());\n          validateTypeAmong(startPos, endPos, last, typesWithOrder());\n        },\n        function (globalState, first, last) {\n          let current = first;\n          if (boolFromValue(genericGT(current, last))) {\n            return new ValueList([]);\n          }\n          let result = [];\n          while (boolFromValue(genericLT(current, last))) {\n            result.push(current);\n            current = genericNext(current);\n          }\n          result.push(current);\n          return new ValueList(result);\n        }\n      );\n\n    this._primitiveFunctions['not'] =\n      new PrimitiveOperation(\n        [typeBool()], noValidation,\n        function (globalState, x) {\n          return valueFromBool(!boolFromValue(x));\n        }\n      );\n\n    this._primitiveFunctions['&&'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny], noValidation,\n        /*\n         * This function is a stub so the linter recognizes '&&'\n         * as a defined primitive function of arity 2.\n         *\n         * The implementation of '&&' is treated specially by the\n         * compiler to account for short-circuiting.\n         */\n        function (globalState, x, y) {\n          throw Error('The function \"&&\" should never be called');\n        }\n      );\n\n    this._primitiveFunctions['||'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny], noValidation,\n        /*\n         * This function is a stub so the linter recognizes '||'\n         * as a defined primitive function of arity 2.\n         *\n         * The implementation of '||' is treated specially by the\n         * compiler to account for short-circuiting.\n         */\n        function (globalState, x, y) {\n          throw Error('The function \"||\" should never be called');\n        }\n      );\n\n    this._primitiveFunctions['_makeRangeWithSecond'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let first = args[0];\n          let last = args[1];\n          let second = args[2];\n          validateTypeAmong(startPos, endPos, first, [typeInteger]);\n          validateTypeAmong(startPos, endPos, last, [typeInteger]);\n          validateTypeAmong(startPos, endPos, second, [typeInteger]);\n        },\n        function (globalState, first, last, second) {\n          let delta = second.sub(first);\n          if (delta.lt(new ValueInteger(1))) {\n            return new ValueList([]);\n          }\n          let current = first;\n          let result = [];\n          while (current.le(last)) {\n            result.push(current);\n            current = current.add(delta);\n          }\n          return new ValueList(result);\n        }\n      );\n\n    this._primitiveFunctions['_unsafeListLength'] =\n      new PrimitiveOperation(\n        [typeAny], noValidation,\n        function (globalState, list) {\n          return new ValueInteger(list.length());\n        }\n      );\n\n    this._primitiveFunctions['_unsafeListNth'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny], noValidation,\n        function (globalState, list, index) {\n          return list.elements[index.asNumber()];\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:numStones')] =\n      new PrimitiveOperation(\n        [typeColor()], noValidation,\n        function (globalState, color) {\n          return globalState.numStones(colorFromValue(color));\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:anyStones')] =\n      new PrimitiveOperation(\n        [typeColor()], noValidation,\n        function (globalState, color) {\n          let num = globalState.numStones(colorFromValue(color));\n          return valueFromBool(num.gt(new ValueInteger(0)));\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:canMove')] =\n      new PrimitiveOperation(\n        [typeDir()], noValidation,\n        function (globalState, dir) {\n          return valueFromBool(globalState.canMove(dirFromValue(dir)));\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:next')] =\n      new PrimitiveOperation(\n        [typeAny],\n        function (startPos, endPos, globalState, args) {\n          let value = args[0];\n          validateTypeAmong(startPos, endPos, value, typesWithOrder());\n        },\n        function (globalState, value) {\n          return genericNext(value);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:prev')] =\n      new PrimitiveOperation(\n        [typeAny],\n        function (startPos, endPos, globalState, args) {\n          let value = args[0];\n          validateTypeAmong(startPos, endPos, value, typesWithOrder());\n        },\n        function (globalState, value) {\n          return genericPrev(value);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:opposite')] =\n      new PrimitiveOperation(\n        [typeAny],\n        function (startPos, endPos, globalState, args) {\n          let value = args[0];\n          validateTypeAmong(startPos, endPos, value, typesWithOpposite());\n        },\n        function (globalState, value) {\n          return genericOpposite(value);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:minBool')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromBool(false);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:maxBool')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromBool(true);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:minColor')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromColor(colorEnum()[0]);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:maxColor')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromColor(colorEnum()[colorEnum().length - 1]);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:minDir')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromDir(dirEnum()[0]);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:maxDir')] =\n      new PrimitiveOperation(\n        [], noValidation,\n        function (globalState) {\n          return valueFromDir(dirEnum()[dirEnum().length - 1]);\n        }\n      );\n\n    /* Arithmetic operators */\n\n    this._primitiveFunctions['+'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger], noValidation,\n        function (globalState, a, b) {\n          return a.add(b);\n        }\n      );\n\n    this._primitiveFunctions['-'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger], noValidation,\n        function (globalState, a, b) {\n          return a.sub(b);\n        }\n      );\n\n    this._primitiveFunctions['*'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger], noValidation,\n        function (globalState, a, b) {\n          return a.mul(b);\n        }\n      );\n\n    this._primitiveFunctions['div'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger],\n        function (startPos, endPos, globalState, args) {\n          let b = args[1];\n          if (b.eq(new ValueInteger(0))) {\n            fail(startPos, endPos, 'cannot-divide-by-zero', []);\n          }\n        },\n        function (globalState, a, b) {\n          return a.div(b);\n        }\n      );\n\n    this._primitiveFunctions['mod'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger],\n        function (startPos, endPos, globalState, args) {\n          let b = args[1];\n          if (b.eq(new ValueInteger(0))) {\n            fail(startPos, endPos, 'cannot-divide-by-zero', []);\n          }\n        },\n        function (globalState, a, b) {\n          return a.mod(b);\n        }\n      );\n\n    this._primitiveFunctions['^'] =\n      new PrimitiveOperation(\n        [typeInteger, typeInteger],\n        function (startPos, endPos, globalState, args) {\n          let b = args[1];\n          if (b.lt(new ValueInteger(0))) {\n            fail(startPos, endPos, 'negative-exponent', []);\n          }\n        },\n        function (globalState, a, b) {\n          return a.pow(b);\n        }\n      );\n\n    this._primitiveFunctions['-(unary)'] =\n      new PrimitiveOperation(\n        [typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          validateTypeAmong(startPos, endPos, a, typesWithOpposite());\n        },\n        function (globalState, a) {\n          return genericOpposite(a);\n        }\n      );\n\n    /* Relational operators */\n\n    this._primitiveFunctions['=='] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n        },\n        function (globalState, a, b) {\n          return valueFromBool(a.equal(b));\n        }\n      );\n\n    this._primitiveFunctions['/='] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n        },\n        function (globalState, a, b) {\n          return valueFromBool(!a.equal(b));\n        }\n      );\n\n    this._primitiveFunctions['<='] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n          validateTypeAmong(startPos, endPos, a, typesWithOrder());\n          validateTypeAmong(startPos, endPos, b, typesWithOrder());\n        },\n        function (globalState, a, b) {\n          return genericLE(a, b);\n        }\n      );\n\n    this._primitiveFunctions['>='] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n          validateTypeAmong(startPos, endPos, a, typesWithOrder());\n          validateTypeAmong(startPos, endPos, b, typesWithOrder());\n        },\n        function (globalState, a, b) {\n          return genericGE(a, b);\n        }\n      );\n\n    this._primitiveFunctions['<'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n          validateTypeAmong(startPos, endPos, a, typesWithOrder());\n          validateTypeAmong(startPos, endPos, b, typesWithOrder());\n        },\n        function (globalState, a, b) {\n          return genericLT(a, b);\n        }\n      );\n\n    this._primitiveFunctions['>'] =\n      new PrimitiveOperation(\n        [typeAny, typeAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n          validateTypeAmong(startPos, endPos, a, typesWithOrder());\n          validateTypeAmong(startPos, endPos, b, typesWithOrder());\n        },\n        function (globalState, a, b) {\n          return genericGT(a, b);\n        }\n      );\n\n    /* User-triggered failure */\n\n    this._primitiveProcedures[i18n('PRIM:BOOM')] =\n      new PrimitiveOperation(\n        [typeString],\n        function (startPos, endPos, globalState, args) {\n          fail(startPos, endPos, 'boom-called', [args[0].string]);\n        },\n        function (globalState, msg) {\n          throw Error('Should not be reachable.');\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:boom')] =\n      this._primitiveProcedures[i18n('PRIM:BOOM')];\n\n    /* List operators */\n    this._primitiveFunctions['++'] =\n      new PrimitiveOperation(\n        [typeListAny, typeListAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          let b = args[1];\n          validateCompatibleTypes(startPos, endPos, a, b);\n        },\n        function (globalState, a, b) {\n          return a.append(b);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:isEmpty')] =\n      new PrimitiveOperation(\n        [typeListAny], noValidation,\n        function (globalState, a) {\n          return valueFromBool(a.length() === 0);\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:head')] =\n      new PrimitiveOperation(\n        [typeListAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          if (a.length() === 0) {\n            fail(startPos, endPos, 'list-cannot-be-empty', []);\n          }\n        },\n        function (globalState, a) {\n          return a.head();\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:tail')] =\n      new PrimitiveOperation(\n        [typeListAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          if (a.length() === 0) {\n            fail(startPos, endPos, 'list-cannot-be-empty', []);\n          }\n        },\n        function (globalState, a) {\n          return a.tail();\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:oldTail')] =\n      this._primitiveFunctions[i18n('PRIM:tail')];\n\n    this._primitiveFunctions[i18n('PRIM:init')] =\n      new PrimitiveOperation(\n        [typeListAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          if (a.length() === 0) {\n            fail(startPos, endPos, 'list-cannot-be-empty', []);\n          }\n        },\n        function (globalState, a) {\n          return a.init();\n        }\n      );\n\n    this._primitiveFunctions[i18n('PRIM:last')] =\n      new PrimitiveOperation(\n        [typeListAny],\n        function (startPos, endPos, globalState, args) {\n          let a = args[0];\n          if (a.length() === 0) {\n            fail(startPos, endPos, 'list-cannot-be-empty', []);\n          }\n        },\n        function (globalState, a) {\n          return a.last();\n        }\n      );\n\n  }\n\n  /* Types */\n\n  types() {\n    let typeNames = [];\n    for (let typeName in this._primitiveTypes) {\n      typeNames.push(typeName);\n    }\n    return typeNames;\n  }\n\n  typeConstructors(typeName) {\n    if (!(typeName in this._primitiveTypes)) {\n      throw Error('Not a primitive type: ' + typeName);\n    }\n    let constructorNames = [];\n    for (let constructorName in this._primitiveTypes[typeName]) {\n      constructorNames.push(constructorName);\n    }\n    return constructorNames;\n  }\n\n  constructorFields(typeName, constructorName) {\n    if (!(typeName in this._primitiveTypes)) {\n      throw Error('Not a primitive type: ' + typeName);\n    }\n    if (!(constructorName in this._primitiveTypes[typeName])) {\n      throw Error('Not a primitive constructor: ' + constructorName);\n    }\n    return this._primitiveTypes[typeName][constructorName];\n  }\n\n  /* Operations */\n\n  isOperation(primitiveName) {\n    return primitiveName in this._primitiveProcedures\n        || primitiveName in this._primitiveFunctions;\n  }\n\n  getOperation(primitiveName) {\n    if (primitiveName in this._primitiveProcedures) {\n      return this._primitiveProcedures[primitiveName];\n    } else if (primitiveName in this._primitiveFunctions) {\n      return this._primitiveFunctions[primitiveName];\n    } else {\n      throw Error(primitiveName + ' is not a primitive.');\n    }\n  }\n\n  /* Procedures */\n\n  procedures() {\n    let procedureNames = [];\n    for (let procedureName in this._primitiveProcedures) {\n      procedureNames.push(procedureName);\n    }\n    return procedureNames;\n  }\n\n  isProcedure(primitiveName) {\n    return primitiveName in this._primitiveProcedures;\n  }\n\n  /* Functions */\n\n  functions() {\n    let functionNames = [];\n    for (let functionName in this._primitiveFunctions) {\n      functionNames.push(functionName);\n    }\n    return functionNames;\n  }\n\n  isFunction(primitiveName) {\n    return primitiveName in this._primitiveFunctions;\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime.js","import { i18n } from './i18n';\nimport { Integer } from './bigint';\n\n/* Each value has a type.\n *\n * A type is a tree, represented with instances of Type (or its subclasses).\n * We write:\n *   r(c1, ..., cN)\n * for a tree whose root is r and whose children are c1, ..., cN.\n *\n * The type of a value may be one of the following:\n *   new TypeAny()                      (unknown)\n *   new TypeInteger()\n *   new TypeString()\n *   new TypeTuple([t1, ..., tN])\n *     where ti is the type of the i-th component.\n *   new TypeList(t)\n *     where t is the type of the elements.\n *   new TypeStructure(typeName, cases)\n *     where typeName is the name of the type (e.g. 'Bool').\n *     Moreover, cases is an object of the following \"type\":\n *       Map String (Map String Type)\n *     more precisely,\n *     - cases is dictionary indexed by constructor names,\n *     - if c is a constructor name, cases[c] is a dictionary\n *       indexed by field name,\n *     - if f is a field name, cases[c][f] is the type of the\n *       field f for the constructor c.\n *\n *     For example, consider the following type definition:\n *       type A is variant {\n *         case B {\n *           field x\n *           field y\n *         }\n *         case C {\n *           field z\n *         }\n *       }\n *\n *    Then the following expression in Gobstones:\n *      [B(x <- 1, y <- \"foo\")]\n *    is a list whose type is represented as:\n *      new TypeList(\n *        new TypeStructure('A', {\n *          'B': {'x': new TypeInteger(), 'y': new TypeString()}\n *        })\n *      )\n *\n *    The following expression in Gobstones:\n *      [B(x <- 1, y <- \"foo\"), C(z <- \"bar\")]\n *    is a list whose type is represented as:\n *      new TypeList(\n *        new TypeStructure('A', {\n *          'B': {'x': new TypeInteger(), 'y': new TypeString()},\n *          'C': {'z': new TypeString()},\n *        })\n *      )\n */\nconst Ty_Any = Symbol.for('Ty_Any');\nconst Ty_Integer = Symbol.for('Ty_Integer');\nconst Ty_String = Symbol.for('Ty_String');\nconst Ty_Tuple = Symbol.for('Ty_Tuple');\nconst Ty_List = Symbol.for('Ty_List');\nconst Ty_Structure = Symbol.for('Ty_Structure');\n\nclass Type {\n  constructor(tag) {\n    this._tag = tag;\n  }\n\n  get tag() {\n    return this._tag;\n  }\n\n  isAny() {\n    return false;\n  }\n\n  isInteger() {\n    return false;\n  }\n\n  isString() {\n    return false;\n  }\n\n  isTuple() {\n    return false;\n  }\n\n  isList() {\n    return false;\n  }\n\n  isStructure() {\n    return false;\n  }\n\n  isBoolean() {\n    return false;\n  }\n\n  isColor() {\n    return false;\n  }\n\n  isDirection() {\n    return false;\n  }\n\n}\n\nexport class TypeAny extends Type {\n  constructor() {\n    super(Ty_Any);\n  }\n\n  toString() {\n    return '?';\n  }\n\n  isAny() {\n    return true;\n  }\n\n}\n\nexport class TypeInteger extends Type {\n  constructor() {\n    super(Ty_Integer);\n  }\n\n  toString() {\n    return i18n('TYPE:Integer');\n  }\n\n  isInteger() {\n    return true;\n  }\n\n}\n\nexport class TypeString extends Type {\n  constructor() {\n    super(Ty_String);\n  }\n\n  toString() {\n    return i18n('TYPE:String');\n  }\n\n  isString() {\n    return true;\n  }\n\n}\n\nexport class TypeTuple extends Type {\n  constructor(componentTypes) {\n    super(Ty_Tuple);\n    this._componentTypes = componentTypes;\n  }\n\n  get componentTypes() {\n    return this._componentTypes;\n  }\n\n  toString() {\n    let strings = [];\n    for (let t of this._componentTypes) {\n      strings.push(t.toString());\n    }\n    return i18n('TYPE:Tuple') + '(' + strings.join(', ') + ')';\n  }\n\n  isTuple() {\n    return true;\n  }\n\n}\n\nexport class TypeList extends Type {\n  constructor(contentType) {\n    super(Ty_List);\n    this._contentType = contentType;\n  }\n\n  get contentType() {\n    return this._contentType;\n  }\n\n  toString() {\n    let suffix = '';\n    if (!this._contentType.isAny()) {\n      suffix = '(' + this._contentType.toString() + ')';\n    }\n    return i18n('TYPE:List') + suffix;\n  }\n\n  isList() {\n    return true;\n  }\n\n}\n\nexport class TypeStructure extends Type {\n  constructor(typeName, cases) {\n    super(Ty_Structure);\n    this._typeName = typeName;\n    this._cases = cases;\n  }\n\n  get typeName() {\n    return this._typeName;\n  }\n\n  get cases() {\n    return this._cases;\n  }\n\n  toString() {\n    let caseStrings = [];\n    for (let constructorName of sortedKeys(this._cases)) {\n      let fieldTypes = this._cases[constructorName];\n      let fieldStrings = [];\n      for (let fieldName of sortedKeys(fieldTypes)) {\n        fieldStrings.push(\n          fieldName + ' <- ' + fieldTypes[fieldName].toString()\n        );\n      }\n      if (fieldStrings.length !== 0) {\n        caseStrings.push(\n          constructorName + '(' + fieldStrings.join(', ') + ')'\n        );\n      }\n    }\n    if (caseStrings.length === 0) {\n      return this._typeName;\n    } else {\n      return this._typeName + ' { ' + caseStrings.join(' | ') + ' }';\n    }\n  }\n\n  isStructure() {\n    return true;\n  }\n\n  isBoolean() {\n    return this._typeName === i18n('TYPE:Bool');\n  }\n\n  isColor() {\n    return this._typeName === i18n('TYPE:Color');\n  }\n\n  isDirection() {\n    return this._typeName === i18n('TYPE:Dir');\n  }\n\n}\n\n/* Attempts to calculate the \"join\" of two types.\n *\n * To join two types:\n * - any occurrence of TypeAny() may be replaced by an arbitrary type,\n * - structures of the same type built with different constructors\n *   are joinable,\n * - structures of the same type built with the same constructors\n *   are joinable if their matching fields are joinable.\n *\n * If the types are joinable, return their join.\n * If the types are not joinable, return null.\n */\n\n/* Forward definition of mutually recursive functions (for ESLint) */\nlet joinTupleTypes;\nlet joinListTypes;\nlet joinStructureTypes;\nlet joinFields;\n\nexport function joinTypes(type1, type2) {\n  if (type1 === null || type2 === null) {\n    return null;\n  } else if (type1.tag === Ty_Any) {\n    return type2;\n  } else if (type2.tag === Ty_Any) {\n    return type1;\n  } else if (type1.tag === Ty_Integer && type2.tag === Ty_Integer) {\n    return type1;\n  } else if (type1.tag === Ty_String && type2.tag === Ty_String) {\n    return type1;\n  } else if (type1.tag === Ty_Tuple && type2.tag === Ty_Tuple) {\n    return joinTupleTypes(type1, type2);\n  } else if (type1.tag === Ty_List && type2.tag === Ty_List) {\n    return joinListTypes(type1, type2);\n  } else if (type1.tag === Ty_Structure && type2.tag === Ty_Structure) {\n    return joinStructureTypes(type1, type2);\n  } else {\n    /* Otherwise the types are not joinable */\n    return null;\n  }\n}\n\njoinTupleTypes = function (type1, type2) {\n  if (type1.componentTypes.length !== type2.componentTypes.length) {\n    /* Tuples are of different length */\n    return null;\n  }\n  let joinedComponents = [];\n  for (let i = 0; i < type1.componentTypes.length; i++) {\n    let t1 = type1.componentTypes[i];\n    let t2 = type2.componentTypes[i];\n    let tj = joinTypes(t1, t2);\n    if (tj === null) {\n      /* Cannot join the i-th component */\n      return null;\n    }\n    joinedComponents.push(tj);\n  }\n  return new TypeTuple(joinedComponents);\n};\n\njoinListTypes = function (type1, type2) {\n  let joinedContent = joinTypes(type1.contentType, type2.contentType);\n  if (joinedContent === null) {\n    /* Cannot join the contents of the lists */\n    return null;\n  }\n  return new TypeList(joinedContent);\n};\n\n/*\n * The join of two structures is quite like a least common multiple.\n * We must:\n * - Check that they are structures of the same type.\n * - Include all the non-common constructors verbatim\n *   (with \"non-common\" we mean those that are in type1\n *   but not in type2 or vice-versa).\n * - For all common constructors, we must recursively join\n *   the types of their respective fields.\n */\njoinStructureTypes = function (type1, type2) {\n  if (type1.typeName !== type2.typeName) {\n    return null;\n  }\n\n  let joinedCases = {};\n\n  /* Include all the non-common constructors */\n  function joinCommon(typeA, typeB) {\n    for (let constructorName in typeA.cases) {\n      if (!(constructorName in typeB.cases)) {\n        joinedCases[constructorName] = typeA.cases[constructorName];\n      }\n    }\n  }\n  joinCommon(type1, type2);\n  joinCommon(type2, type1);\n\n  /* Include all the common constructors */\n  for (let constructorName in type1.cases) {\n    if (constructorName in type2.cases) {\n      let joinedFields = joinFields(\n                           type1.cases[constructorName],\n                           type2.cases[constructorName]\n                         );\n      if (joinedFields === null) {\n        return null;\n      }\n      joinedCases[constructorName] = joinedFields;\n    }\n  }\n\n  return new TypeStructure(type1.typeName, joinedCases);\n};\n\njoinFields = function (fields1, fields2) {\n  /* Ensure that they have the same set of fields */\n  function checkIncluded(fieldsA, fieldsB) {\n    for (let fieldName in fieldsA) {\n      if (!(fieldName in fieldsB)) {\n        throw Error(\n          'Join fields: structures built using the same constructor '\n        + 'should have the same set of fields.'\n        );\n      }\n    }\n  }\n  checkIncluded(fields1, fields2);\n  checkIncluded(fields2, fields1);\n\n  /* Recursively join the types of the common fields */\n  let joinedFields = {};\n  for (let fieldName in fields1) {\n    let type1 = fields1[fieldName];\n    let type2 = fields2[fieldName];\n    let joinedTypes = joinTypes(type1, type2);\n    if (joinedTypes === null) {\n      return null;\n    }\n    joinedFields[fieldName] = joinedTypes;\n  }\n  return joinedFields;\n};\n\n/* Helper function */\n\nfunction sortedKeys(dictionary) {\n  let keys = [];\n  for (let key in dictionary) {\n    keys.push(key);\n  }\n  return keys.sort();\n}\n\n/* Value tags */\nexport const V_Integer = Symbol.for('V_Integer');\nexport const V_String = Symbol.for('V_String');\nexport const V_Tuple = Symbol.for('V_Tuple');\nexport const V_List = Symbol.for('V_List');\nexport const V_Structure = Symbol.for('V_Structure');\n\nexport class Value {\n  constructor(tag) {\n    this._tag = tag;\n  }\n\n  get tag() {\n    return this._tag;\n  }\n\n  type() {\n    return new Type('?', []);\n  }\n\n  isInteger() {\n    return this.type().isInteger();\n  }\n\n  isString() {\n    return this.type().isString();\n  }\n\n  isTuple() {\n    return this.type().isTuple();\n  }\n\n  isList() {\n    return this.type().isList();\n  }\n\n  isStructure() {\n    return this.type().isStructure();\n  }\n\n  isBoolean() {\n    return this.type().isBoolean();\n  }\n\n}\n\nexport class ValueInteger extends Value {\n  constructor(number) {\n    super(V_Integer);\n    if (typeof number === 'number') {\n      this._number = number.toString();\n    } else if (typeof number === 'string') {\n      this._number = number;\n    } else {\n      throw Error(\n        'Integer value must be constructed with an integer or a string'\n      );\n    }\n  }\n\n  toString() {\n    return this._number;\n  }\n\n  get number() {\n    return this._number;\n  }\n\n  type() {\n    return new TypeInteger();\n  }\n\n  equal(other) {\n    return other.tag === V_Integer && this.number === other.number;\n  }\n\n  add(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return new ValueInteger(a.add(b).toString());\n  }\n\n  sub(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return new ValueInteger(a.subtract(b).toString());\n  }\n\n  mul(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return new ValueInteger(a.multiply(b).toString());\n  }\n\n  /* Gobstones calculates quotients using\n   * modulo (i.e.truncating towards minus infinity)\n   * rather than\n   * remainder (i.e.truncating towards 0).\n   *\n   * We need to adjust the result to match the standard Gobstones\n   * semantics, namely:\n   *\n   * if a and b have the same sign, then\n   *   a div b  =  abs(a) / abs(b)\n   *\n   * if a and b have different signs, then\n   *   a div b  =  -((abs(a) + abs(b) - 1) / abs(b))\n   *\n   * Here \"div\" denotes the official Gobstones division operator,\n   * while \"/\" denotes the JavaScript/bigint implementation.\n   */\n  div(other) {\n    let z = new ValueInteger(0);\n    if (this.gt(z) === other.gt(z)) {\n      /* Same sign */\n      let a = Integer(this.abs()._number);\n      let b = Integer(other.abs()._number);\n      return new ValueInteger(a.divide(b).toString());\n    } else {\n      /* Different sign */\n      let inc = other.abs().sub(new ValueInteger(1));\n      let a = Integer(this.abs().add(inc)._number);\n      let b = Integer(other.abs()._number);\n      return new ValueInteger(a.divide(b).negate().toString());\n    }\n  }\n\n  /* Calculate the modulus from the equation a = qb + r,\n   * i.e.  r = a - qb */\n  mod(other) {\n    let q = this.div(other);\n    return this.sub(q.mul(other));\n  }\n\n  /* Assumes that 'other' is non-negative */\n  pow(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return new ValueInteger(a.pow(b).toString());\n  }\n\n  eq(other) {\n    return this.equal(other);\n  }\n\n  ne(other) {\n    return !this.equal(other);\n  }\n\n  le(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return a.leq(b);\n  }\n\n  lt(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return a.lt(b);\n  }\n\n  ge(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return a.geq(b);\n  }\n\n  gt(other) {\n    let a = Integer(this._number);\n    let b = Integer(other._number);\n    return a.gt(b);\n  }\n\n  negate() {\n    let a = Integer(this._number);\n    return new ValueInteger(a.negate().toString());\n  }\n\n  abs() {\n    if (this.gt(new ValueInteger(0))) {\n      return this;\n    } else {\n      return this.negate();\n    }\n  }\n\n  asNumber() {\n    return parseInt(this._number, 10);\n  }\n}\n\nexport class ValueString extends Value {\n  constructor(string) {\n    super(V_String);\n    this._string = string;\n  }\n\n  toString() {\n    let res = ['\"'];\n    for (let i = 0; i < this._string.length; i++) {\n      let chr = this._string[i];\n      switch (chr) {\n        case '\"':\n          res.push('\\\\');\n          res.push('\"');\n          break;\n        case '\\\\':\n          res.push('\\\\');\n          res.push('\\\\');\n          break;\n        case '\\u0007':\n          res.push('\\\\');\n          res.push('a');\n          break;\n        case '\\b':\n          res.push('\\\\');\n          res.push('b');\n          break;\n        case '\\f':\n          res.push('\\\\');\n          res.push('f');\n          break;\n        case '\\n':\n          res.push('\\\\');\n          res.push('n');\n          break;\n        case '\\r':\n          res.push('\\\\');\n          res.push('r');\n          break;\n        case '\\t':\n          res.push('\\\\');\n          res.push('t');\n          break;\n        case '\\v':\n          res.push('\\\\');\n          res.push('v');\n          break;\n        default:\n          res.push(chr);\n          break;\n      }\n    }\n    res.push('\"');\n    return res.join('');\n  }\n\n  get string() {\n    return this._string;\n  }\n\n  equal(other) {\n    return other.tag === V_String && this.string === other.string;\n  }\n\n  type() {\n    return new TypeString();\n  }\n}\n\nexport class ValueTuple extends Value {\n  constructor(components) {\n    super(V_Tuple);\n    this._components = components;\n    this._type = this._inferType();\n  }\n\n  toString() {\n    let res = [];\n    for (let component of this._components) {\n      res.push(component.toString());\n    }\n    return '(' + res.join(', ') + ')';\n  }\n\n  get components() {\n    return this._components;\n  }\n\n  size() {\n    return this._components.length;\n  }\n\n  equal(other) {\n    if (other.tag !== V_Tuple) {\n      return false;\n    }\n    if (this.components.length !== other.components.length) {\n      return false;\n    }\n    for (let i = 0; i < this.components.length; i++) {\n      if (!this.components[i].equal(other.components[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  type() {\n    return this._type;\n  }\n\n  _inferType() {\n    let componentTypes = [];\n    for (let component of this._components) {\n      componentTypes.push(component.type());\n    }\n    return new TypeTuple(componentTypes);\n  }\n}\n\nexport class ValueList extends Value {\n  constructor(elements) {\n    super(V_List);\n    this._elements = elements;\n    this._type = this._inferType();\n  }\n\n  toString() {\n    let res = [];\n    for (let element of this._elements) {\n      res.push(element.toString());\n    }\n    return '[' + res.join(', ') + ']';\n  }\n\n  get elements() {\n    return this._elements;\n  }\n\n  equal(other) {\n    if (other.tag !== V_List) {\n      return false;\n    }\n    if (this.elements.length !== other.elements.length) {\n      return false;\n    }\n    for (let i = 0; i < this.elements.length; i++) {\n      if (!this.elements[i].equal(other.elements[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  type() {\n    return this._type;\n  }\n\n  length() {\n    return this._elements.length;\n  }\n\n  _inferType() {\n    let contentType = new TypeAny();\n    for (let element of this._elements) {\n      contentType = joinTypes(contentType, element.type());\n    }\n    return new TypeList(contentType);\n  }\n\n  append(other) {\n    let allElements = [];\n    for (let elem of this.elements) {\n      allElements.push(elem);\n    }\n    for (let elem of other.elements) {\n      allElements.push(elem);\n    }\n    return new ValueList(allElements);\n  }\n\n  head() {\n    return this.elements[0];\n  }\n\n  tail() {\n    let elements = [];\n    for (let i = 1; i < this.elements.length; i++) {\n      elements.push(this.elements[i]);\n    }\n    return new ValueList(elements);\n  }\n\n  init() {\n    let elements = [];\n    for (let i = 0; i < this.elements.length - 1; i++) {\n      elements.push(this.elements[i]);\n    }\n    return new ValueList(elements);\n  }\n\n  last() {\n    return this.elements[this.elements.length - 1];\n  }\n\n}\n\n/* An instance of ValueStructure represents a 'structure' i.e.  a value\n * inhabiting an 'inductive' datatype.\n *\n * This includes built-in enumerations (e.g. booleans), the \"event\" type\n * received by an interactive program, and user-defined records and variants.\n *\n * The second parameter \"fields\" should be a dictionary mapping field names to\n * values\n */\nexport class ValueStructure extends Value {\n\n  constructor(typeName, constructorName, fields) {\n    super(V_Structure);\n    this._typeName = typeName;\n    this._constructorName = constructorName;\n    this._fields = fields;\n  }\n\n  toString() {\n    let res = [];\n    let fieldNames = this.fieldNames();\n    if (fieldNames.length === 0) {\n      return this._constructorName;\n    }\n    for (let fieldName of fieldNames) {\n      res.push(fieldName + ' <- ' + this.fields[fieldName].toString());\n    }\n    return this._constructorName + '(' + res.join(', ') + ')';\n  }\n\n  get typeName() {\n    return this._typeName;\n  }\n\n  get constructorName() {\n    return this._constructorName;\n  }\n\n  get fields() {\n    return this._fields;\n  }\n\n  fieldNames() {\n    return sortedKeys(this._fields);\n  }\n\n  _clone() {\n    let newFields = {};\n    for (let fieldName in this._fields) {\n      newFields[fieldName] = this._fields[fieldName];\n    }\n    return new ValueStructure(\n      this._typeName, this._constructorName, newFields\n    );\n  }\n\n  updateFields(fields) {\n    let newStructure = this._clone();\n    for (let fieldName in fields) {\n      newStructure.fields[fieldName] = fields[fieldName];\n    }\n    return newStructure;\n  }\n\n  equal(other) {\n    if (other.tag !== V_Structure) {\n      return false;\n    }\n    if (this.constructorName !== other.constructorName) {\n      return false;\n    }\n    let fieldNames = this.fieldNames();\n    for (let fieldName of fieldNames) {\n      if (!this.fields[fieldName].equal(other.fields[fieldName])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  type() {\n    let fieldTypes = {};\n    for (let fieldName in this._fields) {\n      fieldTypes[fieldName] = this._fields[fieldName].type();\n    }\n    let cases = {};\n    cases[this._constructorName] = fieldTypes;\n    return new TypeStructure(this._typeName, cases);\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/value.js","\n/* A SourceReader represents the current position in a source file.\n * It keeps track of line and column numbers.\n * Methods are non-destructive. For example:\n *\n *     let r = new SourceReader('foo.gbs', 'if\\n(True)');\n *\n *     r.peek();                       // ~~> 'i'\n *     r = r.consumeCharacter();       // Note: returns a new file reader.\n *\n *     r.peek();                       // ~~> 'f'\n *     r = r.consumeCharacter();\n *\n *     r.peek();                       // ~~> '\\n'\n *     r = r.consumeCharacter('\\n');\n *\n *     r.line();                       // ~~> 2\n */\nexport class SourceReader {\n\n  constructor(filename, string) {\n    this._filename = filename;   // Filename\n    this._string = string;       // Source of the current file\n    this._index = 0;             // Index in the current file\n    this._line = 1;              // Line in the current file\n    this._column = 1;            // Column in the current file\n    this._regions = [];          // Lexical (static) stack of regions\n  }\n\n  _clone() {\n    let r = new SourceReader(this._filename, this._string);\n    r._index = this._index;\n    r._line = this._line;\n    r._column = this._column;\n    r._regions = this._regions;\n    return r;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get line() {\n    return this._line;\n  }\n\n  get column() {\n    return this._column;\n  }\n\n  get region() {\n    if (this._regions.length > 0) {\n      return this._regions[0];\n    } else {\n      return '';\n    }\n  }\n\n  /* Consume one character */\n  consumeCharacter() {\n    let r = this._clone();\n    if (r.peek() === '\\n') {\n      r._line++;\n      r._column = 1;\n    } else {\n      r._column++;\n    }\n    r._index++;\n    return r;\n  }\n\n  /* Consume characters from the input, one per each character in the string\n   * (the contents of the string are ignored). */\n  consumeString(string) {\n    let r = this;\n    for (let _ of string) {\n      r = r.consumeCharacter();\n    }\n    return r;\n  }\n\n  /* Returns the SourceReader after consuming an 'invisible' character.\n   * Invisible characters affect the index but not the line or column.\n   */\n  consumeInvisibleCharacter() {\n    let r = this._clone();\n    r._index++;\n    return r;\n  }\n\n  /* Consume 'invisible' characters from the input, one per each character\n   * in the string */\n  consumeInvisibleString(string) {\n    let r = this;\n    for (let _ of string) {\n      r = r.consumeInvisibleCharacter();\n    }\n    return r;\n  }\n\n  /* Return true if the substring occurs at the current point. */\n  startsWith(sub) {\n    let i = this._index;\n    let j = this._index + sub.length;\n    return j <= this._string.length && this._string.substring(i, j) === sub;\n  }\n\n  /* Return true if we have reached the end of the current file */\n  eof() {\n    return this._index >= this._string.length;\n  }\n\n  /* Return the current character, assuming we have not reached EOF */\n  peek() {\n    return this._string[this._index];\n  }\n\n  /* Push a region to the stack of regions (non-destructively) */\n  beginRegion(region) {\n    let r = this._clone();\n    r._regions = [region].concat(r._regions);\n    return r;\n  }\n\n  /* Pop a region from the stack of regions (non-destructively) */\n  endRegion() {\n    let r = this._clone();\n    if (r._regions.length > 0) {\n      r._regions = r._regions.slice(1);\n    }\n    return r;\n  }\n\n}\n\n/* Return a source reader that represents an unknown position */\nexport const UnknownPosition = new SourceReader('(?)', '');\n\n/* An instance of MultifileReader represents a scanner for reading\n * source code from a list of files.\n */\nexport class MultifileReader {\n\n  /* The 'input' parameter should be either:\n   * (1) a string. e.g.  'program {}', or\n   * (2) a map from filenames to strings, e.g.\n   *     {\n   *       'foo.gbs': 'program { P() }',\n   *       'bar.gbs': 'procedure P() {}',\n   *     }\n   */\n  constructor(input) {\n    if (typeof input === 'string') {\n      input = {'(?)': input};\n    }\n    this._filenames = Object.keys(input);\n    this._filenames.sort();\n    this._input = input;\n    this._index = 0;\n  }\n\n  /* Return true if there are more files */\n  moreFiles() {\n    return this._index + 1 < this._filenames.length;\n  }\n\n  /* Advance to the next file */\n  nextFile() {\n    this._index++;\n  }\n\n  /* Return a SourceReader for the current files */\n  readCurrentFile() {\n    if (this._index < this._filenames.length) {\n      let filename = this._filenames[this._index];\n      return new SourceReader(filename, this._input[filename]);\n    } else {\n      return new SourceReader('(?)', '');\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/reader.js","\nfunction keyword(palabra) {\n  return 'la palabra clave \"' + palabra + '\"';\n}\n\nfunction pluralize(n, singular, plural) {\n  if (n === 0) {\n    return 'ningún ' + singular;\n  } else if (n === 1) {\n    return 'un ' + singular;\n  } else {\n    return n.toString() + ' ' + plural;\n  }\n}\n\nfunction ordinalNumber(n) {\n  let units = [\n    '', 'primer', 'segundo', 'tercer', 'cuarto',\n    'quinto', 'sexto', 'séptimo', 'octavo', 'noveno'\n  ];\n  if (1 <= n <= 9) {\n    return units[n];\n  } else {\n    return '#' + n.toString();\n  }\n}\n\nfunction describeType(type) {\n  if (type.isInteger()) {\n    return ['m', 'número', 'números'];\n  } else if (type.isBoolean()) {\n    return ['m', 'booleano', 'booleanos'];\n  } else if (type.isColor()) {\n    return ['m', 'color', 'colores'];\n  } else if (type.isDirection()) {\n    return ['f', 'dirección', 'direcciones'];\n  } else if (type.isList() && type.contentType.isAny()) {\n    return ['f', 'lista', 'listas'];\n  } else if (type.isList()) {\n    let description = describeType(type.contentType);\n    if (description === null) {\n      return null;\n    } else {\n      let plural = description[2];\n      return ['f', 'lista de ' + plural, 'listas de ' + plural];\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction describeTypeSingular(type) {\n  let description = describeType(type);\n  if (description === null) {\n    return type.toString();\n  } else {\n    let singular = description[1];\n    return singular;\n  }\n}\n\nfunction typeAsNoun(type) {\n  let description = describeType(type);\n  if (description === null) {\n    return 'un valor de tipo ' + type.toString();\n  } else {\n    let gender = description[0];\n    let singular = description[1];\n    if (gender === 'm') {\n      return 'un ' + singular;\n    } else {\n      return 'una ' + singular;\n    }\n  }\n}\n\nfunction typeAsQualifierSingular(type) {\n  let description = describeType(type);\n  if (description === null) {\n    return 'de tipo ' + type.toString();\n  } else {\n    let gender = description[0];\n    let singular = description[1];\n    if (gender === 'm') {\n      return 'un ' + singular;\n    } else {\n      return 'una ' + singular;\n    }\n  }\n}\n\nfunction typeAsQualifierPlural(type) {\n  let description = describeType(type);\n  if (description === null) {\n    return 'de tipo ' + type.toString();\n  } else {\n    let gender = description[0];\n    let plural = description[2];\n    if (gender === 'm') {\n      return plural;\n    } else {\n      return plural;\n    }\n  }\n}\n\nfunction listOfTypes(types) {\n  let typeStrings = [];\n  for (let type of types) {\n    typeStrings.push(describeTypeSingular(type));\n  }\n  return typeStrings.join(', ');\n}\n\nfunction openingDelimiterName(delimiter) {\n  if (delimiter === '(' || delimiter === ')') {\n    return 'un paréntesis abierto \"(\"';\n  } else if (delimiter === '[' || delimiter === ']') {\n    return 'un corchete abierto \"[\"';\n  } else if (delimiter === '{' || delimiter === '}') {\n    return 'una llave abierta \"{\"';\n  } else {\n    return delimiter;\n  }\n}\n\nfunction formatTypes(string, type1, type2) {\n  let result = '';\n  for (let i = 0; i < string.length; i++) {\n    if (string[i] === '%' && i + 1 < string.length) {\n      if (string[i + 1] === '%') {\n        result += '%';\n        i++;\n      } else if (string[i + 1] === '1') {\n        result += typeAsNoun(type1);\n        i++;\n      } else if (string[i + 1] === '2') {\n        result += typeAsNoun(type2);\n        i++;\n      } else {\n        result += '%';\n      }\n    } else {\n      result += string[i];\n    }\n  }\n  return result;\n}\n\nexport const LOCALE_ES = {\n\n  /* Descriptions of syntactic constructions and tokens */\n  'definition':\n    'una definición (de programa, función, procedimiento, o tipo)',\n  'pattern':\n    'un patrón (comodín \"_\", constructor aplicado a variables, o tupla)',\n  'statement': 'un comando',\n  'expression': 'una expresión',\n  'procedure call': 'una invocación a un procedimiento',\n  'field name': 'el nombre de un campo',\n  'T_EOF': 'el final del archivo',\n  'T_NUM': 'un número',\n  'T_STRING': 'una cadena (string)',\n  'T_UPPERID': 'un identificador con mayúsculas',\n  'T_LOWERID': 'un identificador con minúsculas',\n  'T_PROGRAM': keyword('program'),\n  'T_INTERACTIVE': keyword('interactive'),\n  'T_PROCEDURE': keyword('procedure'),\n  'T_FUNCTION': keyword('function'),\n  'T_RETURN': keyword('return'),\n  'T_IF': keyword('if'),\n  'T_THEN': keyword('then'),\n  'T_ELSE': keyword('else'),\n  'T_REPEAT': keyword('repeat'),\n  'T_FOREACH': keyword('foreach'),\n  'T_IN': keyword('in'),\n  'T_WHILE': keyword('while'),\n  'T_SWITCH': keyword('switch'),\n  'T_TO': keyword('to'),\n  'T_LET': keyword('let'),\n  'T_NOT': keyword('not'),\n  'T_DIV': keyword('div'),\n  'T_MOD': keyword('mod'),\n  'T_TYPE': keyword('type'),\n  'T_IS': keyword('is'),\n  'T_CHOOSE': keyword('choose'),\n  'T_WHEN': keyword('when'),\n  'T_OTHERWISE': keyword('otherwise'),\n  'T_MATCHING': keyword('matching'),\n  'T_SELECT': keyword('select'),\n  'T_ON': keyword('on'),\n  'T_RECORD': keyword('record'),\n  'T_VARIANT': keyword('variant'),\n  'T_CASE': keyword('case'),\n  'T_FIELD': keyword('field'),\n  'T_UNDERSCORE': 'un guión bajo (\"_\")',\n  'T_LPAREN': 'un paréntesis izquierdo (\"(\")',\n  'T_RPAREN': 'un paréntesis derecho (\")\")',\n  'T_LBRACE': 'una llave izquierda (\"{\")',\n  'T_RBRACE': 'una llave derecha (\"}\")',\n  'T_LBRACK': 'un corchete izquierdo (\"[\")',\n  'T_RBRACK': 'un corchete derecho (\"]\")',\n  'T_COMMA': 'una coma (\",\")',\n  'T_SEMICOLON': 'un punto y coma (\";\")',\n  'T_RANGE': 'un separador de rango (\"..\")',\n  'T_GETS': 'una flecha hacia la izquierda (\"<-\")',\n  'T_PIPE': 'una barra vertical (\"|\")',\n  'T_ARROW': 'una flecha (\"->\")',\n  'T_ASSIGN': 'un operador de asignación (\":=\")',\n  'T_EQ': 'una comparación por igualdad (\"==\")',\n  'T_NE': 'una comparación por desigualdad (\"/=\")',\n  'T_LE': 'un menor o igual (\"<=\")',\n  'T_GE': 'un mayor o igual (\">=\")',\n  'T_LT': 'un menor estricto (\"<\")',\n  'T_GT': 'un mayor estricto (\">\")',\n  'T_AND': 'el \"y\" lógico (\"&&\")',\n  'T_OR': 'el \"o\" lógico (\"||\")',\n  'T_CONCAT': 'el operador de concatenación de listas (\"++\")',\n  'T_PLUS': 'el operador de suma (\"+\")',\n  'T_MINUS': 'el operador de resta (\"-\")',\n  'T_TIMES': 'el operador de producto (\"*\")',\n  'T_POW': 'el operador de potencia (\"^\")',\n\n  /* Local name categories */\n  'LocalVariable': 'variable',\n  'LocalIndex': 'índice',\n  'LocalParameter': 'parámetro',\n\n  /* Descriptions of value types */\n  'V_Integer': 'un número',\n  'V_String': 'una cadena',\n  'V_Tuple': 'una tupla',\n  'V_List': 'una lista',\n  'V_Structure': 'una estructura',\n\n  /* Lexer */\n  'errmsg:unclosed-multiline-comment':\n    'El comentario se abre pero nunca se cierra.',\n\n  'errmsg:unclosed-string-constant':\n    'La comilla que abre no tiene una comilla que cierra correspondiente.',\n\n  'errmsg:numeric-constant-should-not-have-leading-zeroes':\n    'Las constantes numéricas no se pueden escribir con ceros a la '\n   + 'izquierda.',\n\n  'errmsg:identifier-must-start-with-alphabetic-character':\n    'Los identificadores deben empezar con un caracter alfabético '\n   + '(a...z,A...Z).',\n\n  'errmsg:unknown-token':\n    function (symbol) {\n      return 'Símbolo desconocido en la entrada: \"' + symbol + '\".';\n    },\n\n  'warning:empty-pragma':\n    'Directiva pragma vacía.',\n\n  'warning:unknown-pragma':\n    function (pragmaName) {\n      return 'Directiva pragma desconocida: \"' + pragmaName + '\".';\n    },\n\n  'errmsg:unmatched-opening-delimiter':\n    function (delimiter) {\n      return 'Se encontró ' + openingDelimiterName(delimiter)\n           + ' pero nunca se cierra.';\n    },\n\n  'errmsg:unmatched-closing-delimiter':\n    function (delimiter) {\n      return 'Se encontró un \"' + delimiter + '\" '\n           + 'pero no había ' + openingDelimiterName(delimiter) + '.';\n    },\n\n  'errmsg:unknown-language-option':\n    function (option) {\n      return 'Opción desconocida. \"' + option + '\".';\n    },\n\n  /* Parser */\n  'errmsg:empty-source':\n    'El programa está vacío.',\n\n  'errmsg:expected-but-found':\n    function (expected, found) {\n      return 'Se esperaba ' + expected + '.\\n'\n           + 'Se encontró: ' + found + '.';\n    },\n\n  'errmsg:pattern-number-cannot-be-negative-zero':\n    'El patrón numérico no puede ser \"-0\".',\n\n  'errmsg:return-tuple-cannot-be-empty':\n    'El return tiene que devolver algo.',\n\n  'errmsg:pattern-tuple-cannot-be-singleton':\n    'El patrón para una tupla no puede tener una sola componente. '\n  + 'Las tuplas tienen 0, 2, 3, o más componentes, pero no 1.',\n\n  'errmsg:assignment-tuple-cannot-be-singleton':\n    'La asignación a una tupla no puede constar de una sola componente. '\n  + 'Las tuplas tienen 0, 2, 3, o más componentes, pero no 1.',\n\n  'errmsg:operators-are-not-associative':\n    function (op1, op2) {\n      return 'La expresión usa '\n           + op1 + ' y ' + op2\n           + ', pero estos operadores no se pueden asociar. '\n           + 'Quizás faltan paréntesis.';\n    },\n\n  'errmsg:obsolete-tuple-assignment':\n    'Se esperaba un comando pero se encontró un paréntesis izquierdo. '\n  + 'Nota: la sintaxis de asignación de tuplas \"(x1, ..., xN) := y\" '\n  + 'está obsoleta. Usar \"let (x1, ..., xN) := y\".',\n\n  /* Linter */\n  'errmsg:program-already-defined':\n    function (pos1, pos2) {\n      return 'Ya había un programa definido en ' + pos1 + '.\\n'\n           + 'No se puede definir un programa en ' + pos2 + '.';\n    },\n\n  'errmsg:procedure-already-defined':\n    function (name, pos1, pos2) {\n      return 'El procedimiento \"' + name + '\" está definido dos veces: '\n           + 'en ' + pos1 + ' y en ' + pos2 + '.';\n    },\n\n  'errmsg:function-already-defined':\n    function (name, pos1, pos2) {\n      return 'La función \"' + name + '\" está definida dos veces: '\n           + 'en ' + pos1 + ' y en ' + pos2 + '.';\n    },\n\n  'errmsg:type-already-defined':\n    function (name, pos1, pos2) {\n      return 'El tipo \"' + name + '\" está definido dos veces: '\n           + 'en ' + pos1 + ' y en ' + pos2 + '.';\n    },\n\n  'errmsg:constructor-already-defined':\n    function (name, pos1, pos2) {\n      return 'El constructor \"' + name + '\" está definido dos veces: '\n           + 'en ' + pos1 + ' y en ' + pos2 + '.';\n    },\n\n  'errmsg:repeated-field-name':\n    function (constructorName, fieldName) {\n      return 'El campo \"' + fieldName + '\" no puede estar repetido '\n           + 'para el constructor \"' + constructorName + '\".';\n    },\n\n  'errmsg:function-and-field-cannot-have-the-same-name':\n    function (name, posFunction, posField) {\n      return 'El nombre \"' + name + '\" se usa '\n           + 'para una función en ' + posFunction + ' y '\n           + 'para un campo en ' + posField + '.';\n    },\n\n  'errmsg:source-should-have-a-program-definition':\n    /* Note: the code may actually be completely empty, but\n     * we avoid this technicality since the message could be\n     * confusing. */\n    'El código debe tener una definición de \"program { ... }\".',\n\n  'errmsg:procedure-should-not-have-return':\n    function (name) {\n      return 'El procedimiento \"' + name + '\" '\n           + 'no debería tener un comando \"return\".';\n    },\n\n  'errmsg:function-should-have-return':\n    function (name) {\n      return 'La función \"' + name + '\" debería tener un comando \"return\".';\n    },\n\n  'errmsg:return-statement-not-allowed-here':\n    'El comando \"return\" solo puede aparecer como el último comando '\n  + 'de una función o como el último comando del programa.',\n\n  'errmsg:local-name-conflict':\n    function (name, oldCat, oldPos, newCat, newPos) {\n      return 'Conflicto de nombres: \"' + name + '\" se usa dos veces: '\n           + 'como ' + oldCat + ' en ' + oldPos + ', y '\n           + 'como ' + newCat + ' en ' + newPos + '.';\n    },\n\n  'errmsg:repeated-variable-in-tuple-assignment':\n    function (name) {\n      return 'La variable \"' + name + '\" está repetida en la asignación '\n           + 'de tuplas.';\n    },\n\n  'errmsg:constructor-used-as-procedure':\n    function (name, type) {\n      return 'El procedimiento \"' + name + '\" no está definido. '\n           + 'El nombre \"' + name + '\" es el nombre de un constructor '\n           + 'del tipo \"' + type + '\".';\n    },\n\n  'errmsg:undefined-procedure':\n    function (name) {\n      return 'El procedimiento \"' + name + '\" no está definido.';\n    },\n\n  'errmsg:undefined-function':\n    function (name) {\n      return 'La función \"' + name + '\" no está definida.';\n    },\n\n  'errmsg:procedure-arity-mismatch':\n    function (name, expected, received) {\n      return 'El procedimiento \"' + name + '\" espera recibir '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' pero se lo invoca con '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    },\n\n  'errmsg:function-arity-mismatch':\n    function (name, expected, received) {\n      return 'La función \"' + name + '\" espera recibir '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' pero se la invoca con '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    },\n\n  'errmsg:structure-pattern-arity-mismatch':\n    function (name, expected, received) {\n      return 'El constructor \"' + name + '\" tiene '\n           + LOCALE_ES['<n>-fields'](expected)\n           + ' pero el patrón tiene '\n           + LOCALE_ES['<n>-parameters'](received) + '.';\n    },\n\n  'errmsg:type-used-as-constructor':\n    function (name, constructorNames) {\n      let msg;\n      if (constructorNames.length === 0) {\n        msg = '(no tiene constructores).';\n      } else if (constructorNames.length === 1) {\n        msg = '(tiene un constructor: ' + constructorNames[0] + ').';\n      } else {\n        msg = '(sus constructores son: '\n            + constructorNames.join(', ') + ').';\n      }\n      return 'El constructor \"' + name + '\" no está definido. '\n           + 'El nombre \"' + name + '\" es el nombre de un tipo '\n           + msg;\n    },\n\n  'errmsg:procedure-used-as-constructor':\n    function (name) {\n      return 'El constructor \"' + name + '\" no está definido. '\n           + 'El nombre \"' + name + '\" es el nombre de un procedimiento.';\n    },\n\n  'errmsg:undeclared-constructor':\n    function (name) {\n      return 'El constructor \"' + name + '\" no está definido.';\n    },\n\n  'errmsg:wildcard-pattern-should-be-last':\n    'El comodín \"_\" debe estar en la última rama.',\n\n  'errmsg:variable-pattern-should-be-last':\n    function (name) {\n      return 'El patrón variable \"' + name +\n             '\" tiene debe estar en la última rama.';\n    },\n\n  'errmsg:numeric-pattern-repeats-number':\n    function (number) {\n      return 'Hay dos ramas distintas para el número \"' + number + '\".';\n    },\n\n  'errmsg:structure-pattern-repeats-constructor':\n    function (name) {\n      return 'Hay dos ramas distintas para el constructor \"' + name + '\".';\n    },\n\n  'errmsg:structure-pattern-repeats-tuple-arity':\n    function (arity) {\n      return 'Hay dos ramas distintas para las tuplas de ' + arity.toString()\n           + ' componentes.';\n    },\n\n  'errmsg:structure-pattern-repeats-timeout':\n    'Hay dos ramas distintas para el TIMEOUT.',\n\n  'errmsg:pattern-does-not-match-type':\n    function (expectedType, patternType) {\n      return 'Los patrones tienen que ser todos del mismo tipo. '\n           + 'El patrón debería ser de tipo ' + expectedType\n           + 'pero es de tipo ' + patternType + '.';\n    },\n\n  'errmsg:patterns-in-interactive-program-must-be-events':\n    'Los patrones de un \"interactive program\" deben ser eventos.',\n\n  'errmsg:patterns-in-interactive-program-cannot-be-variables':\n    'El patrón no puede ser una variable.',\n\n  'errmsg:patterns-in-switch-must-not-be-events':\n    'El patrón no puede ser un evento.',\n\n  'errmsg:structure-construction-repeated-field':\n    function (constructorName, fieldName) {\n      return 'El campo \"' + fieldName + '\" está repetido en '\n           + 'la instanciación del constructor \"' + constructorName + '\".';\n    },\n\n  'errmsg:structure-construction-invalid-field':\n    function (constructorName, fieldName) {\n      return 'El campo \"' + fieldName + '\" no es un campo válido '\n           + 'para el constructor \"' + constructorName + '\".';\n    },\n\n  'errmsg:structure-construction-missing-field':\n    function (constructorName, fieldName) {\n      return 'Falta darle valor al campo \"' + fieldName + '\" '\n           + 'del constructor \"' + constructorName + '\".';\n    },\n\n  'errmsg:structure-construction-cannot-be-an-event':\n    function (constructorName) {\n      return 'El constructor \"' + constructorName + '\" corresponde a un '\n           + 'evento, y solamente se puede manejar implícitamente '\n           + 'en un programa interactivo (el usuario no puede construir '\n           + 'instancias).';\n    },\n\n  'errmsg:forbidden-extension-destructuring-foreach':\n    'El índice de la repetición indexada debe ser un identificador.',\n\n  'errmsg:forbidden-extension-allow-recursion':\n    function (cycle) {\n      let msg = [];\n      for (let call of cycle) {\n        msg.push(\n          '  '\n          + call.caller\n          + ' llama a '\n          + call.callee\n          + ' ('\n          + call.location.startPos.filename.toString()\n          + ':'\n          + call.location.startPos.line.toString()\n          + ':'\n          + call.location.startPos.column.toString()\n          + ')'\n        );\n      }\n      return 'La recursión está deshabilitada. '\n           + 'Hay un ciclo en las invocaciones:\\n'\n           + msg.join('\\n');\n    },\n\n  'errmsg:patterns-in-foreach-must-not-be-events':\n    'El patrón de un foreach no puede ser un evento.',\n\n  /* Runtime errors (virtual machine) */\n  'errmsg:ellipsis': 'El programa todavía no está completo.',\n\n  'errmsg:undefined-variable':\n    function (variableName) {\n      return 'La variable \"' + variableName + '\" no está definida.';\n    },\n\n  'errmsg:too-few-arguments':\n    function (routineName) {\n      return 'Faltan argumentos para \"' + routineName + '\".';\n    },\n\n  'errmsg:expected-structure-but-got':\n    function (constructorName, valueTag) {\n      return 'Se esperaba una estructura construida '\n           + 'con el constructor \"' + constructorName + '\", '\n           + 'pero se recibió ' + valueTag + '.';\n    },\n\n  'errmsg:expected-constructor-but-got':\n    function (constructorNameExpected, constructorNameReceived) {\n      return 'Se esperaba una estructura construida '\n           + 'con el constructor \"'\n           + constructorNameExpected + '\", '\n           + 'pero el constructor recibido es '\n           + constructorNameReceived + '\".';\n    },\n\n  'errmsg:incompatible-types-on-assignment':\n    function (variableName, oldType, newType) {\n      return 'La variable \"' + variableName + '\" '\n           + 'contenía ' + typeAsNoun(oldType) + ', '\n           + 'no se le puede asignar ' + typeAsNoun(newType) + '\".';\n    },\n\n  'errmsg:incompatible-types-on-list-creation':\n    function (index, oldType, newType) {\n      return 'Todos los elementos de una lista deben ser del mismo tipo. '\n           + 'Los elementos son ' + typeAsQualifierPlural(oldType) + ', '\n           + 'pero el elemento en la posición ' + index.toString() + ' '\n           + 'es ' + typeAsQualifierSingular(newType) + '.';\n    },\n\n  'errmsg:incompatible-types-on-structure-update':\n    function (fieldName, oldType, newType) {\n      return 'El campo \"' + fieldName + '\" es '\n           + typeAsQualifierSingular(oldType) + '. '\n           + 'No se lo puede actualizar con '\n           + typeAsNoun(newType) + '.';\n    },\n\n  'errmsg:expected-tuple-value-but-got':\n    function (receivedType) {\n      return 'Se esperaba una tupla pero se recibió '\n           + typeAsNoun(receivedType) + '.';\n    },\n\n  'errmsg:tuple-component-out-of-bounds':\n    function (size, index) {\n      return 'Índice fuera de rango. '\n           + 'La tupla es de tamaño ' + size.toString() + ' y '\n           + 'el índice es ' + index.toString() + '.';\n    },\n\n  'errmsg:expected-structure-value-but-got':\n    function (receivedType) {\n      return 'Se esperaba una estructura pero se recibió '\n           + typeAsNoun(receivedType) + '.';\n    },\n\n  'errmsg:structure-field-not-present':\n    function (fieldNames, missingFieldName) {\n      return 'La estructura no tiene un campo \"' + missingFieldName + '\". '\n           + 'Los campos son: [' + fieldNames.join(', ') + '].';\n    },\n\n  'errmsg:primitive-does-not-exist':\n    function (primitiveName) {\n      return 'La operación primitiva \"' + primitiveName + '\" '\n           + 'no existe o no está disponible.';\n    },\n\n  'errmsg:primitive-arity-mismatch':\n    function (name, expected, received) {\n      return 'La operación \"' + name + '\" espera recibir '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' pero se la invoca con '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    },\n\n  'errmsg:primitive-argument-type-mismatch':\n    function (name, parameterIndex, numArgs, expectedType, receivedType) {\n      let msg = 'El ';\n      if (numArgs > 1) {\n        msg += ordinalNumber(parameterIndex) + ' ';\n      }\n      msg += 'parámetro ';\n      msg += 'de \"' + name + '\" ';\n      msg += 'debería ser ' + typeAsQualifierSingular(expectedType) + ' ';\n      msg += 'pero es ' + typeAsQualifierSingular(receivedType) + '.';\n      return msg;\n    },\n\n  'errmsg:expected-value-of-type-but-got':\n    function (expectedType, receivedType) {\n      return 'Se esperaba ' + typeAsNoun(expectedType) + ' '\n           + 'pero se recibió ' + typeAsNoun(receivedType) + '.';\n    },\n\n  'errmsg:expected-value-of-some-type-but-got':\n    function (expectedTypes, receivedType) {\n      return 'Se esperaba un valor de alguno de los siguientes tipos: '\n           + listOfTypes(expectedTypes) + '. '\n           + 'Pero se recibió '\n           + typeAsNoun(receivedType) + '.';\n    },\n\n  'errmsg:expected-values-to-have-compatible-types':\n    function (type1, type2) {\n      return 'Los tipos de las expresiones no coinciden: '\n           + 'la primera es ' + typeAsQualifierSingular(type1) + ' '\n           + 'y la segunda es ' + typeAsQualifierSingular(type2) + '.';\n    },\n\n  'errmsg:switch-does-not-match':\n    'El valor analizado no coincide con ninguna de las ramas del switch.',\n\n  'errmsg:foreach-pattern-does-not-match':\n    'El elemento no coincide con el patrón esperado por el foreach.',\n\n  'errmsg:cannot-divide-by-zero':\n    'No se puede dividir por cero.',\n\n  'errmsg:negative-exponent':\n    'El exponente de la potencia no puede ser negativo.',\n\n  'errmsg:list-cannot-be-empty':\n    'La lista no puede ser vacía.',\n\n  'errmsg:timeout':\n    function (millisecs) {\n      return 'La ejecución del programa demoró más de '\n           + millisecs.toString() + 'ms.';\n    },\n\n  /* Typecheck */\n  'errmsg:typecheck-failed':\n    function (errorMessage, type1, type2) {\n      return formatTypes(errorMessage, type1, type2);\n    },\n\n  /* Board operations */\n  'errmsg:cannot-move-to':\n    function (dirName) {\n      return 'No se puede mover hacia la dirección ' + dirName +\n             ': cae afuera del tablero.';\n    },\n\n  'errmsg:cannot-remove-stone':\n    function (dirName) {\n      return 'No se puede sacar una bolita de color ' + dirName +\n             ': no hay bolitas de ese color.';\n    },\n\n  /* Runtime */\n\n  'TYPE:Integer': 'Number',\n  'TYPE:String': 'String',\n  'TYPE:Tuple': '',\n  'TYPE:List': 'List',\n\n  'TYPE:Event': 'Event',\n  'CONS:INIT': 'INIT',\n  'CONS:TIMEOUT': 'TIMEOUT',\n\n  'TYPE:Bool': 'Bool',\n  'CONS:False': 'False',\n  'CONS:True': 'True',\n\n  'TYPE:Color': 'Color',\n  'CONS:Color0': 'Azul',\n  'CONS:Color1': 'Negro',\n  'CONS:Color2': 'Rojo',\n  'CONS:Color3': 'Verde',\n\n  'TYPE:Dir': 'Dir',\n  'CONS:Dir0': 'Norte',\n  'CONS:Dir1': 'Este',\n  'CONS:Dir2': 'Sur',\n  'CONS:Dir3': 'Oeste',\n\n  'PRIM:TypeCheck': 'TypeCheck',\n  'PRIM:BOOM': 'BOOM',\n  'PRIM:boom': 'boom',\n\n  'PRIM:PutStone': 'Poner',\n  'PRIM:RemoveStone': 'Sacar',\n  'PRIM:Move': 'Mover',\n  'PRIM:GoToEdge': 'IrAlBorde',\n  'PRIM:EmptyBoardContents': 'VaciarTablero',\n  'PRIM:numStones': 'nroBolitas',\n  'PRIM:anyStones': 'hayBolitas',\n  'PRIM:canMove': 'puedeMover',\n  'PRIM:next': 'siguiente',\n  'PRIM:prev': 'previo',\n  'PRIM:opposite': 'opuesto',\n  'PRIM:minBool': 'minBool',\n  'PRIM:maxBool': 'maxBool',\n  'PRIM:minColor': 'minColor',\n  'PRIM:maxColor': 'maxColor',\n  'PRIM:minDir': 'minDir',\n  'PRIM:maxDir': 'maxDir',\n\n  'PRIM:isEmpty': 'esVacía',\n  'PRIM:head': 'primero',\n  'PRIM:tail': 'sinElPrimero',\n  'PRIM:oldTail': 'resto',\n  'PRIM:init': 'comienzo',\n  'PRIM:last': 'último',\n\n  /* Helpers */\n  '<alternative>':\n    function (strings) {\n      return 'alguna de las siguientes alternativas:\\n'\n           + strings.map(s => '  ' + s).join('\\n');\n    },\n  '<position>':\n    function (filename, line, column) {\n      return filename + ':' + line.toString() + ':' + column.toString();\n    },\n  '<n>-parameters':\n    function (n) {\n      return pluralize(n, 'parámetro', 'parámetros');\n    },\n  '<n>-arguments':\n    function (n) {\n      return pluralize(n, 'argumento', 'argumentos');\n    },\n  '<n>-fields':\n    function (n) {\n      return pluralize(n, 'campo', 'campos');\n    },\n  '<pattern-type>':\n    function (patternType) {\n      if (patternType === 'Event') {\n        return 'evento del programa interactivo';\n      } else if (patternType.substring(0, 7) === '_TUPLE_') {\n        return 'tupla de ' + patternType.substring(7) + ' componentes';\n      } else {\n        return patternType;\n      }\n    },\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n/es.js","import { i18n, i18nPosition } from './i18n';\nimport { GbsSyntaxError } from './exceptions';\n\n/* Description of a field */\nclass FieldDescriptor {\n  constructor(typeName, constructorName, index) {\n    this._typeName = typeName;\n    this._constructorName = constructorName;\n    this._index = index;\n  }\n\n  get typeName() {\n    return this._typeName;\n  }\n\n  get constructorName() {\n    return this._constructorName;\n  }\n\n  get index() {\n    return this._index;\n  }\n}\n\n/* Local name categories */\nexport const LocalVariable = Symbol.for('LocalVariable');\nexport const LocalParameter = Symbol.for('LocalParameter');\nexport const LocalIndex = Symbol.for('LocalIndex');\n\n/* Description of a local name */\nclass LocalNameDescriptor {\n  constructor(category, position) {\n    this._category = category;\n    this._position = position;\n  }\n\n  get category() {\n    return this._category;\n  }\n\n  get position() {\n    return this._position;\n  }\n}\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsSyntaxError(startPos, endPos, reason, args);\n}\n\n/* A symbol table keeps track of definitions, associating:\n * - procedure and function names to their code\n * - type definitions, constructors, and fields\n */\nexport class SymbolTable {\n\n  constructor() {\n    this._program = null;\n\n    /* true iff the program is interactive */\n    this._isInteractiveProgram = false;\n\n    /* Each procedure name is mapped to its definition */\n    this._procedures = {};\n\n    /* Each procedure name is mapped to its parameters */\n    this._procedureParameters = {};\n\n    /* Each function name is mapped to its definition */\n    this._functions = {};\n\n    /* Each function name is mapped to its parameters */\n    this._functionParameters = {};\n\n    /* Each type name is mapped to its definition */\n    this._types = {};\n\n    /* Each type name is mapped to a list of constructor names */\n    this._typeConstructors = {};\n\n    /* Each constructor name is mapped to its declaration */\n    this._constructors = {};\n\n    /* Each constructor name is mapped to its type name */\n    this._constructorType = {};\n\n    /* Each constructor name is mapped to a list of field names */\n    this._constructorFields = {};\n\n    /* Each field name is mapped to a list of field descriptors.\n     * Each field descriptor is of the form\n     *   new FieldDescriptor(typeName, constructorName, index)\n     * where\n     * - 'typeName' is the name of a type\n     * - 'constructorName' is the name of a constructor of the given type\n     * - 'index' is the index of the given field with respect to the\n     *   given constructor (starting from 0)\n     */\n    this._fields = {};\n\n    /* Local names include parameters, indices and variables,\n     * which are only meaningful within a routine.\n     *\n     * Local names may be bound/referenced in the following places:\n     * - formal parameters,\n     * - indices of a \"foreach\",\n     * - pattern matching (formal parameters of a \"switch\"),\n     * - assignments and tuple assignments,\n     * - reading local variables.\n     *\n     * _localNames maps a name to a descriptor of the form:\n     *   new LocalNameDescriptor(category, position)\n     */\n    this._localNames = {};\n  }\n\n  get program() {\n    return this._program;\n  }\n\n  isInteractiveProgram() {\n    return this._isInteractiveProgram;\n  }\n\n  isProcedure(name) {\n    return name in this._procedures;\n  }\n\n  allProcedureNames() {\n    let names = [];\n    for (let name in this._procedures) {\n      names.push(name);\n    }\n    return names.sort();\n  }\n\n  procedureDefinition(name) {\n    if (this.isProcedure(name)) {\n      return this._procedures[name];\n    } else {\n      throw Error('Undefined procedure.');\n    }\n  }\n\n  procedureParameters(name) {\n    if (this.isProcedure(name)) {\n      return this._procedureParameters[name];\n    } else {\n      throw Error('Undefined procedure.');\n    }\n  }\n\n  isFunction(name) {\n    return name in this._functions;\n  }\n\n  allFunctionNames() {\n    let names = [];\n    for (let name in this._functions) {\n      names.push(name);\n    }\n    return names.sort();\n  }\n\n  functionDefinition(name) {\n    if (this.isFunction(name)) {\n      return this._functions[name];\n    } else {\n      throw Error('Undefined function.');\n    }\n  }\n\n  functionParameters(name) {\n    if (this.isFunction(name)) {\n      return this._functionParameters[name];\n    } else {\n      throw Error('Undefined function.');\n    }\n  }\n\n  isType(name) {\n    return name in this._types;\n  }\n\n  typeDefinition(name) {\n    if (this.isType(name)) {\n      return this._types[name];\n    } else {\n      throw Error('Undefined type.');\n    }\n  }\n\n  typeConstructors(name) {\n    if (this.isType(name)) {\n      return this._typeConstructors[name];\n    } else {\n      throw Error('Undefined type.');\n    }\n  }\n\n  isConstructor(name) {\n    return name in this._constructors;\n  }\n\n  constructorDeclaration(name) {\n    if (this.isConstructor(name)) {\n      return this._constructors[name];\n    } else {\n      throw Error('Undefined constructor.');\n    }\n  }\n\n  constructorType(name) {\n    if (this.isConstructor(name)) {\n      return this._constructorType[name];\n    } else {\n      throw Error('Undefined constructor.');\n    }\n  }\n\n  constructorFields(name) {\n    if (this.isConstructor(name)) {\n      return this._constructorFields[name];\n    } else {\n      throw Error('Undefined constructor.');\n    }\n  }\n\n  isField(name) {\n    return name in this._fields;\n  }\n\n  fieldDescriptor(name) {\n    if (this.isField(name)) {\n      return this._fields[name];\n    } else {\n      throw Error('Undefined field.');\n    }\n  }\n\n  defProgram(definition) {\n    if (this._program !== null) {\n      fail(\n        definition.startPos, definition.endPos,\n        'program-already-defined', [\n          i18nPosition(this._program.startPos),\n          i18nPosition(definition.startPos)\n        ]\n      );\n    }\n    this._program = definition;\n  }\n\n  defInteractiveProgram(definition) {\n    this.defProgram(definition);\n    this._isInteractiveProgram = true;\n  }\n\n  defProcedure(definition) {\n    let name = definition.name.value;\n    if (name in this._procedures) {\n      fail(\n        definition.name.startPos, definition.name.endPos,\n        'procedure-already-defined', [\n          name,\n          i18nPosition(this._procedures[name].startPos),\n          i18nPosition(definition.startPos)\n        ]\n      );\n    }\n    let parameters = [];\n    for (let parameter of definition.parameters) {\n      parameters.push(parameter.value);\n    }\n    this._procedures[name] = definition;\n    this._procedureParameters[name] = parameters;\n  }\n\n  defFunction(definition) {\n    let name = definition.name.value;\n    if (name in this._functions) {\n      fail(\n        definition.name.startPos, definition.name.endPos,\n        'function-already-defined', [\n          name,\n          i18nPosition(this._functions[name].startPos),\n          i18nPosition(definition.startPos)\n        ]\n      );\n    } else if (name in this._fields) {\n      let fieldPos =\n        this._constructors[this._fields[name][0].constructorName].startPos;\n      fail(\n        definition.name.startPos, definition.name.endPos,\n        'function-and-field-cannot-have-the-same-name', [\n          name,\n          i18nPosition(definition.startPos),\n          i18nPosition(fieldPos)\n        ]\n      );\n    }\n    let parameters = [];\n    for (let parameter of definition.parameters) {\n      parameters.push(parameter.value);\n    }\n    this._functions[name] = definition;\n    this._functionParameters[name] = parameters;\n  }\n\n  defType(definition) {\n    let typeName = definition.typeName.value;\n    if (typeName in this._types) {\n      fail(\n        definition.typeName.startPos, definition.typeName.endPos,\n        'type-already-defined', [\n          typeName,\n          i18nPosition(this._types[typeName].startPos),\n          i18nPosition(definition.startPos)\n        ]\n      );\n    }\n    this._types[typeName] = definition;\n    let constructorNames = [];\n    for (let constructorDeclaration of definition.constructorDeclarations) {\n      this._declareConstructor(typeName, constructorDeclaration);\n      constructorNames.push(constructorDeclaration.constructorName.value);\n    }\n    this._typeConstructors[typeName] = constructorNames;\n  }\n\n  _declareConstructor(typeName, constructorDeclaration) {\n    let constructorName = constructorDeclaration.constructorName.value;\n    if (constructorName in this._constructors) {\n      fail(\n        constructorDeclaration.constructorName.startPos,\n        constructorDeclaration.constructorName.endPos,\n        'constructor-already-defined', [\n          constructorName,\n          i18nPosition(this._constructors[constructorName].startPos),\n          i18nPosition(constructorDeclaration.startPos)\n        ]\n      );\n    }\n    this._constructors[constructorName] = constructorDeclaration;\n    this._constructorType[constructorName] = typeName;\n\n    let constructorFields = {};\n    let fieldNames = [];\n    let index = 0;\n    for (let fieldName of constructorDeclaration.fieldNames) {\n      if (fieldName.value in constructorFields) {\n        fail(\n          fieldName.startPos, fieldName.endPos,\n          'repeated-field-name',\n          [constructorName, fieldName.value]\n        );\n      }\n      constructorFields[fieldName.value] = true;\n      fieldNames.push(fieldName.value);\n      this._declareField(\n        fieldName.startPos, fieldName.endPos,\n        typeName, constructorName, fieldName.value, index\n      );\n      index++;\n    }\n    this._constructorFields[constructorName] = fieldNames;\n  }\n\n  _declareField(startPos, endPos, typeName, constructorName, fieldName, index) {\n    if (fieldName in this._functions) {\n      fail(\n        startPos, endPos,\n        'function-and-field-cannot-have-the-same-name', [\n          fieldName,\n          i18nPosition(this._functions[fieldName].startPos),\n          i18nPosition(startPos)\n        ]\n      );\n    }\n    if (!(fieldName in this._fields)) {\n      this._fields[fieldName] = [];\n    }\n    this._fields[fieldName].push(\n        new FieldDescriptor(typeName, constructorName, index)\n    );\n  }\n\n  /* Adds a new local name, failing if it already exists. */\n  addNewLocalName(localName, category) {\n    if (localName.value in this._localNames) {\n      fail(\n        localName.startPos, localName.endPos,\n        'local-name-conflict', [\n          localName.value,\n          i18n(Symbol.keyFor(this._localNames[localName.value].category)),\n          i18nPosition(this._localNames[localName.value].position),\n          i18n(Symbol.keyFor(category)),\n          i18nPosition(localName.startPos)\n        ]\n      );\n    }\n    this.setLocalName(localName, category);\n  }\n\n  /* Sets a local name.\n   * It fails if it already exists with a different category. */\n  setLocalName(localName, category) {\n    if (localName.value in this._localNames &&\n        this._localNames[localName.value].category !== category) {\n      fail(\n        localName.startPos, localName.endPos,\n        'local-name-conflict', [\n          localName.value,\n          i18n(Symbol.keyFor(this._localNames[localName.value].category)),\n          i18nPosition(this._localNames[localName.value].position),\n          i18n(Symbol.keyFor(category)),\n          i18nPosition(localName.startPos)\n        ]\n      );\n    }\n    this._localNames[localName.value] =\n      new LocalNameDescriptor(category, localName.startPos);\n  }\n\n  /* Removes a local name. */\n  removeLocalName(localName) {\n    delete this._localNames[localName.value];\n  }\n\n  /* Removes all local names. */\n  exitScope() {\n    this._localNames = {};\n  }\n\n  /* Get the attribute dictionary for a global name.\n   *\n   * A global name is the names of a global definition:\n   *   - the string 'program'\n   *   - any procedure name (e.g. 'P')\n   *   - any function name (e.g. 'f')\n   *   - any type name (e.g. 'A')\n   *\n   * The result is a dictionary of attributes.\n   *\n   */\n  getAttributes(globalName) {\n    if (globalName === 'program' && this._program !== null) {\n      return this._program.attributes;\n    } else if (globalName in this._procedures) {\n      return this._procedures[globalName].attributes;\n    } else if (globalName in this._functions) {\n      return this._functions[globalName].attributes;\n    } else if (globalName in this._types) {\n      return this._types[globalName].attributes;\n    } else {\n      return {};\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/symtable.js","import { UnknownPosition } from './reader';\n\n/* Opcodes are constant symbols */\nexport const I_PushInteger = Symbol.for('I_PushInteger');\nexport const I_PushString = Symbol.for('I_PushString');\nexport const I_PushVariable = Symbol.for('I_PushVariable');\nexport const I_SetVariable = Symbol.for('I_SetVariable');\nexport const I_UnsetVariable = Symbol.for('I_UnsetVariable');\nexport const I_Label = Symbol.for('I_Label');\nexport const I_Jump = Symbol.for('I_Jump');\nexport const I_JumpIfFalse = Symbol.for('I_JumpIfFalse');\nexport const I_JumpIfStructure = Symbol.for('I_JumpIfStructure');\nexport const I_JumpIfTuple = Symbol.for('I_JumpIfTuple');\nexport const I_Call = Symbol.for('I_Call');\nexport const I_Return = Symbol.for('I_Return');\nexport const I_MakeTuple = Symbol.for('I_MakeTuple');\nexport const I_MakeList = Symbol.for('I_MakeList');\nexport const I_MakeStructure = Symbol.for('I_MakeStructure');\nexport const I_UpdateStructure = Symbol.for('I_UpdateStructure');\nexport const I_ReadTupleComponent = Symbol.for('I_ReadTupleComponent');\nexport const I_ReadStructureField = Symbol.for('I_ReadStructureField');\nexport const I_ReadStructureFieldPop = Symbol.for('I_ReadStructureFieldPop');\nexport const I_Add = Symbol.for('I_Add');\nexport const I_Dup = Symbol.for('I_Dup');\nexport const I_Pop = Symbol.for('I_Pop');\nexport const I_PrimitiveCall = Symbol.for('I_PrimitiveCall');\nexport const I_SaveState = Symbol.for('I_SaveState');\nexport const I_RestoreState = Symbol.for('I_RestoreState');\nexport const I_TypeCheck = Symbol.for('I_TypeCheck');\n\nexport class Code {\n\n  constructor(instructions) {\n    this._instructions = instructions;\n  }\n\n  toString() {\n    let res = [];\n    for (let instruction of this._instructions) {\n      res.push(instruction.toString());\n    }\n    return res.join('\\n');\n  }\n\n  produce(instruction) {\n    this._instructions.push(instruction);\n  }\n\n  /* Return the instruction at the given location */\n  at(ip) {\n    if (0 <= ip && ip < this._instructions.length) {\n      return this._instructions[ip];\n    } else {\n      throw Error('Code: instruction pointer out of range.');\n    }\n  }\n\n  /* Return a dictionary mapping label names to their corresponding\n   * instruction pointers. */\n  labelTargets() {\n    let labelTargets = {};\n    for (let i = 0; i < this._instructions.length; i++) {\n      if (this._instructions[i].opcode === I_Label) {\n        let label = this._instructions[i].label;\n        if (label in labelTargets) {\n          throw Error('Code: label \"' + label + '\" is repeated.');\n        }\n        labelTargets[label] = i;\n      }\n    }\n    return labelTargets;\n  }\n\n}\n\nfunction argToString(arg) {\n  if (arg instanceof Array) {\n    let res = [];\n    for (let elem of arg) {\n      res.push(argToString(elem));\n    }\n    return '[' + res.join(', ') + ']';\n  } else {\n    return arg.toString();\n  }\n}\n\nexport class Instruction {\n  constructor(opcode, args) {\n    this._opcode = opcode;\n    this._args = args;\n    this._startPos = UnknownPosition;\n    this._endPos = UnknownPosition;\n  }\n\n  toString() {\n    let opcode = Symbol.keyFor(this._opcode).substring(2);\n    let sargs = [];\n    for (let arg of this._args) {\n      sargs.push(argToString(arg));\n    }\n    return '  ' + opcode + ' ' + sargs.join(', ');\n  }\n\n  get opcode() {\n    return this._opcode;\n  }\n\n  get args() {\n    return this._args;\n  }\n\n  set startPos(position) {\n    this._startPos = position;\n  }\n\n  get startPos() {\n    return this._startPos;\n  }\n\n  set endPos(position) {\n    this._endPos = position;\n  }\n\n  get endPos() {\n    return this._endPos;\n  }\n\n}\n\n/* Push a constant on the stack. */\n\nexport class IPushInteger extends Instruction {\n  constructor(number) {\n    super(I_PushInteger, [number]);\n  }\n\n  get number() {\n    return this._args[0];\n  }\n}\n\nexport class IPushString extends Instruction {\n  constructor(string) {\n    super(I_PushString, [string]);\n  }\n\n  get string() {\n    return this._args[0];\n  }\n}\n\n/* Push a local index/variable/parameter on the stack. */\nexport class IPushVariable extends Instruction {\n  constructor(variableName) {\n    super(I_PushVariable, [variableName]);\n  }\n\n  get variableName() {\n    return this._args[0];\n  }\n}\n\n/* Set a local index/variable/parameter to the value on the top of the stack. */\nexport class ISetVariable extends Instruction {\n  constructor(variableName) {\n    super(I_SetVariable, [variableName]);\n  }\n\n  get variableName() {\n    return this._args[0];\n  }\n}\n\n/* Unset a local index/variable/parameter.\n * This should be used to avoid the variable being used after the end\n * of its scope.\n *\n * E.g. \"i\" should have no value after the end of the foreach:\n *\n *   foreach i in [1,2,3] {\n *   }\n *   x := i\n */\nexport class IUnsetVariable extends Instruction {\n  constructor(variableName) {\n    super(I_UnsetVariable, [variableName]);\n  }\n\n  get variableName() {\n    return this._args[0];\n  }\n}\n\n/* Pseudo-instruction to mark the target of a jump. */\nexport class ILabel extends Instruction {\n  constructor(label) {\n    super(I_Label, [label]);\n  }\n\n  toString() {\n    return this.label + ':';\n  }\n\n  get label() {\n    return this._args[0];\n  }\n}\n\n/* Unconditional jump. */\nexport class IJump extends Instruction {\n  constructor(targetLabel) {\n    super(I_Jump, [targetLabel]);\n  }\n\n  get targetLabel() {\n    return this._args[0];\n  }\n}\n\n/* Jump if the top of the stack is False.\n * Pops the top of the stack. */\nexport class IJumpIfFalse extends Instruction {\n  constructor(targetLabel) {\n    super(I_JumpIfFalse, [targetLabel]);\n  }\n\n  get targetLabel() {\n    return this._args[0];\n  }\n}\n\n/* Jump if the top of the stack is a structure built using the given\n * constructor. Does NOT pop the top of the stack. */\nexport class IJumpIfStructure extends Instruction {\n  constructor(constructorName, targetLabel) {\n    super(I_JumpIfStructure, [constructorName, targetLabel]);\n  }\n\n  get constructorName() {\n    return this._args[0];\n  }\n\n  get targetLabel() {\n    return this._args[1];\n  }\n}\n\n/* Jump if the top of the stack is an n-tuple of the given size.\n * Does NOT pop the top of the stack. */\nexport class IJumpIfTuple extends Instruction {\n  constructor(size, targetLabel) {\n    super(I_JumpIfTuple, [size, targetLabel]);\n  }\n\n  get size() {\n    return this._args[0];\n  }\n\n  get targetLabel() {\n    return this._args[1];\n  }\n}\n\n/* Call a subroutine (procedure or function).\n * The arguments are expected to be located in the stack\n * with the last one at the top.\n *\n * The arguments are popped from the current frame and pushed\n * onto the new frame.\n */\nexport class ICall extends Instruction {\n  constructor(targetLabel, nargs) {\n    super(I_Call, [targetLabel, nargs]);\n  }\n\n  get targetLabel() {\n    return this._args[0];\n  }\n\n  get nargs() {\n    return this._args[1];\n  }\n}\n\n/* Return from a routine to the caller.\n * If returning a value (from a function or program),\n * it must be on the top of the stack. */\nexport class IReturn extends Instruction {\n  constructor() {\n    super(I_Return, []);\n  }\n}\n\n/* Make a tuple of the given size.\n * The components are expected to be located in the stack\n * with the last one at the top. */\nexport class IMakeTuple extends Instruction {\n  constructor(size) {\n    super(I_MakeTuple, [size]);\n  }\n\n  get size() {\n    return this._args[0];\n  }\n}\n\n/* Make a list of the given size.\n * The elements are expected to be located in the stack\n * with the last one at the top. */\nexport class IMakeList extends Instruction {\n  constructor(size) {\n    super(I_MakeList, [size]);\n  }\n\n  get size() {\n    return this._args[0];\n  }\n}\n\n/* Make a structure using the given constructor and the given fields.\n * The values of the fields are expected to be located in the stack\n * with the last one at the top. */\nexport class IMakeStructure extends Instruction {\n  constructor(typeName, constructorName, fieldNames) {\n    super(I_MakeStructure, [typeName, constructorName, fieldNames]);\n  }\n\n  get typeName() {\n    return this._args[0];\n  }\n\n  get constructorName() {\n    return this._args[1];\n  }\n\n  get fieldNames() {\n    return this._args[2];\n  }\n}\n\n/* Update a structure built using the given constructor with the given\n * fields.\n * The stack should have a structure built using the given constructor,\n * followed by the values of the fields that are expected.\n * The last field should be at the top. */\nexport class IUpdateStructure extends Instruction {\n  constructor(typeName, constructorName, fieldNames) {\n    super(I_UpdateStructure, [typeName, constructorName, fieldNames]);\n  }\n\n  get typeName() {\n    return this._args[0];\n  }\n\n  get constructorName() {\n    return this._args[1];\n  }\n\n  get fieldNames() {\n    return this._args[2];\n  }\n}\n\n/* Read the n-th component from the tuple at the top of the stack.\n * Does not pop the tuple. */\nexport class IReadTupleComponent extends Instruction {\n  constructor(index) {\n    super(I_ReadTupleComponent, [index]);\n  }\n\n  get index() {\n    return this._args[0];\n  }\n}\n\n/* Read the given field from the structure at the top of the stack.\n * Does not pop the structure. */\nexport class IReadStructureField extends Instruction {\n  constructor(fieldName) {\n    super(I_ReadStructureField, [fieldName]);\n  }\n\n  get fieldName() {\n    return this._args[0];\n  }\n}\n\n/* Read the given field from the structure at the top of the stack.\n * Pop the structure. */\nexport class IReadStructureFieldPop extends Instruction {\n  constructor(fieldName) {\n    super(I_ReadStructureFieldPop, [fieldName]);\n  }\n\n  get fieldName() {\n    return this._args[0];\n  }\n}\n\n/* Add the topmost elements of the stack (used mostly for testing/debugging) */\nexport class IAdd extends Instruction {\n  constructor() {\n    super(I_Add, []);\n  }\n}\n\n/* Duplicate the top of the stack (there should be at least one element) */\nexport class IDup extends Instruction {\n  constructor() {\n    super(I_Dup, []);\n  }\n}\n\n/* Pop the top of the stack (there should be at least one element) */\nexport class IPop extends Instruction {\n  constructor() {\n    super(I_Pop, []);\n  }\n}\n\n/* Call a primitive function.\n *\n * The arguments are expected to be located in the stack\n * with the last one at the top.\n *\n * Note: the compiler relies on various primitive functions.\n * For example, the operation to make a range is a primitive\n * function:\n *\n *   function _makeRange(start, end)\n *\n * So is the function that checks whether the top of the stack is a list,\n * etc. (required to compile a \"foreach\"), and so on.\n */\nexport class IPrimitiveCall extends Instruction {\n  constructor(primitiveName, nargs) {\n    super(I_PrimitiveCall, [primitiveName, nargs]);\n  }\n\n  get primitiveName() {\n    return this._args[0];\n  }\n\n  get nargs() {\n    return this._args[1];\n  }\n}\n\n/* Save the global state (when entering a function) */\nexport class ISaveState extends Instruction {\n  constructor() {\n    super(I_SaveState, []);\n  }\n}\n\n/* Restore the global state (when leaving a function) */\nexport class IRestoreState extends Instruction {\n  constructor() {\n    super(I_RestoreState, []);\n  }\n}\n\n/* Check that the top of the stack has the given type.\n * Does not pop the top of the stack. */\nexport class ITypeCheck extends Instruction {\n  constructor(type) {\n    super(I_TypeCheck, [type]);\n  }\n\n  get type() {\n    return this._args[0];\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruction.js","import { boolFromValue, RuntimeState } from './runtime.js';\nimport { Runner } from './runner.js';\nimport { i18n, i18nWithLanguage } from './i18n.js';\nimport {\n  apiboardFromJboard, apiboardToJboard,\n  gbbFromJboard, gbbToJboard,\n} from './board_formats.js';\nimport { ValueStructure } from './value.js';\nimport {\n  N_PatternWildcard, N_PatternStructure, N_PatternTuple, N_PatternTimeout\n} from './ast.js';\n\nconst DEFAULT_INFINITE_LOOP_TIMEOUT = 3000; /* millisecs */\nconst DEFAULT_LANGUAGE = 'es';\n\n/* load a board in the API format into a fresh RuntimeState */\nfunction apiboardToState(apiboard) {\n  let state = new RuntimeState();\n  state.load(apiboardToJboard(apiboard));\n  return state;\n}\n\n/* Dump a RuntimeState to a board in the API format */\nfunction apiboardFromState(state) {\n  return apiboardFromJboard(state.dump());\n}\n\n/* Backwards-compatible type/value with special cases for some types */\nfunction apivalueFromValue(value) {\n  const composedValue = (componentKind) => {\n    const elements = value[componentKind].map((it) => {\n      const apiValue = apivalueFromValue(it);\n      const value = apiValue && apiValue.value;\n\n      return value;\n    });\n\n    return {\n      type: value.type().toString(),\n      value: elements\n    };\n  };\n\n  if (value === null) {\n    return null;\n  }\n  if (value.isInteger()) {\n    return {\n      type: i18n('TYPE:Integer'),\n      value: value.asNumber()\n    };\n  } else if (value.isBoolean()) {\n    return {\n      type: i18n('TYPE:Bool'),\n      value: boolFromValue(value)\n    };\n  } else if (value.isString()) {\n    return {\n      type: i18n('TYPE:String'),\n      value: value.string\n    };\n  } else if (value.isTuple()) {\n    return composedValue('components');\n  } else if (value.isList()) {\n    return composedValue('elements');\n  } else if (value.isStructure()) {\n    return {\n      type: value.typeName,\n      value: value.toString()\n    };\n  } else {\n    return {\n      type: value.type().toString(),\n      value: value.toString()\n    };\n  }\n}\n\nclass GobstonesInterpreterError {\n\n  constructor(exception) {\n    this.message = exception.message;\n    this.reason = {\n      code: exception.reason,\n      detail: exception.args\n    };\n    this.on = {\n      range: {\n        start: {\n          row: exception.startPos.line,\n          column: exception.startPos.column\n        },\n        end: {\n          row: exception.endPos.line,\n          column: exception.endPos.column\n        },\n      },\n      region: exception.startPos.region\n    };\n  }\n\n}\n\nclass ParseError extends GobstonesInterpreterError {\n  constructor(exception) {\n    super(exception);\n  }\n}\n\nclass ExecutionError extends GobstonesInterpreterError {\n  constructor(exception, snapshots, regionStack) {\n    super(exception);\n\n    const isTimeout = this.reason.code === 'timeout';\n    this.snapshots = isTimeout\n      ? [snapshots[snapshots.length - 1]]\n      : snapshots;\n    this.on.regionStack = regionStack;\n  }\n}\n\nclass NormalExecutionResult {\n  constructor(finalBoard, snapshots, returnValue) {\n    this.finalBoard = finalBoard;\n    this.snapshots = snapshots;\n    this.returnValue = apivalueFromValue(returnValue);\n\n    /* Actual return value */\n    this.actualReturnValue = returnValue;\n  }\n}\n\nclass InteractiveExecutionResult {\n  constructor(state) {\n    this.keys = this._collectKeyNames(state);\n    this.timeout = this._timeoutValue(state);\n    this.onInit = this._onInitFunction(state);\n    this.onKey = this._onKeyFunction(state);\n    this.onTimeout = this._onTimeoutFunction(state);\n  }\n\n  _hasInit(state) {\n    for (let branch of state.runner.symbolTable.program.branches) {\n      let p = branch.pattern;\n      if (p.tag === N_PatternStructure &&\n          p.constructorName.value === i18n('CONS:INIT')) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _hasTimeout(state) {\n    return this.timeout !== null;\n  }\n\n  _collectKeyNames(state) {\n    let keys = [];\n    for (let branch of state.runner.symbolTable.program.branches) {\n      let p = branch.pattern;\n      if (p.tag === N_PatternStructure &&\n          p.constructorName.value !== i18n('CONS:INIT')) {\n        keys.push(p.constructorName.value);\n      }\n    }\n    return keys;\n  }\n\n  _timeoutValue(state) {\n    for (let branch of state.runner.symbolTable.program.branches) {\n      if (branch.pattern.tag === N_PatternTimeout) {\n        return branch.pattern.timeout;\n      }\n    }\n    return null;\n  }\n\n  /* Return a function that, when called, continues running\n   * the interactive program feeding it with the INIT event.\n   *\n   * If the interactive program does not have an entry for the\n   * INIT event, the returned function has no effect.\n   */\n  _onInitFunction(state) {\n    if (this._hasInit(state)) {\n      let self = this;\n      return function () {\n        return i18nWithLanguage(state.language, () => {\n          return self._onEvent(\n            state,\n            new ValueStructure(i18n('TYPE:Event'), i18n('CONS:INIT'))\n          );\n        });\n      };\n    } else {\n      return function () {\n        return i18nWithLanguage(state.language, () => {\n          return apiboardFromState(state.runner.globalState);\n        });\n      };\n    }\n  }\n\n  /* Return a function that, when called, continues running\n   * the interactive program feeding it with the TIMEOUT event.\n   *\n   * If the interactive program does not have an entry for the\n   * TIMEOUT event, the returned function has no effect.\n   */\n  _onTimeoutFunction(state) {\n    if (this._hasTimeout(state)) {\n      let self = this;\n      return function () {\n        return i18nWithLanguage(state.language, () => {\n          return self._onEvent(\n            state,\n            new ValueStructure(i18n('TYPE:Event'), i18n('CONS:TIMEOUT'))\n          );\n        });\n      };\n    } else {\n      return function () {\n        return i18nWithLanguage(state.language, () => {\n          return apiboardFromState(state.runner.globalState);\n        });\n      };\n    }\n  }\n\n  /* Return a function that, when called with a key code, continues running\n   * the interactive program feeding it with the given key event.\n   *\n   * If the interactive program does not have an entry for the given\n   * key, this results in a runtime error.\n   */\n  _onKeyFunction(state) {\n    let self = this;\n    return function (keyCode) {\n      return i18nWithLanguage(state.language, () => {\n        return self._onEvent(\n          state,\n          new ValueStructure(i18n('TYPE:Event'), keyCode)\n        );\n      });\n    };\n  }\n\n  /* Continue running the interactive program feeding it with the given\n   * eventValue.\n   * On success, return a Board.\n   * On failure, return an ExecutionError. */\n  _onEvent(state, eventValue) {\n    return i18nWithLanguage(state.language, () => {\n      try {\n        state.runner.executeEventWithTimeout(\n          eventValue,\n          state.infiniteLoopTimeout\n        );\n        return apiboardFromState(state.runner.globalState);\n      } catch (exception) {\n        if (exception.isGobstonesException === undefined) {\n          throw exception;\n        }\n        return new ExecutionError(\n                 exception,\n                 [],\n                 state.runner.regionStack()\n               );\n      }\n    });\n  }\n\n}\n\nclass SnapshotTaker {\n\n  constructor(runner) {\n    this._runner = runner;\n    this._snapshots = [];\n  }\n\n  takeSnapshot(routineName, position, callStack, globalState) {\n    if (this._shouldTakeSnapshot(routineName, callStack)) {\n      this._snapshots.push(\n        this._snapshot(routineName, position, callStack, globalState)\n      );\n    }\n  }\n\n  snapshots() {\n    return this._snapshots;\n  }\n\n  _snapshot(routineName, position, callStack, globalState) {\n    let snapshot = {};\n    snapshot.contextNames = [];\n    for (let stackFrame of callStack) {\n      let name = stackFrame.routineName;\n      if (name !== 'program') {\n        name = name + '-' + stackFrame.uniqueFrameId.toString();\n      }\n      snapshot.contextNames.push(name);\n    }\n    snapshot.board = apiboardFromState(globalState);\n    snapshot.region = position.region;\n    snapshot.regionStack = this._runner.regionStack();\n    return snapshot;\n  }\n\n  _shouldTakeSnapshot(routineName, callStack) {\n    let routineNameStack = [];\n    for (let stackFrame of callStack) {\n      routineNameStack.push(stackFrame.routineName);\n    }\n\n    if (this._runner.primitives.isProcedure(routineName)) {\n      /* A primitive procedure must be recorded if there are no\n       * atomic routines anywhere in the call stack. */\n      return this._noAtomicRoutines(routineNameStack);\n    } else {\n      /* Other routines must be recorded if they have the 'recorded'\n       * attribute, and, moreover, there are no atomic routines other\n       * than the last one in the call stack. */\n      routineNameStack.pop();\n      return this._isRecorded(routineName)\n          && this._noAtomicRoutines(routineNameStack);\n    }\n  }\n\n  _noAtomicRoutines(routineNameStack) {\n    for (let routineName of routineNameStack) {\n      if (this._isAtomic(routineName)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _isAtomic(routineName) {\n    if (routineName === 'program') {\n      return false;\n    } else if (this._runner.primitives.isProcedure(routineName)) {\n      /* Primitive procedure */\n      return false;\n    } else if (this._runner.symbolTable.isProcedure(routineName)) {\n      /* User-defined procedure */\n      return false;\n    } else {\n      /* Function */\n      return true;\n    }\n  }\n\n  _isRecorded(routineName) {\n    if (routineName === 'program') {\n      return true;\n    } else if (this._runner.primitives.isProcedure(routineName)) {\n      /* Primitive procedure */\n      return true;\n    } else if (this._runner.symbolTable.isProcedure(routineName)) {\n      /* User-defined procedure */\n      return false;\n    } else {\n      /* Function */\n      return false;\n    }\n  }\n\n}\n\nclass ParseResult {\n\n  constructor(state) {\n    if (state.runner.symbolTable.program === null) {\n      this.program = null;\n    } else if (state.runner.symbolTable.isInteractiveProgram()) {\n      this.program = this._resultForInteractiveProgram(state);\n    } else {\n      this.program = this._resultForProgram(state);\n    }\n    this.declarations = this._collectDeclarations(state.runner);\n    this.getAttributes = function (globalName) {\n      return state.runner.symbolTable.getAttributes(globalName);\n    };\n  }\n\n  _resultForProgram(state) {\n    let program = {};\n    program.alias = 'program';\n    program.interpret = function (board) {\n      let snapshotTaker = new SnapshotTaker(state.runner);\n\n      return i18nWithLanguage(state.language, () => {\n        try {\n          state.runner.compile();\n          state.runner.executeWithTimeoutTakingSnapshots(\n            apiboardToState(board),\n            state.infiniteLoopTimeout,\n            snapshotTaker.takeSnapshot.bind(snapshotTaker)\n          );\n\n          let finalBoard = apiboardFromState(state.runner.globalState);\n          let returnValue = state.runner.result;\n          return new NormalExecutionResult(\n            finalBoard,\n            snapshotTaker.snapshots(),\n            returnValue,\n          );\n        } catch (exception) {\n          if (exception.isGobstonesException === undefined) {\n            throw exception;\n          }\n\n          return new ExecutionError(\n                   exception,\n                   snapshotTaker.snapshots(),\n                   state.runner.regionStack()\n                 );\n        }\n      });\n    };\n    return program;\n  }\n\n  _resultForInteractiveProgram(state) {\n    let program = {};\n    program.alias = 'interactiveProgram';\n    program.interpret = function (board) {\n      return i18nWithLanguage(state.language, () => {\n        try {\n          state.runner.compile();\n          state.runner.initializeVirtualMachine(apiboardToState(board));\n          return new InteractiveExecutionResult(state);\n        } catch (exception) {\n          if (exception.isGobstonesException === undefined) {\n            throw exception;\n          }\n          return new ExecutionError(\n                   exception,\n                   [],\n                   state.runner.regionStack()\n                 );\n        }\n      });\n    };\n    return program;\n  }\n\n  _collectDeclarations(runner) {\n    let declarations = [];\n    for (let name of runner.symbolTable.allProcedureNames()) {\n      if (runner.primitives.isProcedure(name)) {\n        continue; /* Skip primitive procedures */\n      }\n      declarations.push({\n        alias: 'procedureDeclaration',\n        name: name\n      });\n    }\n    for (let name of runner.symbolTable.allFunctionNames()) {\n      if (runner.primitives.isFunction(name)) {\n        continue; /* Skip primitive functions */\n      }\n      declarations.push({\n        alias: 'functionDeclaration',\n        name: name\n      });\n    }\n    return declarations;\n  }\n\n}\n\nexport class GobstonesInterpreterAPI {\n\n  constructor() {\n    /* Internal state of the interpreter */\n    let state = {\n      infiniteLoopTimeout: DEFAULT_INFINITE_LOOP_TIMEOUT,\n      language: DEFAULT_LANGUAGE,\n      runner: new Runner(),\n    };\n\n    this.config = {\n      setLanguage: function (code) {\n        state.language = code;\n      },\n      setInfiniteLoopTimeout: function (milliseconds) {\n        state.infiniteLoopTimeout = milliseconds;\n      },\n      setXGobstonesEnabled: function (isEnabled) {\n        /* TODO */\n      },\n    };\n\n    this.gbb = {\n      /* Convert a string representing a board in GBB format\n       * to a board in the \"API\" format. */\n      read: function (gbb) {\n        return apiboardFromJboard(gbbToJboard(gbb));\n      },\n      /* Convert a board in the \"API\" format to a string representing\n       * a board in GBB format. */\n      write: function (apiboard) {\n        return gbbFromJboard(apiboardToJboard(apiboard));\n      },\n    };\n\n    this.getAst = function (sourceCode) {\n      return this._withState(sourceCode, false, (state) =>\n        state.runner.abstractSyntaxTree.toMulangLike()\n      );\n    };\n\n    this.parse = function (sourceCode) {\n      return this._withState(sourceCode, true, (state) =>\n        new ParseResult(state)\n      );\n    };\n\n    this._withState = function (sourceCode, useLinter, action) {\n      return i18nWithLanguage(state.language, () => {\n        try {\n          state.runner.initialize();\n          state.runner.parse(sourceCode);\n          /* Disable checking whether there is a main 'program' present. */\n          state.runner.enableLintCheck(\n            'source-should-have-a-program-definition', false\n          );\n          if (useLinter) state.runner.lint();\n          return action(state);\n        } catch (exception) {\n          if (exception.isGobstonesException === undefined) {\n            throw exception;\n          }\n          return new ParseError(exception);\n        }\n      });\n    };\n\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\nimport { LOCALE_ES } from './es';\n\nexport const LOCALE_EN = {};\n\nfor (let key in LOCALE_ES) {\n  LOCALE_EN[key] = LOCALE_ES[key];\n}\n\nLOCALE_EN['TYPE:Color'] = 'Color';\nLOCALE_EN['CONS:Color0'] = 'Blue';\nLOCALE_EN['CONS:Color1'] = 'Black';\nLOCALE_EN['CONS:Color2'] = 'Red';\nLOCALE_EN['CONS:Color3'] = 'Green';\n\nLOCALE_EN['TYPE:Dir'] = 'Dir';\nLOCALE_EN['CONS:Dir0'] = 'North';\nLOCALE_EN['CONS:Dir1'] = 'East';\nLOCALE_EN['CONS:Dir2'] = 'South';\nLOCALE_EN['CONS:Dir3'] = 'West';\n\nLOCALE_EN['PRIM:PutStone'] = 'Drop';\nLOCALE_EN['PRIM:RemoveStone'] = 'Grab';\nLOCALE_EN['PRIM:Move'] = 'Move';\nLOCALE_EN['PRIM:GoToEdge'] = 'GoToEdge';\nLOCALE_EN['PRIM:EmptyBoardContents'] = 'EmptyBoardContents';\nLOCALE_EN['PRIM:numStones'] = 'numStones';\nLOCALE_EN['PRIM:anyStones'] = 'anyStones';\nLOCALE_EN['PRIM:canMove'] = 'canMove';\nLOCALE_EN['PRIM:next'] = 'next';\nLOCALE_EN['PRIM:prev'] = 'prev';\nLOCALE_EN['PRIM:opposite'] = 'opposite';\nLOCALE_EN['PRIM:minBool'] = 'minBool';\nLOCALE_EN['PRIM:maxBool'] = 'maxBool';\nLOCALE_EN['PRIM:minColor'] = 'minColor';\nLOCALE_EN['PRIM:maxColor'] = 'maxColor';\nLOCALE_EN['PRIM:minDir'] = 'minDir';\nLOCALE_EN['PRIM:maxDir'] = 'maxDir';\n\nLOCALE_EN['PRIM:head'] = 'head';\nLOCALE_EN['PRIM:tail'] = 'tail';\nLOCALE_EN['PRIM:oldTail'] = 'tail';\nLOCALE_EN['PRIM:init'] = 'init';\nLOCALE_EN['PRIM:last'] = 'last';\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n/en.js","\nimport { LOCALE_ES } from './es';\n\nfunction keyword(palabra) {\n  return '‘a palavra chave \"' + palabra + '\"';\n}\n\nfunction pluralize(n, singular, plural) {\n  if (n === 0) {\n    return 'nenhum ' + singular;\n  } else if (n === 1) {\n    return 'um ' + singular;\n  } else {\n    return n.toString() + ' ' + plural;\n  }\n}\n\nexport const LOCALE_PT = {};\n\nfor (let key in LOCALE_ES) {\n  LOCALE_PT[key] = LOCALE_ES[key];\n}\n\n/* Descriptions of syntactic constructions and tokens */\nLOCALE_PT['definition'] =\n  'uma definição (de programa, função, procedimento, ou tipo)';\nLOCALE_PT['pattern'] =\n  'um padrão (comodín \"_\", construtor aplicado a variáveis, ou tupla)';\nLOCALE_PT['statement'] = 'um comando';\nLOCALE_PT['expression'] = 'uma expressão';\nLOCALE_PT['procedure call'] = 'uma invocação a um procedimento';\nLOCALE_PT['field name'] = 'o nome de um campo';\nLOCALE_PT['T_EOF'] = 'o fim do arquivo';\nLOCALE_PT['T_NUM'] = 'um número';\nLOCALE_PT['T_STRING'] = 'uma corrente (string)';\nLOCALE_PT['T_UPPERID'] = 'um identificador com maiúsculas';\nLOCALE_PT['T_LOWERID'] = 'um identificador com minúsculas';\nLOCALE_PT['T_PROGRAM'] = keyword('program');\nLOCALE_PT['T_INTERACTIVE'] = keyword('interactive');\nLOCALE_PT['T_PROCEDURE'] = keyword('procedure');\nLOCALE_PT['T_FUNCTION'] = keyword('function');\nLOCALE_PT['T_RETURN'] = keyword('return');\nLOCALE_PT['T_IF'] = keyword('if');\nLOCALE_PT['T_THEN'] = keyword('then');\nLOCALE_PT['T_ELSE'] = keyword('else');\nLOCALE_PT['T_REPEAT'] = keyword('repeat');\nLOCALE_PT['T_FOREACH'] = keyword('foreach');\nLOCALE_PT['T_IN'] = keyword('in');\nLOCALE_PT['T_WHILE'] = keyword('while');\nLOCALE_PT['T_SWITCH'] = keyword('switch');\nLOCALE_PT['T_TO'] = keyword('to');\nLOCALE_PT['T_LET'] = keyword('let');\nLOCALE_PT['T_NOT'] = keyword('not');\nLOCALE_PT['T_DIV'] = keyword('div');\nLOCALE_PT['T_MOD'] = keyword('mod');\nLOCALE_PT['T_TYPE'] = keyword('type');\nLOCALE_PT['T_IS'] = keyword('is');\nLOCALE_PT['T_RECORD'] = keyword('record');\nLOCALE_PT['T_VARIANT'] = keyword('variant');\nLOCALE_PT['T_CASE'] = keyword('case');\nLOCALE_PT['T_FIELD'] = keyword('field');\nLOCALE_PT['T_UNDERSCORE'] = 'um sublinhado (\"_\")';\nLOCALE_PT['T_LPAREN'] = 'um parênteses esquerdo (\"(\")';\nLOCALE_PT['T_RPAREN'] = 'um parênteses direito (\")\")';\nLOCALE_PT['T_LBRACE'] = 'uma chave esquerda (\"{\")';\nLOCALE_PT['T_RBRACE'] = 'uma chave direita (\"}\")';\nLOCALE_PT['T_LBRACK'] = 'um colchete esquerdo (\"[\")';\nLOCALE_PT['T_RBRACK'] = 'um colchete direito (\"]\")';\nLOCALE_PT['T_COMMA'] = 'uma vírgula  (\",\")';\nLOCALE_PT['T_SEMICOLON'] = 'um ponto e vírgula (\";\")';\nLOCALE_PT['T_RANGE'] = 'um separador de intervalo (\"..\")';\nLOCALE_PT['T_GETS'] = 'uma flecha para a esquerda (\"<-\")';\nLOCALE_PT['T_PIPE'] = 'uma barra vertical (\"|\")';\nLOCALE_PT['T_ARROW'] = 'uma flecha (\"->\")';\nLOCALE_PT['T_ASSIGN'] = 'um operador de designação  (\":=\")';\nLOCALE_PT['T_EQ'] = 'uma comparação por igualdade (\"==\")';\nLOCALE_PT['T_NE'] = 'uma comparação por desigualdade (\"/=\")';\nLOCALE_PT['T_LE'] = 'um menor ou igual (\"<=\")';\nLOCALE_PT['T_GE'] = 'um maior ou igual (\">=\")';\nLOCALE_PT['T_LT'] = 'um menor estrito (\"<\")';\nLOCALE_PT['T_GT'] = 'um maior estrito (\">\")';\nLOCALE_PT['T_AND'] = 'o \"e\" lógico (\"&&\")';\nLOCALE_PT['T_OR'] = 'o \"ou\" lógico (\"||\")';\nLOCALE_PT['T_CONCAT'] = 'o operador de concatenação de listas (\"++\")';\nLOCALE_PT['T_PLUS'] = 'o operador de soma (\"+\")';\nLOCALE_PT['T_MINUS'] = 'o operador de diferença (\"-\")';\nLOCALE_PT['T_TIMES'] = 'o operador de produto (\"*\")';\nLOCALE_PT['T_POW'] = 'o operador de potência (\"^\")';\n\n/* Local name categories */\nLOCALE_PT['LocalVariable'] = 'variável';\nLOCALE_PT['LocalIndex'] = 'índice';\nLOCALE_PT['LocalParameter'] = 'parâmetro';\n\n/* Descriptions of value types */\nLOCALE_PT['V_Integer'] = 'um número';\nLOCALE_PT['V_String'] = 'uma cadeia';\nLOCALE_PT['V_Tuple'] = 'uma tupla';\nLOCALE_PT['V_List'] = 'uma lista';\nLOCALE_PT['V_Structure'] = 'uma estrutura';\n\n/* Lexer */\nLOCALE_PT['errmsg:unclosed-multiline-comment'] =\n  'O comentário abre mas nunca fecha.';\n\nLOCALE_PT['errmsg:unclosed-string-constant'] =\n    'As aspas que abrem não possuem as aspas correspondentes que fecham.';\n\nLOCALE_PT['errmsg:numeric-constant-should-not-have-leading-zeroes'] =\n    'As constantes numéricas não podem ser escritas com zeros à '\n   + 'esquerda.';\n\nLOCALE_PT['errmsg:identifier-must-start-with-alphabetic-character'] =\n    'Os identificadores devem começar com um caractere alfabético '\n   + '(a...z,A...Z).';\n\nLOCALE_PT['errmsg:unknown-token'] =\n    function (symbol) {\n      return 'Símbolo desconhecido na entrada: \"' + symbol + '\".';\n    };\n\nLOCALE_PT['warning:empty-pragma'] =\n    'Diretiva pragma vazia.';\n\nLOCALE_PT['warning:unknown-pragma'] =\n    function (pragmaName) {\n      return 'Diretiva pragma desconhecida: \"' + pragmaName + '\".';\n    };\n\n/* Parser */\nLOCALE_PT['errmsg:empty-source'] =\n    'O programa está vazio.';\n\nLOCALE_PT['errmsg:expected-but-found'] =\n    function (expected, found) {\n      return 'Esperava-se ' + expected + '.\\n'\n           + 'Encontrado: ' + found + '.';\n    };\n\nLOCALE_PT['errmsg:pattern-number-cannot-be-negative-zero'] =\n    'O padrão numérico não pode ser \"-0\".';\n\nLOCALE_PT['errmsg:pattern-tuple-cannot-be-singleton'] =\n    'O padrão para uma tupla não pode ter apenas um componente. '\n  + 'As tuplas têm 0, 2, 3, ou mais componentes, mas não 1.';\n\nLOCALE_PT['errmsg:assignment-tuple-cannot-be-singleton'] =\n    'A designação a uma tupla não pode ser '\n  + ' constituída por apenas um componente. '\n  + 'As tuplas têm 0, 2, 3, ou mais componentes, mas não 1.';\n\nLOCALE_PT['errmsg:operators-are-not-associative'] =\n    function (op1, op2) {\n      return 'A expressão usa '\n           + op1 + ' e ' + op2\n           + ', mas estes operadores não podem ser associados. '\n           + 'Talvez faltam parênteses.';\n    };\n\nLOCALE_PT['errmsg:obsolete-tuple-assignment'] =\n    'Esperava-se um comando mas não foi encontrado um parênteses esquerdo. '\n  + 'Nota: a sintaxe de designação de tuplas \"(x1, ..., xN) := y\" '\n  + 'está obsoleta. Usar \"let (x1, ..., xN) := y\".';\n\n/* Linter */\nLOCALE_PT['errmsg:program-already-defined'] =\n    function (pos1, pos2) {\n      return 'Já havia um programa definido em ' + pos1 + '.\\n'\n           + 'Não é possível definir um programa em ' + pos2 + '.';\n    };\n\nLOCALE_PT['errmsg:procedure-already-defined'] =\n    function (name, pos1, pos2) {\n      return 'O procedimiento \"' + name + '\" está definido duas vezes: '\n           + 'em ' + pos1 + ' e em ' + pos2 + '.';\n    };\n\nLOCALE_PT['errmsg:function-already-defined'] =\n    function (name, pos1, pos2) {\n      return 'A função \"' + name + '\" está definida duas vezes: '\n           + 'em ' + pos1 + ' e em ' + pos2 + '.';\n    };\n\nLOCALE_PT['errmsg:type-already-defined'] =\n    function (name, pos1, pos2) {\n      return 'O tipo \"' + name + '\" está definido duas vezes: '\n           + 'em ' + pos1 + ' e em ' + pos2 + '.';\n    };\n\nLOCALE_PT['errmsg:constructor-already-defined'] =\n    function (name, pos1, pos2) {\n      return 'O construtor \"' + name + '\" está definido duas vezes: '\n           + 'em ' + pos1 + ' e em ' + pos2 + '.';\n    };\n\nLOCALE_PT['errmsg:repeated-field-name'] =\n    function (constructorName, fieldName) {\n      return 'O campo \"' + fieldName + '\" não pode estar repetido '\n           + 'para o construtor \"' + constructorName + '\".';\n    };\n\nLOCALE_PT['errmsg:function-and-field-cannot-have-the-same-name'] =\n    function (name, posFunction, posField) {\n      return 'O nome \"' + name + '\" usa-se '\n           + 'para uma função em ' + posFunction + ' e '\n           + 'para um campo em ' + posField + '.';\n    };\n\nLOCALE_PT['errmsg:source-should-have-a-program-definition'] =\n    /* Note: the code may actually be completely empty, but\n     * we avoid this technicality since the message could be\n     * confusing. */\n    'O código deve ter uma definição de \"program { ... }\".';\n\nLOCALE_PT['errmsg:procedure-should-not-have-return'] =\n    function (name) {\n      return 'O procedimento \"' + name + '\" '\n           + 'não deveria ter um comando \"return\".';\n    };\n\nLOCALE_PT['errmsg:function-should-have-return'] =\n    function (name) {\n      return 'A função \"' + name + '\" deveria ter um comando \"return\".';\n    };\n\nLOCALE_PT['errmsg:return-statement-not-allowed-here'] =\n    'O comando \"return\"  pode aparecer apenas como o último comando '\n  + 'de uma função ou como o último comando do programa.';\n\nLOCALE_PT['errmsg:local-name-conflict'] =\n    function (name, oldCat, oldPos, newCat, newPos) {\n      return 'Conflito de nomes: \"' + name + '\" se usa duas vezes: '\n           + 'como ' + oldCat + ' em ' + oldPos + ', e '\n           + 'como ' + newCat + ' em ' + newPos + '.';\n    };\n\nLOCALE_PT['errmsg:repeated-variable-in-tuple-assignment'] =\n    function (name) {\n      return 'La variável \"' + name + '\" está repetida na designação '\n           + 'de tuplas.';\n    };\n\nLOCALE_PT['errmsg:constructor-used-as-procedure'] =\n    function (name, type) {\n      return 'O procedimento \"' + name + '\" não está definido. '\n           + 'O nome \"' + name + '\" é o nome de um construtor '\n           + 'do tipo \"' + type + '\".';\n    };\n\nLOCALE_PT['errmsg:undefined-procedure'] =\n    function (name) {\n      return 'O procedimento \"' + name + '\" não está definido.';\n    };\n\nLOCALE_PT['errmsg:undefined-function'] =\n    function (name) {\n      return 'A função \"' + name + '\" não está definida.';\n    };\n\nLOCALE_PT['errmsg:procedure-arity-mismatch'] =\n    function (name, expected, received) {\n      return 'O procedimento \"' + name + '\" espera receber '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' mas é invocado com '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    };\n\nLOCALE_PT['errmsg:function-arity-mismatch'] =\n    function (name, expected, received) {\n      return 'A função \"' + name + '\" espera receber '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' mas é invocado com '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    };\n\nLOCALE_PT['errmsg:structure-pattern-arity-mismatch'] =\n    function (name, expected, received) {\n      return 'O construtor \"' + name + '\" tem '\n           + LOCALE_ES['<n>-fields'](expected)\n           + ' mas o padrão tem '\n           + LOCALE_ES['<n>-parameters'](received) + '.';\n    };\n\nLOCALE_PT['errmsg:type-used-as-constructor'] =\n    function (name, constructorNames) {\n      let msg;\n      if (constructorNames.length === 0) {\n        msg = '(não tem construtores).';\n      } else if (constructorNames.length === 1) {\n        msg = '(tem um construtor: ' + constructorNames[0] + ').';\n      } else {\n        msg = '(seus construtores são: '\n            + constructorNames.join(', ') + ').';\n      }\n      return 'O construtor \"' + name + '\" não está definido. '\n           + 'O nome \"' + name + '\" é o nome de um tipo '\n           + msg;\n    };\n\nLOCALE_PT['errmsg:procedure-used-as-constructor'] =\n    function (name) {\n      return 'O construtor \"' + name + '\" não está definido. '\n           + 'O nome \"' + name + '\" é o nome de um procedimento.';\n    };\n\nLOCALE_PT['errmsg:undeclared-constructor'] =\n    function (name) {\n      return 'O construtor \"' + name + '\" não está definido.';\n    };\n\nLOCALE_PT['errmsg:wildcard-pattern-should-be-last'] =\n    'O comodín \"_\" tem que ser o último ramo do switch.';\n\nLOCALE_PT['errmsg:numeric-pattern-repeats-number'] =\n    function (number) {\n      return 'Tem dois ramos diferentes para o número \"' + number + '\".';\n    };\n\nLOCALE_PT['errmsg:structure-pattern-repeats-constructor'] =\n    function (name) {\n      return 'Há dois ramos distintos para o construtor \"' + name + '\".';\n    };\n\nLOCALE_PT['errmsg:structure-pattern-repeats-tuple-arity'] =\n    function (arity) {\n      return 'Há dois ramos distintos para as tuplas de ' + arity.toString()\n           + ' componentes.';\n    };\n\nLOCALE_PT['errmsg:structure-pattern-repeats-timeout'] =\n    'Há dois ramos distintos para o TIMEOUT.';\n\nLOCALE_PT['errmsg:pattern-does-not-match-type'] =\n    function (expectedType, patternType) {\n      return 'Os padrões devem ser todos do mesmo tipo. '\n           + 'O padrão deveria ser de tipo \"' + expectedType + '\" '\n           + 'pero es de tipo \"' + patternType + '\".';\n    };\n\nLOCALE_PT['errmsg:patterns-in-interactive-program-must-be-events'] =\n    'Os padrões de um \"interactive program\" devem ser eventos.';\n\nLOCALE_PT['errmsg:patterns-in-switch-must-not-be-events'] =\n    'Os padrões de um \"switch\" não podem ser eventos.';\n\nLOCALE_PT['errmsg:structure-construction-repeated-field'] =\n    function (constructorName, fieldName) {\n      return 'O campo \"' + fieldName + '\" está repetido em '\n           + 'a instanciação do construtor \"' + constructorName + '\".';\n    };\n\nLOCALE_PT['errmsg:structure-construction-invalid-field'] =\n    function (constructorName, fieldName) {\n      return 'O campo \"' + fieldName + '\" não é um campo válido '\n           + 'para o construtor \"' + constructorName + '\".';\n    };\n\nLOCALE_PT['errmsg:structure-construction-missing-field'] =\n    function (constructorName, fieldName) {\n      return 'Falta dar valor ao campo \"' + fieldName + '\" '\n           + 'do construtor \"' + constructorName + '\".';\n    };\n\nLOCALE_PT['errmsg:structure-construction-cannot-be-an-event'] =\n    function (constructorName) {\n      return 'O construtor \"' + constructorName + '\" corresponde a um '\n           + 'evento, e só pode ser administrado implicitamente '\n           + 'em um programa interativo (o usuário não pode construir '\n           + 'instâncias).';\n    };\n\n/* Runtime errors (virtual machine) */\nLOCALE_PT['errmsg:undefined-variable'] =\n    function (variableName) {\n      return 'A variável \"' + variableName + '\" não está definida.';\n    };\n\nLOCALE_PT['errmsg:too-few-arguments'] =\n    function (routineName) {\n      return 'Faltam argumentos para \"' + routineName + '\".';\n    };\n\nLOCALE_PT['errmsg:expected-structure-but-got'] =\n    function (constructorName, valueTag) {\n      return 'Esperava-se uma estrutura construída '\n           + 'com o construtor \"' + constructorName + '\", '\n           + 'mas foi recebido ' + valueTag + '.';\n    };\n\nLOCALE_PT['errmsg:expected-constructor-but-got'] =\n    function (constructorNameExpected, constructorNameReceived) {\n      return 'Esperava-se uma estrutura construída '\n           + 'com o construtor \"'\n           + constructorNameExpected + '\", '\n           + 'mas o construtor recebido é '\n           + constructorNameReceived + '\".';\n    };\n\nLOCALE_PT['errmsg:incompatible-types-on-assignment'] =\n    function (variableName, oldType, newType) {\n      return 'A variável \"' + variableName + '\" '\n           + 'continha un valor do tipo ' + oldType + ', '\n           + 'não é possível designar um valor de tipo ' + newType + '\".';\n    };\n\nLOCALE_PT['errmsg:incompatible-types-on-list-creation'] =\n    function (index, oldType, newType) {\n      return 'Todos os elementos de uma lista devem ser do mesmo tipo. '\n           + 'Os elementos são do tipo ' + oldType + ', '\n           + 'mas o elemento na posição ' + index.toString() + ' '\n           + 'é do tipo ' + newType + '.';\n    };\n\nLOCALE_PT['errmsg:incompatible-types-on-structure-update'] =\n    function (fieldName, oldType, newType) {\n      return 'O campo \"' + fieldName + '\" é do tipo ' + oldType + '. '\n           + 'Não pode ser atualizado com um valor do tipo ' + newType + '.';\n\n    };\n\nLOCALE_PT['errmsg:expected-tuple-value-but-got'] =\n    function (receivedType) {\n      return 'Esperava-se uma tupla mas um valor não foi recebido '\n           + 'de tipo ' + receivedType + '.';\n    };\n\nLOCALE_PT['errmsg:tuple-component-out-of-bounds'] =\n    function (size, index) {\n      return 'Índice fora do intervalo. '\n           + 'A tupla é do tamanho ' + size.toString() + ' e '\n           + 'o índice é ' + index.toString() + '.';\n    };\n\nLOCALE_PT['errmsg:expected-structure-value-but-got'] =\n    function (receivedType) {\n      return 'Se esperaba una estructura pero se recibió un valor '\n           + 'de tipo ' + receivedType + '.';\n    };\n\nLOCALE_PT['errmsg:structure-field-not-present'] =\n    function (fieldNames, missingFieldName) {\n      return 'A estrutura não possui um campo \"' + missingFieldName + '\". '\n           + 'Os campos são: [' + fieldNames.join(', ') + '].';\n    };\n\nLOCALE_PT['errmsg:primitive-does-not-exist'] =\n    function (primitiveName) {\n      return 'A operação primitiva \"' + primitiveName + '\" '\n           + 'não existe ou não está disponível.';\n    };\n\nLOCALE_PT['errmsg:primitive-arity-mismatch'] =\n    function (name, expected, received) {\n      return 'A operação \"' + name + '\" espera receber '\n           + LOCALE_ES['<n>-parameters'](expected)\n           + ' mas é invocada com '\n           + LOCALE_ES['<n>-arguments'](received) + '.';\n    };\n\nLOCALE_PT['errmsg:primitive-argument-type-mismatch'] =\n    function (name, parameterIndex, expectedType, receivedType) {\n      return 'O parâmetro #' + parameterIndex.toString() + ' '\n           + 'da operação \"' + name + '\" '\n           + 'deveria ser do tipo ' + expectedType + ' '\n           + 'mas o argumento é do tipo ' + receivedType + '.';\n    };\n\nLOCALE_PT['errmsg:expected-value-of-type-but-got'] =\n    function (expectedType, receivedType) {\n      return 'Esperava-se um valor do tipo ' + expectedType + ' '\n           + 'mas foi recebido um valor do tipo ' + receivedType + '.';\n    };\n\nLOCALE_PT['errmsg:expected-value-of-some-type-but-got'] =\n    function (expectedTypes, receivedType) {\n      return 'Esperava-se um valor de algum dos seguintes tipos: '\n           + expectedTypes.join(', ')\n           + '; mas foi recebido um valor do tipo ' + receivedType + '.';\n    };\n\nLOCALE_PT['errmsg:expected-values-to-have-compatible-types'] =\n    function (type1, type2) {\n      return 'Os tipos dos valores devem ser compatíveis, '\n           + 'mas um é do tipo ' + type1 + ' '\n           + 'e o outro é do tipo ' + type2 + '.';\n    };\n\nLOCALE_PT['errmsg:switch-does-not-match'] =\n    'O valor analisado não coincide com nenhum dos ramos do switch.';\n\nLOCALE_PT['errmsg:cannot-divide-by-zero'] =\n    'Não é possível dividir por zero.';\n\nLOCALE_PT['errmsg:list-cannot-be-empty'] =\n    'A lista não pode ser vazia.';\n\nLOCALE_PT['errmsg:timeout'] =\n    function (millisecs) {\n      return 'A execução do programa demorou mais de '\n           + millisecs.toString() + 'ms.';\n    };\n\n/* Board operations */\nLOCALE_PT['errmsg:cannot-move-to'] =\n    function (dirName) {\n      return 'Não é possível mover para a direção ' + dirName +\n             ': cai fora do tabuleiro.';\n    };\n\nLOCALE_PT['errmsg:cannot-remove-stone'] =\n    function (dirName) {\n      return 'Não é posível retirar uma pedra de cor ' + dirName +\n             ': não há pedras dessa cor.';\n    };\n\n/* Runtime */\n\nLOCALE_PT['TYPE:Color'] = 'Cor';\nLOCALE_PT['CONS:Color0'] = 'Azul';\nLOCALE_PT['CONS:Color1'] = 'Preto';\nLOCALE_PT['CONS:Color2'] = 'Vermelho';\nLOCALE_PT['CONS:Color3'] = 'Verde';\n\nLOCALE_PT['TYPE:Dir'] = 'Dir';\nLOCALE_PT['CONS:Dir0'] = 'Norte';\nLOCALE_PT['CONS:Dir1'] = 'Leste';\nLOCALE_PT['CONS:Dir2'] = 'Sul';\nLOCALE_PT['CONS:Dir3'] = 'Oeste';\n\nLOCALE_PT['PRIM:PutStone'] = 'Colocar';\nLOCALE_PT['PRIM:RemoveStone'] = 'Retirar';\nLOCALE_PT['PRIM:Move'] = 'Mover';\nLOCALE_PT['PRIM:GoToEdge'] = 'IrABorda';\nLOCALE_PT['PRIM:EmptyBoardContents'] = 'EsvaziarTabuleiro';\nLOCALE_PT['PRIM:numStones'] = 'nroPedras';\nLOCALE_PT['PRIM:anyStones'] = 'haPedras';\nLOCALE_PT['PRIM:canMove'] = 'podeMover';\nLOCALE_PT['PRIM:next'] = 'seguinte';\nLOCALE_PT['PRIM:prev'] = 'previo';\nLOCALE_PT['PRIM:opposite'] = 'oposto';\nLOCALE_PT['PRIM:minBool'] = 'minBool';\nLOCALE_PT['PRIM:maxBool'] = 'maxBool';\nLOCALE_PT['PRIM:minColor'] = 'minCor';\nLOCALE_PT['PRIM:maxColor'] = 'maxCor';\nLOCALE_PT['PRIM:minDir'] = 'minDir';\nLOCALE_PT['PRIM:maxDir'] = 'maxDir';\n\nLOCALE_PT['PRIM:head'] = 'primeiro';\nLOCALE_PT['PRIM:tail'] = 'resto';\nLOCALE_PT['PRIM:oldTail'] = 'resto';\nLOCALE_PT['PRIM:init'] = 'comeco';\nLOCALE_PT['PRIM:last'] = 'ultimo';\n\n/* Helpers */\nLOCALE_PT['<alternative>'] =\n    function (strings) {\n      return 'alguma das seguintes alternativas:\\n'\n           + strings.map(s => '  ' + s).join('\\n');\n    };\nLOCALE_PT['<position>'] =\n    function (filename, line, column) {\n      return filename + ':' + line.toString() + ':' + column.toString();\n    };\nLOCALE_PT['<n>-parameters'] =\n    function (n) {\n      return pluralize(n, 'parâmetro', 'parâmetros');\n    };\nLOCALE_PT['<n>-arguments'] =\n    function (n) {\n      return pluralize(n, 'argumento', 'argumentos');\n    };\nLOCALE_PT['<n>-fields'] =\n    function (n) {\n      return pluralize(n, 'campo', 'campos');\n    };\nLOCALE_PT['<pattern-type>'] =\n    function (patternType) {\n      if (patternType === 'Event') {\n        return 'evento do programa interativo';\n      } else if (patternType.substring(0, 7) === '_TUPLE_') {\n        return 'tupla de ' + patternType.substring(7) + ' componentes';\n      } else {\n        return patternType;\n      }\n    };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/i18n/pt.js","/* eslint-disable */\r\n\r\n/* This file is taken and slightly adapted from\r\n * http://peterolson.github.io/BigInteger.js/BigInteger.js */\r\n\r\nvar BASE = 1e7,\r\n    LOG_BASE = 7,\r\n    MAX_INT = 9007199254740992,\r\n    MAX_INT_ARR = smallToArray(MAX_INT),\r\n    LOG_MAX_INT = Math.log(MAX_INT);\r\n\r\nexport function Integer(v, radix) {\r\n    if (typeof v === \"undefined\") return Integer[0];\r\n    if (typeof radix !== \"undefined\") return +radix === 10 ? parseValue(v) : parseBase(v, radix);\r\n    return parseValue(v);\r\n}\r\n\r\nfunction BigInteger(value, sign) {\r\n    this.value = value;\r\n    this.sign = sign;\r\n    this.isSmall = false;\r\n}\r\nBigInteger.prototype = Object.create(Integer.prototype);\r\n\r\nfunction SmallInteger(value) {\r\n    this.value = value;\r\n    this.sign = value < 0;\r\n    this.isSmall = true;\r\n}\r\nSmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\nfunction isPrecise(n) {\r\n    return -MAX_INT < n && n < MAX_INT;\r\n}\r\n\r\nfunction smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n    if (n < 1e7)\r\n        return [n];\r\n    if (n < 1e14)\r\n        return [n % 1e7, Math.floor(n / 1e7)];\r\n    return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n}\r\n\r\nfunction arrayToSmall(arr) { // If BASE changes this function may need to change\r\n    trim(arr);\r\n    var length = arr.length;\r\n    if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n        switch (length) {\r\n            case 0: return 0;\r\n            case 1: return arr[0];\r\n            case 2: return arr[0] + arr[1] * BASE;\r\n            default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n\r\nfunction trim(v) {\r\n    var i = v.length;\r\n    while (v[--i] === 0);\r\n    v.length = i + 1;\r\n}\r\n\r\nfunction createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n    var x = new Array(length);\r\n    var i = -1;\r\n    while (++i < length) {\r\n        x[i] = 0;\r\n    }\r\n    return x;\r\n}\r\n\r\nfunction truncate(n) {\r\n    if (n > 0) return Math.floor(n);\r\n    return Math.ceil(n);\r\n}\r\n\r\nfunction add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n    var l_a = a.length,\r\n        l_b = b.length,\r\n        r = new Array(l_a),\r\n        carry = 0,\r\n        base = BASE,\r\n        sum, i;\r\n    for (i = 0; i < l_b; i++) {\r\n        sum = a[i] + b[i] + carry;\r\n        carry = sum >= base ? 1 : 0;\r\n        r[i] = sum - carry * base;\r\n    }\r\n    while (i < l_a) {\r\n        sum = a[i] + carry;\r\n        carry = sum === base ? 1 : 0;\r\n        r[i++] = sum - carry * base;\r\n    }\r\n    if (carry > 0) r.push(carry);\r\n    return r;\r\n}\r\n\r\nfunction addAny(a, b) {\r\n    if (a.length >= b.length) return add(a, b);\r\n    return add(b, a);\r\n}\r\n\r\nfunction addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n    var l = a.length,\r\n        r = new Array(l),\r\n        base = BASE,\r\n        sum, i;\r\n    for (i = 0; i < l; i++) {\r\n        sum = a[i] - base + carry;\r\n        carry = Math.floor(sum / base);\r\n        r[i] = sum - carry * base;\r\n        carry += 1;\r\n    }\r\n    while (carry > 0) {\r\n        r[i++] = carry % base;\r\n        carry = Math.floor(carry / base);\r\n    }\r\n    return r;\r\n}\r\n\r\nBigInteger.prototype.add = function (v) {\r\n    var n = parseValue(v);\r\n    if (this.sign !== n.sign) {\r\n        return this.subtract(n.negate());\r\n    }\r\n    var a = this.value, b = n.value;\r\n    if (n.isSmall) {\r\n        return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n    }\r\n    return new BigInteger(addAny(a, b), this.sign);\r\n};\r\nBigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\nSmallInteger.prototype.add = function (v) {\r\n    var n = parseValue(v);\r\n    var a = this.value;\r\n    if (a < 0 !== n.sign) {\r\n        return this.subtract(n.negate());\r\n    }\r\n    var b = n.value;\r\n    if (n.isSmall) {\r\n        if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n        b = smallToArray(Math.abs(b));\r\n    }\r\n    return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n};\r\nSmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\nfunction subtract(a, b) { // assumes a and b are arrays with a >= b\r\n    var a_l = a.length,\r\n        b_l = b.length,\r\n        r = new Array(a_l),\r\n        borrow = 0,\r\n        base = BASE,\r\n        i, difference;\r\n    for (i = 0; i < b_l; i++) {\r\n        difference = a[i] - borrow - b[i];\r\n        if (difference < 0) {\r\n            difference += base;\r\n            borrow = 1;\r\n        } else borrow = 0;\r\n        r[i] = difference;\r\n    }\r\n    for (i = b_l; i < a_l; i++) {\r\n        difference = a[i] - borrow;\r\n        if (difference < 0) difference += base;\r\n        else {\r\n            r[i++] = difference;\r\n            break;\r\n        }\r\n        r[i] = difference;\r\n    }\r\n    for (; i < a_l; i++) {\r\n        r[i] = a[i];\r\n    }\r\n    trim(r);\r\n    return r;\r\n}\r\n\r\nfunction subtractAny(a, b, sign) {\r\n    var value;\r\n    if (compareAbs(a, b) >= 0) {\r\n        value = subtract(a,b);\r\n    } else {\r\n        value = subtract(b, a);\r\n        sign = !sign;\r\n    }\r\n    value = arrayToSmall(value);\r\n    if (typeof value === \"number\") {\r\n        if (sign) value = -value;\r\n        return new SmallInteger(value);\r\n    }\r\n    return new BigInteger(value, sign);\r\n}\r\n\r\nfunction subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n    var l = a.length,\r\n        r = new Array(l),\r\n        carry = -b,\r\n        base = BASE,\r\n        i, difference;\r\n    for (i = 0; i < l; i++) {\r\n        difference = a[i] + carry;\r\n        carry = Math.floor(difference / base);\r\n        difference %= base;\r\n        r[i] = difference < 0 ? difference + base : difference;\r\n    }\r\n    r = arrayToSmall(r);\r\n    if (typeof r === \"number\") {\r\n        if (sign) r = -r;\r\n        return new SmallInteger(r);\r\n    } return new BigInteger(r, sign);\r\n}\r\n\r\nBigInteger.prototype.subtract = function (v) {\r\n    var n = parseValue(v);\r\n    if (this.sign !== n.sign) {\r\n        return this.add(n.negate());\r\n    }\r\n    var a = this.value, b = n.value;\r\n    if (n.isSmall)\r\n        return subtractSmall(a, Math.abs(b), this.sign);\r\n    return subtractAny(a, b, this.sign);\r\n};\r\nBigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\nSmallInteger.prototype.subtract = function (v) {\r\n    var n = parseValue(v);\r\n    var a = this.value;\r\n    if (a < 0 !== n.sign) {\r\n        return this.add(n.negate());\r\n    }\r\n    var b = n.value;\r\n    if (n.isSmall) {\r\n        return new SmallInteger(a - b);\r\n    }\r\n    return subtractSmall(b, Math.abs(a), a >= 0);\r\n};\r\nSmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\nBigInteger.prototype.negate = function () {\r\n    return new BigInteger(this.value, !this.sign);\r\n};\r\nSmallInteger.prototype.negate = function () {\r\n    var sign = this.sign;\r\n    var small = new SmallInteger(-this.value);\r\n    small.sign = !sign;\r\n    return small;\r\n};\r\n\r\nBigInteger.prototype.abs = function () {\r\n    return new BigInteger(this.value, false);\r\n};\r\nSmallInteger.prototype.abs = function () {\r\n    return new SmallInteger(Math.abs(this.value));\r\n};\r\n\r\nfunction multiplyLong(a, b) {\r\n    var a_l = a.length,\r\n        b_l = b.length,\r\n        l = a_l + b_l,\r\n        r = createArray(l),\r\n        base = BASE,\r\n        product, carry, i, a_i, b_j;\r\n    for (i = 0; i < a_l; ++i) {\r\n        a_i = a[i];\r\n        for (var j = 0; j < b_l; ++j) {\r\n            b_j = b[j];\r\n            product = a_i * b_j + r[i + j];\r\n            carry = Math.floor(product / base);\r\n            r[i + j] = product - carry * base;\r\n            r[i + j + 1] += carry;\r\n        }\r\n    }\r\n    trim(r);\r\n    return r;\r\n}\r\n\r\nfunction multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n    var l = a.length,\r\n        r = new Array(l),\r\n        base = BASE,\r\n        carry = 0,\r\n        product, i;\r\n    for (i = 0; i < l; i++) {\r\n        product = a[i] * b + carry;\r\n        carry = Math.floor(product / base);\r\n        r[i] = product - carry * base;\r\n    }\r\n    while (carry > 0) {\r\n        r[i++] = carry % base;\r\n        carry = Math.floor(carry / base);\r\n    }\r\n    return r;\r\n}\r\n\r\nfunction shiftLeft(x, n) {\r\n    var r = [];\r\n    while (n-- > 0) r.push(0);\r\n    return r.concat(x);\r\n}\r\n\r\nfunction multiplyKaratsuba(x, y) {\r\n    var n = Math.max(x.length, y.length);\r\n\r\n    if (n <= 30) return multiplyLong(x, y);\r\n    n = Math.ceil(n / 2);\r\n\r\n    var b = x.slice(n),\r\n        a = x.slice(0, n),\r\n        d = y.slice(n),\r\n        c = y.slice(0, n);\r\n\r\n    var ac = multiplyKaratsuba(a, c),\r\n        bd = multiplyKaratsuba(b, d),\r\n        abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n    var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n    trim(product);\r\n    return product;\r\n}\r\n\r\n// The following function is derived from a surface fit of a graph plotting the performance difference\r\n// between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\nfunction useKaratsuba(l1, l2) {\r\n    return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n}\r\n\r\nBigInteger.prototype.multiply = function (v) {\r\n    var n = parseValue(v),\r\n        a = this.value, b = n.value,\r\n        sign = this.sign !== n.sign,\r\n        abs;\r\n    if (n.isSmall) {\r\n        if (b === 0) return Integer[0];\r\n        if (b === 1) return this;\r\n        if (b === -1) return this.negate();\r\n        abs = Math.abs(b);\r\n        if (abs < BASE) {\r\n            return new BigInteger(multiplySmall(a, abs), sign);\r\n        }\r\n        b = smallToArray(abs);\r\n    }\r\n    if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n        return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n    return new BigInteger(multiplyLong(a, b), sign);\r\n};\r\n\r\nBigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\nfunction multiplySmallAndArray(a, b, sign) { // a >= 0\r\n    if (a < BASE) {\r\n        return new BigInteger(multiplySmall(b, a), sign);\r\n    }\r\n    return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n}\r\nSmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n};\r\nBigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n};\r\nSmallInteger.prototype.multiply = function (v) {\r\n    return parseValue(v)._multiplyBySmall(this);\r\n};\r\nSmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\nfunction square(a) {\r\n    var l = a.length,\r\n        r = createArray(l + l),\r\n        base = BASE,\r\n        product, carry, i, a_i, a_j;\r\n    for (i = 0; i < l; i++) {\r\n        a_i = a[i];\r\n        for (var j = 0; j < l; j++) {\r\n            a_j = a[j];\r\n            product = a_i * a_j + r[i + j];\r\n            carry = Math.floor(product / base);\r\n            r[i + j] = product - carry * base;\r\n            r[i + j + 1] += carry;\r\n        }\r\n    }\r\n    trim(r);\r\n    return r;\r\n}\r\n\r\nBigInteger.prototype.square = function () {\r\n    return new BigInteger(square(this.value), false);\r\n};\r\n\r\nSmallInteger.prototype.square = function () {\r\n    var value = this.value * this.value;\r\n    if (isPrecise(value)) return new SmallInteger(value);\r\n    return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n};\r\n\r\nfunction divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n    var a_l = a.length,\r\n        b_l = b.length,\r\n        base = BASE,\r\n        result = createArray(b.length),\r\n        divisorMostSignificantDigit = b[b_l - 1],\r\n        // normalization\r\n        lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n        remainder = multiplySmall(a, lambda),\r\n        divisor = multiplySmall(b, lambda),\r\n        quotientDigit, shift, carry, borrow, i, l, q;\r\n    if (remainder.length <= a_l) remainder.push(0);\r\n    divisor.push(0);\r\n    divisorMostSignificantDigit = divisor[b_l - 1];\r\n    for (shift = a_l - b_l; shift >= 0; shift--) {\r\n        quotientDigit = base - 1;\r\n        if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n          quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n        }\r\n        // quotientDigit <= base - 1\r\n        carry = 0;\r\n        borrow = 0;\r\n        l = divisor.length;\r\n        for (i = 0; i < l; i++) {\r\n            carry += quotientDigit * divisor[i];\r\n            q = Math.floor(carry / base);\r\n            borrow += remainder[shift + i] - (carry - q * base);\r\n            carry = q;\r\n            if (borrow < 0) {\r\n                remainder[shift + i] = borrow + base;\r\n                borrow = -1;\r\n            } else {\r\n                remainder[shift + i] = borrow;\r\n                borrow = 0;\r\n            }\r\n        }\r\n        while (borrow !== 0) {\r\n            quotientDigit -= 1;\r\n            carry = 0;\r\n            for (i = 0; i < l; i++) {\r\n                carry += remainder[shift + i] - base + divisor[i];\r\n                if (carry < 0) {\r\n                    remainder[shift + i] = carry + base;\r\n                    carry = 0;\r\n                } else {\r\n                    remainder[shift + i] = carry;\r\n                    carry = 1;\r\n                }\r\n            }\r\n            borrow += carry;\r\n        }\r\n        result[shift] = quotientDigit;\r\n    }\r\n    // denormalization\r\n    remainder = divModSmall(remainder, lambda)[0];\r\n    return [arrayToSmall(result), arrayToSmall(remainder)];\r\n}\r\n\r\nfunction divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n    // Performs faster than divMod1 on larger input sizes.\r\n    var a_l = a.length,\r\n        b_l = b.length,\r\n        result = [],\r\n        part = [],\r\n        base = BASE,\r\n        guess, xlen, highx, highy, check;\r\n    while (a_l) {\r\n        part.unshift(a[--a_l]);\r\n        trim(part);\r\n        if (compareAbs(part, b) < 0) {\r\n            result.push(0);\r\n            continue;\r\n        }\r\n        xlen = part.length;\r\n        highx = part[xlen - 1] * base + part[xlen - 2];\r\n        highy = b[b_l - 1] * base + b[b_l - 2];\r\n        if (xlen > b_l) {\r\n            highx = (highx + 1) * base;\r\n        }\r\n        guess = Math.ceil(highx / highy);\r\n        do {\r\n            check = multiplySmall(b, guess);\r\n            if (compareAbs(check, part) <= 0) break;\r\n            guess--;\r\n        } while (guess);\r\n        result.push(guess);\r\n        part = subtract(part, check);\r\n    }\r\n    result.reverse();\r\n    return [arrayToSmall(result), arrayToSmall(part)];\r\n}\r\n\r\nfunction divModSmall(value, lambda) {\r\n    var length = value.length,\r\n        quotient = createArray(length),\r\n        base = BASE,\r\n        i, q, remainder, divisor;\r\n    remainder = 0;\r\n    for (i = length - 1; i >= 0; --i) {\r\n        divisor = remainder * base + value[i];\r\n        q = truncate(divisor / lambda);\r\n        remainder = divisor - q * lambda;\r\n        quotient[i] = q | 0;\r\n    }\r\n    return [quotient, remainder | 0];\r\n}\r\n\r\nfunction divModAny(self, v) {\r\n    var value, n = parseValue(v);\r\n    var a = self.value, b = n.value;\r\n    var quotient;\r\n    if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n    if (self.isSmall) {\r\n        if (n.isSmall) {\r\n            return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n        }\r\n        return [Integer[0], self];\r\n    }\r\n    if (n.isSmall) {\r\n        if (b === 1) return [self, Integer[0]];\r\n        if (b == -1) return [self.negate(), Integer[0]];\r\n        var abs = Math.abs(b);\r\n        if (abs < BASE) {\r\n            value = divModSmall(a, abs);\r\n            quotient = arrayToSmall(value[0]);\r\n            var remainder = value[1];\r\n            if (self.sign) remainder = -remainder;\r\n            if (typeof quotient === \"number\") {\r\n                if (self.sign !== n.sign) quotient = -quotient;\r\n                return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n            }\r\n            return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n        }\r\n        b = smallToArray(abs);\r\n    }\r\n    var comparison = compareAbs(a, b);\r\n    if (comparison === -1) return [Integer[0], self];\r\n    if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n    // divMod1 is faster on smaller input sizes\r\n    if (a.length + b.length <= 200)\r\n        value = divMod1(a, b);\r\n    else value = divMod2(a, b);\r\n\r\n    quotient = value[0];\r\n    var qSign = self.sign !== n.sign,\r\n        mod = value[1],\r\n        mSign = self.sign;\r\n    if (typeof quotient === \"number\") {\r\n        if (qSign) quotient = -quotient;\r\n        quotient = new SmallInteger(quotient);\r\n    } else quotient = new BigInteger(quotient, qSign);\r\n    if (typeof mod === \"number\") {\r\n        if (mSign) mod = -mod;\r\n        mod = new SmallInteger(mod);\r\n    } else mod = new BigInteger(mod, mSign);\r\n    return [quotient, mod];\r\n}\r\n\r\nBigInteger.prototype.divmod = function (v) {\r\n    var result = divModAny(this, v);\r\n    return {\r\n        quotient: result[0],\r\n        remainder: result[1]\r\n    };\r\n};\r\nSmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\nBigInteger.prototype.divide = function (v) {\r\n    return divModAny(this, v)[0];\r\n};\r\nSmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\nBigInteger.prototype.mod = function (v) {\r\n    return divModAny(this, v)[1];\r\n};\r\nSmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\nBigInteger.prototype.pow = function (v) {\r\n    var n = parseValue(v),\r\n        a = this.value,\r\n        b = n.value,\r\n        value, x, y;\r\n    if (b === 0) return Integer[1];\r\n    if (a === 0) return Integer[0];\r\n    if (a === 1) return Integer[1];\r\n    if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n    if (n.sign) {\r\n        return Integer[0];\r\n    }\r\n    if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n    if (this.isSmall) {\r\n        if (isPrecise(value = Math.pow(a, b)))\r\n            return new SmallInteger(truncate(value));\r\n    }\r\n    x = this;\r\n    y = Integer[1];\r\n    while (true) {\r\n        if (b & 1 === 1) {\r\n            y = y.times(x);\r\n            --b;\r\n        }\r\n        if (b === 0) break;\r\n        b /= 2;\r\n        x = x.square();\r\n    }\r\n    return y;\r\n};\r\nSmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\nBigInteger.prototype.modPow = function (exp, mod) {\r\n    exp = parseValue(exp);\r\n    mod = parseValue(mod);\r\n    if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n    var r = Integer[1],\r\n        base = this.mod(mod);\r\n    while (exp.isPositive()) {\r\n        if (base.isZero()) return Integer[0];\r\n        if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n        exp = exp.divide(2);\r\n        base = base.square().mod(mod);\r\n    }\r\n    return r;\r\n};\r\nSmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\nfunction compareAbs(a, b) {\r\n    if (a.length !== b.length) {\r\n        return a.length > b.length ? 1 : -1;\r\n    }\r\n    for (var i = a.length - 1; i >= 0; i--) {\r\n        if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nBigInteger.prototype.compareAbs = function (v) {\r\n    var n = parseValue(v),\r\n        a = this.value,\r\n        b = n.value;\r\n    if (n.isSmall) return 1;\r\n    return compareAbs(a, b);\r\n};\r\nSmallInteger.prototype.compareAbs = function (v) {\r\n    var n = parseValue(v),\r\n        a = Math.abs(this.value),\r\n        b = n.value;\r\n    if (n.isSmall) {\r\n        b = Math.abs(b);\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    return -1;\r\n};\r\n\r\nBigInteger.prototype.compare = function (v) {\r\n    // See discussion about comparison with Infinity:\r\n    // https://github.com/peterolson/BigInteger.js/issues/61\r\n    if (v === Infinity) {\r\n        return -1;\r\n    }\r\n    if (v === -Infinity) {\r\n        return 1;\r\n    }\r\n\r\n    var n = parseValue(v),\r\n        a = this.value,\r\n        b = n.value;\r\n    if (this.sign !== n.sign) {\r\n        return n.sign ? 1 : -1;\r\n    }\r\n    if (n.isSmall) {\r\n        return this.sign ? -1 : 1;\r\n    }\r\n    return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n};\r\nBigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\nSmallInteger.prototype.compare = function (v) {\r\n    if (v === Infinity) {\r\n        return -1;\r\n    }\r\n    if (v === -Infinity) {\r\n        return 1;\r\n    }\r\n\r\n    var n = parseValue(v),\r\n        a = this.value,\r\n        b = n.value;\r\n    if (n.isSmall) {\r\n        return a == b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    if (a < 0 !== n.sign) {\r\n        return a < 0 ? -1 : 1;\r\n    }\r\n    return a < 0 ? 1 : -1;\r\n};\r\nSmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\nBigInteger.prototype.equals = function (v) {\r\n    return this.compare(v) === 0;\r\n};\r\nSmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\nBigInteger.prototype.notEquals = function (v) {\r\n    return this.compare(v) !== 0;\r\n};\r\nSmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\nBigInteger.prototype.greater = function (v) {\r\n    return this.compare(v) > 0;\r\n};\r\nSmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\nBigInteger.prototype.lesser = function (v) {\r\n    return this.compare(v) < 0;\r\n};\r\nSmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\nBigInteger.prototype.greaterOrEquals = function (v) {\r\n    return this.compare(v) >= 0;\r\n};\r\nSmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\nBigInteger.prototype.lesserOrEquals = function (v) {\r\n    return this.compare(v) <= 0;\r\n};\r\nSmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\nBigInteger.prototype.isEven = function () {\r\n    return (this.value[0] & 1) === 0;\r\n};\r\nSmallInteger.prototype.isEven = function () {\r\n    return (this.value & 1) === 0;\r\n};\r\n\r\nBigInteger.prototype.isOdd = function () {\r\n    return (this.value[0] & 1) === 1;\r\n};\r\nSmallInteger.prototype.isOdd = function () {\r\n    return (this.value & 1) === 1;\r\n};\r\n\r\nBigInteger.prototype.isPositive = function () {\r\n    return !this.sign;\r\n};\r\nSmallInteger.prototype.isPositive = function () {\r\n    return this.value > 0;\r\n};\r\n\r\nBigInteger.prototype.isNegative = function () {\r\n    return this.sign;\r\n};\r\nSmallInteger.prototype.isNegative = function () {\r\n    return this.value < 0;\r\n};\r\n\r\nBigInteger.prototype.isUnit = function () {\r\n    return false;\r\n};\r\nSmallInteger.prototype.isUnit = function () {\r\n    return Math.abs(this.value) === 1;\r\n};\r\n\r\nBigInteger.prototype.isZero = function () {\r\n    return false;\r\n};\r\nSmallInteger.prototype.isZero = function () {\r\n    return this.value === 0;\r\n};\r\nBigInteger.prototype.isDivisibleBy = function (v) {\r\n    var n = parseValue(v);\r\n    var value = n.value;\r\n    if (value === 0) return false;\r\n    if (value === 1) return true;\r\n    if (value === 2) return this.isEven();\r\n    return this.mod(n).equals(Integer[0]);\r\n};\r\nSmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\nfunction isBasicPrime(v) {\r\n    var n = v.abs();\r\n    if (n.isUnit()) return false;\r\n    if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n    if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n    if (n.lesser(25)) return true;\r\n    // we don't know if it's prime: let the other functions figure it out\r\n}\r\n\r\nBigInteger.prototype.isPrime = function () {\r\n    var isPrime = isBasicPrime(this);\r\n    if (isPrime !== undefined) return isPrime;\r\n    var n = this.abs(),\r\n        nPrev = n.prev();\r\n    var a = [2, 3, 5, 7, 11, 13, 17, 19],\r\n        b = nPrev,\r\n        d, t, i, x;\r\n    while (b.isEven()) b = b.divide(2);\r\n    for (i = 0; i < a.length; i++) {\r\n        x = bigInt(a[i]).modPow(b, n);\r\n        if (x.equals(Integer[1]) || x.equals(nPrev)) continue;\r\n        for (t = true, d = b; t && d.lesser(nPrev) ; d = d.multiply(2)) {\r\n            x = x.square().mod(n);\r\n            if (x.equals(nPrev)) t = false;\r\n        }\r\n        if (t) return false;\r\n    }\r\n    return true;\r\n};\r\nSmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\nBigInteger.prototype.isProbablePrime = function (iterations) {\r\n    var isPrime = isBasicPrime(this);\r\n    if (isPrime !== undefined) return isPrime;\r\n    var n = this.abs();\r\n    var t = iterations === undefined ? 5 : iterations;\r\n    // use the Fermat primality test\r\n    for (var i = 0; i < t; i++) {\r\n        var a = bigInt.randBetween(2, n.minus(2));\r\n        if (!a.modPow(n.prev(), n).isUnit()) return false; // definitely composite\r\n    }\r\n    return true; // large chance of being prime\r\n};\r\nSmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\nBigInteger.prototype.modInv = function (n) {\r\n    var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n    while (!newR.equals(bigInt.zero)) {\r\n        q = r.divide(newR);\r\n        lastT = t;\r\n        lastR = r;\r\n        t = newT;\r\n        r = newR;\r\n        newT = lastT.subtract(q.multiply(newT));\r\n        newR = lastR.subtract(q.multiply(newR));\r\n    }\r\n    if (!r.equals(1)) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n    if (t.compare(0) === -1) {\r\n        t = t.add(n);\r\n    }\r\n    if (this.isNegative()) {\r\n        return t.negate();\r\n    }\r\n    return t;\r\n};\r\n\r\nSmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\nBigInteger.prototype.next = function () {\r\n    var value = this.value;\r\n    if (this.sign) {\r\n        return subtractSmall(value, 1, this.sign);\r\n    }\r\n    return new BigInteger(addSmall(value, 1), this.sign);\r\n};\r\nSmallInteger.prototype.next = function () {\r\n    var value = this.value;\r\n    if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n    return new BigInteger(MAX_INT_ARR, false);\r\n};\r\n\r\nBigInteger.prototype.prev = function () {\r\n    var value = this.value;\r\n    if (this.sign) {\r\n        return new BigInteger(addSmall(value, 1), true);\r\n    }\r\n    return subtractSmall(value, 1, this.sign);\r\n};\r\nSmallInteger.prototype.prev = function () {\r\n    var value = this.value;\r\n    if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n    return new BigInteger(MAX_INT_ARR, true);\r\n};\r\n\r\nvar powersOfTwo = [1];\r\nwhile (powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\nvar powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\nfunction shift_isSmall(n) {\r\n    return ((typeof n === \"number\" || typeof n === \"string\") && +Math.abs(n) <= BASE) ||\r\n        (n instanceof BigInteger && n.value.length <= 1);\r\n}\r\n\r\nBigInteger.prototype.shiftLeft = function (n) {\r\n    if (!shift_isSmall(n)) {\r\n        throw new Error(String(n) + \" is too large for shifting.\");\r\n    }\r\n    n = +n;\r\n    if (n < 0) return this.shiftRight(-n);\r\n    var result = this;\r\n    while (n >= powers2Length) {\r\n        result = result.multiply(highestPower2);\r\n        n -= powers2Length - 1;\r\n    }\r\n    return result.multiply(powersOfTwo[n]);\r\n};\r\nSmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\nBigInteger.prototype.shiftRight = function (n) {\r\n    var remQuo;\r\n    if (!shift_isSmall(n)) {\r\n        throw new Error(String(n) + \" is too large for shifting.\");\r\n    }\r\n    n = +n;\r\n    if (n < 0) return this.shiftLeft(-n);\r\n    var result = this;\r\n    while (n >= powers2Length) {\r\n        if (result.isZero()) return result;\r\n        remQuo = divModAny(result, highestPower2);\r\n        result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n        n -= powers2Length - 1;\r\n    }\r\n    remQuo = divModAny(result, powersOfTwo[n]);\r\n    return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n};\r\nSmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\nfunction bitwise(x, y, fn) {\r\n    y = parseValue(y);\r\n    var xSign = x.isNegative(), ySign = y.isNegative();\r\n    var xRem = xSign ? x.not() : x,\r\n        yRem = ySign ? y.not() : y;\r\n    var xBits = [], yBits = [];\r\n    var xStop = false, yStop = false;\r\n    while (!xStop || !yStop) {\r\n        if (xRem.isZero()) { // virtual sign extension for simulating two's complement\r\n            xStop = true;\r\n            xBits.push(xSign ? 1 : 0);\r\n        }\r\n        else if (xSign) xBits.push(xRem.isEven() ? 1 : 0); // two's complement for negative numbers\r\n        else xBits.push(xRem.isEven() ? 0 : 1);\r\n\r\n        if (yRem.isZero()) {\r\n            yStop = true;\r\n            yBits.push(ySign ? 1 : 0);\r\n        }\r\n        else if (ySign) yBits.push(yRem.isEven() ? 1 : 0);\r\n        else yBits.push(yRem.isEven() ? 0 : 1);\r\n\r\n        xRem = xRem.over(2);\r\n        yRem = yRem.over(2);\r\n    }\r\n    var result = [];\r\n    for (var i = 0; i < xBits.length; i++) result.push(fn(xBits[i], yBits[i]));\r\n    var sum = bigInt(result.pop()).negate().times(bigInt(2).pow(result.length));\r\n    while (result.length) {\r\n        sum = sum.add(bigInt(result.pop()).times(bigInt(2).pow(result.length)));\r\n    }\r\n    return sum;\r\n}\r\n\r\nBigInteger.prototype.not = function () {\r\n    return this.negate().prev();\r\n};\r\nSmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\nBigInteger.prototype.and = function (n) {\r\n    return bitwise(this, n, function (a, b) { return a & b; });\r\n};\r\nSmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\nBigInteger.prototype.or = function (n) {\r\n    return bitwise(this, n, function (a, b) { return a | b; });\r\n};\r\nSmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\nBigInteger.prototype.xor = function (n) {\r\n    return bitwise(this, n, function (a, b) { return a ^ b; });\r\n};\r\nSmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\nvar LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\nfunction roughLOB(n) { // get lowestOneBit (rough)\r\n    // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n    // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n    var v = n.value, x = typeof v === \"number\" ? v | LOBMASK_I : v[0] + v[1] * BASE | LOBMASK_BI;\r\n    return x & -x;\r\n}\r\n\r\nfunction max(a, b) {\r\n    a = parseValue(a);\r\n    b = parseValue(b);\r\n    return a.greater(b) ? a : b;\r\n}\r\nfunction min(a, b) {\r\n    a = parseValue(a);\r\n    b = parseValue(b);\r\n    return a.lesser(b) ? a : b;\r\n}\r\nfunction gcd(a, b) {\r\n    a = parseValue(a).abs();\r\n    b = parseValue(b).abs();\r\n    if (a.equals(b)) return a;\r\n    if (a.isZero()) return b;\r\n    if (b.isZero()) return a;\r\n    var c = Integer[1], d, t;\r\n    while (a.isEven() && b.isEven()) {\r\n        d = Math.min(roughLOB(a), roughLOB(b));\r\n        a = a.divide(d);\r\n        b = b.divide(d);\r\n        c = c.multiply(d);\r\n    }\r\n    while (a.isEven()) {\r\n        a = a.divide(roughLOB(a));\r\n    }\r\n    do {\r\n        while (b.isEven()) {\r\n            b = b.divide(roughLOB(b));\r\n        }\r\n        if (a.greater(b)) {\r\n            t = b; b = a; a = t;\r\n        }\r\n        b = b.subtract(a);\r\n    } while (!b.isZero());\r\n    return c.isUnit() ? a : a.multiply(c);\r\n}\r\nfunction lcm(a, b) {\r\n    a = parseValue(a).abs();\r\n    b = parseValue(b).abs();\r\n    return a.divide(gcd(a, b)).multiply(b);\r\n}\r\nfunction randBetween(a, b) {\r\n    a = parseValue(a);\r\n    b = parseValue(b);\r\n    var low = min(a, b), high = max(a, b);\r\n    var range = high.subtract(low);\r\n    if (range.isSmall) return low.add(Math.round(Math.random() * range));\r\n    var length = range.value.length - 1;\r\n    var result = [], restricted = true;\r\n    for (var i = length; i >= 0; i--) {\r\n        var top = restricted ? range.value[i] : BASE;\r\n        var digit = truncate(Math.random() * top);\r\n        result.unshift(digit);\r\n        if (digit < top) restricted = false;\r\n    }\r\n    result = arrayToSmall(result);\r\n    return low.add(typeof result === \"number\" ? new SmallInteger(result) : new BigInteger(result, false));\r\n}\r\nvar parseBase = function (text, base) {\r\n    var length = text.length;\r\nvar i;\r\nvar absBase = Math.abs(base);\r\nfor(var i = 0; i < length; i++) {\r\n\tvar c = text[i].toLowerCase();\r\n\tif(c === \"-\") continue;\r\n\tif(/[a-z0-9]/.test(c)) {\r\n\t    if(/[0-9]/.test(c) && +c >= absBase) {\r\n\t\t\tif(c === \"1\" && absBase === 1) continue;\r\n                throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n\t\t} else if(c.charCodeAt(0) - 87 >= absBase) {\r\n\t\t\tthrow new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n\t\t}\r\n\t}\r\n}\r\n    if (2 <= base && base <= 36) {\r\n        if (length <= LOG_MAX_INT / Math.log(base)) {\r\n\t\tvar result = parseInt(text, base);\r\n\t\tif(isNaN(result)) {\r\n\t\t\tthrow new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n\t\t}\r\n            return new SmallInteger(parseInt(text, base));\r\n        }\r\n    }\r\n    base = parseValue(base);\r\n    var digits = [];\r\n    var isNegative = text[0] === \"-\";\r\n    for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n        var c = text[i].toLowerCase(),\r\n            charCode = c.charCodeAt(0);\r\n        if (48 <= charCode && charCode <= 57) digits.push(parseValue(c));\r\n        else if (97 <= charCode && charCode <= 122) digits.push(parseValue(c.charCodeAt(0) - 87));\r\n        else if (c === \"<\") {\r\n            var start = i;\r\n            do { i++; } while (text[i] !== \">\");\r\n            digits.push(parseValue(text.slice(start + 1, i)));\r\n        }\r\n        else throw new Error(c + \" is not a valid character\");\r\n    }\r\n    return parseBaseFromArray(digits, base, isNegative);\r\n};\r\n\r\nfunction parseBaseFromArray(digits, base, isNegative) {\r\n    var val = Integer[0], pow = Integer[1], i;\r\n    for (i = digits.length - 1; i >= 0; i--) {\r\n        val = val.add(digits[i].times(pow));\r\n        pow = pow.times(base);\r\n    }\r\n    return isNegative ? val.negate() : val;\r\n}\r\n\r\nfunction stringify(digit) {\r\n    var v = digit.value;\r\n    if (typeof v === \"number\") v = [v];\r\n    if (v.length === 1 && v[0] <= 35) {\r\n        return \"0123456789abcdefghijklmnopqrstuvwxyz\".charAt(v[0]);\r\n    }\r\n    return \"<\" + v + \">\";\r\n}\r\nfunction toBase(n, base) {\r\n    base = bigInt(base);\r\n    if (base.isZero()) {\r\n        if (n.isZero()) return \"0\";\r\n        throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n    }\r\n    if (base.equals(-1)) {\r\n        if (n.isZero()) return \"0\";\r\n        if (n.isNegative()) return new Array(1 - n).join(\"10\");\r\n        return \"1\" + new Array(+n).join(\"01\");\r\n    }\r\n    var minusSign = \"\";\r\n    if (n.isNegative() && base.isPositive()) {\r\n        minusSign = \"-\";\r\n        n = n.abs();\r\n    }\r\n    if (base.equals(1)) {\r\n        if (n.isZero()) return \"0\";\r\n        return minusSign + new Array(+n + 1).join(1);\r\n    }\r\n    var out = [];\r\n    var left = n, divmod;\r\n    while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n        divmod = left.divmod(base);\r\n        left = divmod.quotient;\r\n        var digit = divmod.remainder;\r\n        if (digit.isNegative()) {\r\n            digit = base.minus(digit).abs();\r\n            left = left.next();\r\n        }\r\n        out.push(stringify(digit));\r\n    }\r\n    out.push(stringify(left));\r\n    return minusSign + out.reverse().join(\"\");\r\n}\r\n\r\nBigInteger.prototype.toString = function (radix) {\r\n    if (radix === undefined) radix = 10;\r\n    if (radix !== 10) return toBase(this, radix);\r\n    var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n    while (--l >= 0) {\r\n        digit = String(v[l]);\r\n        str += zeros.slice(digit.length) + digit;\r\n    }\r\n    var sign = this.sign ? \"-\" : \"\";\r\n    return sign + str;\r\n};\r\nSmallInteger.prototype.toString = function (radix) {\r\n    if (radix === undefined) radix = 10;\r\n    if (radix != 10) return toBase(this, radix);\r\n    return String(this.value);\r\n};\r\n\r\nBigInteger.prototype.valueOf = function () {\r\n    return +this.toString();\r\n};\r\nBigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\nSmallInteger.prototype.valueOf = function () {\r\n    return this.value;\r\n};\r\nSmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n\r\nfunction parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return new SmallInteger(x);\r\n            throw \"Invalid integer: \" + v;\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n}\r\n\r\nfunction parseNumberValue(v) {\r\n    if (isPrecise(v)) {\r\n        if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n        return new SmallInteger(v);\r\n    }\r\n    return parseStringValue(v.toString());\r\n}\r\n\r\nfunction parseValue(v) {\r\n    if (typeof v === \"number\") {\r\n        return parseNumberValue(v);\r\n    }\r\n    if (typeof v === \"string\") {\r\n        return parseStringValue(v);\r\n    }\r\n    return v;\r\n}\r\n// Pre-define numbers in range [-999,999]\r\nfor (var i = 0; i < 1000; i++) {\r\n    Integer[i] = new SmallInteger(i);\r\n    if (i > 0) Integer[-i] = new SmallInteger(-i);\r\n}\r\n// Backwards compatibility\r\nInteger.one = Integer[1];\r\nInteger.zero = Integer[0];\r\nInteger.minusOne = Integer[-1];\r\nInteger.max = max;\r\nInteger.min = min;\r\nInteger.gcd = gcd;\r\nInteger.lcm = lcm;\r\nInteger.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger; };\r\nInteger.randBetween = randBetween;\r\n\r\nInteger.fromArray = function (digits, base, isNegative) {\r\n    return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/bigint.js","\nimport { Parser } from './parser';\nimport { Linter } from './linter';\nimport { SymbolTable } from './symtable';\nimport { Compiler } from './compiler';\nimport { RuntimePrimitives, RuntimeState } from './runtime';\nimport { VirtualMachine } from './vm';\n\nimport { UnknownPosition } from './reader';\nimport {\n  T_UPPERID,\n  T_LOWERID,\n  Token,\n} from './token';\nimport {\n  ASTDefProcedure,\n  ASTDefFunction,\n  ASTDefType,\n  ASTStmtBlock,\n  ASTConstructorDeclaration,\n} from './ast';\n\n/* This module is a façade for all the combined functionality of the\n * parser/compiler/vm\n */\n\nfunction tok(tag, value) {\n  return new Token(tag, value, UnknownPosition, UnknownPosition);\n}\n\nexport class Runner {\n\n  constructor() {\n    this.initialize();\n  }\n\n  initialize() {\n    this._ast = null;\n    this._primitives = new RuntimePrimitives();\n    this._symtable = this._newSymtableWithPrimitives();\n    this._linter = new Linter(this._symtable);\n    this._code = null;\n    this._vm = null;\n    this._result = null;\n  }\n\n  /* Parse, compile, and run a program in the default global state\n   * (typically an empty 9x9 board in Gobstones).\n   * Return the return value of the program, ignoring the final state.\n   * A GbsInterpreterException may be thrown.\n   */\n  run(input) {\n    return this.runState(input, new RuntimeState()).result;\n  }\n\n  /* Parse, compile, and run a program in the given initial state.\n   * Return an object of the form\n   *   {'result': r, 'state': s]\n   * where r is the result of the program and s is the final state.\n   * A GbsInterpreterException may be thrown.\n   */\n  runState(input, initialState) {\n    this.parse(input);\n    this.lint();\n    this.compile();\n    this.execute(initialState);\n    return {'result': this._result, 'state': this._vm.globalState()};\n  }\n\n  parse(input) {\n    let parser = new Parser(input);\n    this._ast = parser.parse();\n\n    for (let option of parser.getLanguageOptions()) {\n      this._setLanguageOption(option);\n    }\n  }\n\n  enableLintCheck(linterCheckId, enabled) {\n    this._linter.enableCheck(linterCheckId, enabled);\n  }\n\n  lint() {\n    this._symtable = this._linter.lint(this._ast);\n  }\n\n  compile() {\n    this._code = new Compiler(this._symtable).compile(this._ast);\n  }\n\n  initializeVirtualMachine(initialState) {\n    this._vm = new VirtualMachine(this._code, initialState);\n  }\n\n  execute(initialState) {\n    this.executeWithTimeout(initialState, 0);\n  }\n\n  executeWithTimeout(initialState, millisecs) {\n    this.executeWithTimeoutTakingSnapshots(initialState, millisecs, null);\n  }\n\n  executeWithTimeoutTakingSnapshots(initialState, millisecs, snapshotCallback) {\n    this.initializeVirtualMachine(initialState);\n    this._result = this._vm.runWithTimeoutTakingSnapshots(\n      millisecs, snapshotCallback\n    );\n  }\n\n  executeEventWithTimeout(eventValue, millisecs) {\n    this._result = this._vm.runEventWithTimeout(eventValue, millisecs);\n  }\n\n  get abstractSyntaxTree() {\n    return this._ast;\n  }\n\n  get primitives() {\n    return this._primitives;\n  }\n\n  get symbolTable() {\n    return this._symtable;\n  }\n\n  get virtualMachineCode() {\n    return this._code;\n  }\n\n  get result() {\n    return this._result;\n  }\n\n  get globalState() {\n    return this._vm.globalState();\n  }\n\n  /* Evaluate language options set by the LANGUAGE pragma */\n  _setLanguageOption(option) {\n    if (option === 'DestructuringForeach') {\n      this.enableLintCheck('forbidden-extension-destructuring-foreach', false);\n    } else if (option === 'AllowRecursion') {\n      this.enableLintCheck('forbidden-extension-allow-recursion', false);\n    } else {\n      throw Error('Unknown language option: ' + option);\n    }\n  }\n\n  /* Dynamic stack of regions */\n  regionStack() {\n    return this._vm.regionStack();\n  }\n\n  /* Create a new symbol table, including definitions for all the primitive\n   * types and operations (which come from RuntimePrimitives) */\n  _newSymtableWithPrimitives() {\n    let symtable = new SymbolTable();\n\n    /* Populate symbol table with primitive types */\n    for (let type of this._primitives.types()) {\n      symtable.defType(this._astDefType(type));\n    }\n\n    /* Populate symbol table with primitive procedures */\n    for (let procedureName of this._primitives.procedures()) {\n      symtable.defProcedure(this._astDefProcedure(procedureName));\n    }\n\n    /* Populate symbol table with primitive functions */\n    for (let functionName of this._primitives.functions()) {\n      symtable.defFunction(this._astDefFunction(functionName));\n    }\n\n    return symtable;\n  }\n\n  _astDefType(type) {\n    let constructorDeclarations = [];\n    for (let constructor of this._primitives.typeConstructors(type)) {\n      constructorDeclarations.push(\n        this._astConstructorDeclaration(type, constructor)\n      );\n    }\n    return new ASTDefType(tok(T_UPPERID, type), constructorDeclarations);\n  }\n\n  _astDefProcedure(procedureName) {\n    let nargs = this._primitives.getOperation(procedureName).nargs();\n    let parameters = [];\n    for (let i = 1; i <= nargs; i++) {\n      parameters.push(tok(T_LOWERID, 'x' + i.toString()));\n    }\n    return new ASTDefProcedure(\n        tok(T_LOWERID, procedureName),\n        parameters,\n        new ASTStmtBlock([])\n    );\n  }\n\n  _astDefFunction(functionName) {\n    let nargs = this._primitives.getOperation(functionName).nargs();\n    let parameters = [];\n    for (let i = 1; i <= nargs; i++) {\n      parameters.push(tok(T_LOWERID, 'x' + i.toString()));\n    }\n    return new ASTDefFunction(\n        tok(T_LOWERID, functionName),\n        parameters,\n        new ASTStmtBlock([])\n    );\n  }\n\n  _astConstructorDeclaration(type, constructor) {\n    let fields = [];\n    for (let field of this._primitives.constructorFields(type, constructor)) {\n      fields.push(tok(T_LOWERID, field));\n    }\n    return new ASTConstructorDeclaration(tok(T_UPPERID, constructor), fields);\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/runner.js","import { GbsSyntaxError } from './exceptions';\nimport { Lexer } from './lexer';\nimport { i18n } from './i18n';\nimport {\n  Token, T_EOF, T_NUM, T_STRING, T_LOWERID, T_UPPERID,\n  /* Keywords */\n  T_PROGRAM, T_INTERACTIVE, T_PROCEDURE, T_FUNCTION, T_RETURN,\n  T_IF, T_THEN, T_ELSEIF, T_ELSE,\n  T_CHOOSE, T_WHEN, T_OTHERWISE,\n  T_MATCHING, T_SELECT, T_ON,\n  T_REPEAT, T_FOREACH, T_IN, T_WHILE,\n  T_SWITCH, T_TO, T_LET, T_NOT, T_DIV, T_MOD, T_TYPE,\n  T_IS, T_RECORD, T_VARIANT, T_CASE, T_FIELD, T_UNDERSCORE,\n  T_TIMEOUT,\n  /* Symbols */\n  T_LPAREN, T_RPAREN, T_LBRACE, T_RBRACE, T_LBRACK, T_RBRACK, T_COMMA,\n  T_SEMICOLON, T_ELLIPSIS, T_RANGE, T_GETS, T_PIPE, T_ARROW, T_ASSIGN,\n  T_EQ, T_NE, T_LE, T_GE, T_LT, T_GT, T_AND, T_OR, T_CONCAT, T_PLUS,\n  T_MINUS, T_TIMES, T_POW\n} from './token';\nimport {\n  /* Main */\n  ASTMain,\n  /* Definitions */\n  ASTDefProgram,\n  ASTDefInteractiveProgram,\n  ASTDefProcedure,\n  ASTDefFunction,\n  ASTDefType,\n  /* Statements */\n  ASTStmtBlock,\n  ASTStmtReturn,\n  ASTStmtIf,\n  ASTStmtRepeat,\n  ASTStmtForeach,\n  ASTStmtWhile,\n  ASTStmtSwitch,\n  ASTStmtAssignVariable,\n  ASTStmtAssignTuple,\n  ASTStmtProcedureCall,\n  /* Patterns */\n  ASTPatternWildcard,\n  ASTPatternVariable,\n  ASTPatternNumber,\n  ASTPatternStructure,\n  ASTPatternTuple,\n  ASTPatternTimeout,\n  /* Expressions */\n  ASTExprVariable,\n  ASTExprConstantNumber,\n  ASTExprConstantString,\n  ASTExprChoose,\n  ASTExprMatching,\n  ASTExprList,\n  ASTExprRange,\n  ASTExprTuple,\n  ASTExprStructure,\n  ASTExprStructureUpdate,\n  ASTExprFunctionCall,\n  /* SwitchBranch */\n  ASTSwitchBranch,\n  /* MatchingBranch */\n  ASTMatchingBranch,\n  /* FieldBinding */\n  ASTFieldBinding,\n  /* ConstructorDeclaration */\n  ASTConstructorDeclaration,\n  //\n  N_ExprVariable,\n} from './ast';\n\nconst Infix = Symbol.for('Infix');\nconst InfixL = Symbol.for('InfixL');\nconst InfixR = Symbol.for('InfixR');\nconst Prefix = Symbol.for('Prefix');\n\nclass PrecedenceLevel {\n  /* Operators should be a dictionary mapping operator tags to\n   * their function names */\n  constructor(fixity, operators) {\n    this._fixity = fixity;\n    this._operators = operators;\n  }\n\n  get fixity() {\n    return this._fixity;\n  }\n\n  isOperator(token) {\n    return Symbol.keyFor(token.tag) in this._operators;\n  }\n\n  functionName(token) {\n    return new Token(\n      T_LOWERID,\n      this._operators[Symbol.keyFor(token.tag)],\n      token.startPos,\n      token.endPos\n    );\n  }\n}\n\n/* OPERATORS is a list of precedence levels.\n * Precedence levels are ordered from lesser to greater precedence.\n */\nconst OPERATORS = [\n  /* Logical operators */\n  new PrecedenceLevel(InfixR, {\n    'T_OR': '||',\n  }),\n  new PrecedenceLevel(InfixR, {\n    'T_AND': '&&',\n  }),\n  new PrecedenceLevel(Prefix, {\n    'T_NOT': 'not',\n  }),\n  /* Relational operators */\n  new PrecedenceLevel(Infix, {\n    'T_EQ': '==',\n    'T_NE': '/=',\n    'T_LE': '<=',\n    'T_GE': '>=',\n    'T_LT': '<',\n    'T_GT': '>',\n  }),\n  /* List concatenation */\n  new PrecedenceLevel(InfixL, {\n    'T_CONCAT': '++',\n  }),\n  /* Additive operators */\n  new PrecedenceLevel(InfixL, {\n    'T_PLUS': '+',\n    'T_MINUS': '-',\n  }),\n  /* Multiplicative operators */\n  new PrecedenceLevel(InfixL, {\n    'T_TIMES': '*',\n  }),\n  /* Division operators */\n  new PrecedenceLevel(InfixL, {\n    'T_DIV': 'div',\n    'T_MOD': 'mod',\n  }),\n  /* Exponential operators */\n  new PrecedenceLevel(InfixR, {\n    'T_POW': '^'\n  }),\n  /* Unary minus */\n  new PrecedenceLevel(Prefix, {\n    'T_MINUS': '-(unary)',\n  })\n];\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsSyntaxError(startPos, endPos, reason, args);\n}\n\n/* Represents a parser for a Gobstones/XGobstones program.\n * It is structured as a straightforward recursive-descent parser.\n *\n * The parameter 'input' may be either a string or a dictionary\n * mapping filenames to strings.\n *\n * All the \"parseFoo\" methods agree to the following convention:\n * - parseFoo returns an AST for a Foo construction,\n * - parseFoo consumes a fragment of the input by successively requesting\n *   the next token from the lexer,\n * - when calling parseFoo, the current token should already be located\n *   on the first token of the corresponding construction,\n * - when parseFoo returns, the current token is already located on\n *   the following token, after the corresponding construction.\n */\nexport class Parser {\n\n  constructor(input) {\n    this._lexer = new Lexer(input);\n    this._nextToken();\n  }\n\n  /* Return the AST that results from parsing a full program */\n  parse() {\n    let definitions = [];\n    while (this._currentToken.tag !== T_EOF) {\n      definitions.push(this._parseDefinition());\n    }\n    return new ASTMain(definitions);\n  }\n\n  /* Return the list of all language options collected by the tokenizer.\n   * Language options are set by the LANGUAGE pragma. */\n  getLanguageOptions() {\n    return this._lexer.getLanguageOptions();\n  }\n\n  /** Definitions **/\n\n  _parseDefinition() {\n    switch (this._currentToken.tag) {\n      case T_PROGRAM:\n        return this._parseDefProgram();\n      case T_INTERACTIVE:\n        return this._parseDefInteractiveProgram();\n      case T_PROCEDURE:\n        return this._parseDefProcedure();\n      case T_FUNCTION:\n        return this._parseDefFunction();\n      case T_TYPE:\n        return this._parseDefType();\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('definition'),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  _parseDefProgram() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_PROGRAM);\n    let attributes = this._lexer.getPendingAttributes();\n    let block = this._parseStmtBlock();\n    let result = new ASTDefProgram(block);\n    result.startPos = startPos;\n    result.endPos = block.endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseDefInteractiveProgram() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_INTERACTIVE);\n    this._match(T_PROGRAM);\n    let attributes = this._lexer.getPendingAttributes();\n    this._match(T_LBRACE);\n    let branches = this._parseSwitchBranches();\n    let endPos = this._currentToken.startPos;\n    this._match(T_RBRACE);\n    let result = new ASTDefInteractiveProgram(branches);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseDefProcedure() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_PROCEDURE);\n    let name = this._parseUpperid();\n    this._match(T_LPAREN);\n    let parameters = this._parseLoweridSeq();\n    this._match(T_RPAREN);\n    let attributes = this._lexer.getPendingAttributes();\n    let block = this._parseStmtBlock();\n    let result = new ASTDefProcedure(name, parameters, block);\n    result.startPos = startPos;\n    result.endPos = block.endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseDefFunction() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_FUNCTION);\n    let name = this._currentToken;\n    this._match(T_LOWERID);\n    this._match(T_LPAREN);\n    let parameters = this._parseLoweridSeq();\n    this._match(T_RPAREN);\n    let attributes = this._lexer.getPendingAttributes();\n    let block = this._parseStmtBlock();\n    let result = new ASTDefFunction(name, parameters, block);\n    result.startPos = startPos;\n    result.endPos = block.endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseDefType() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_TYPE);\n    let typeName = this._parseUpperid();\n    this._match(T_IS);\n    switch (this._currentToken.tag) {\n      case T_RECORD:\n        return this._parseDefTypeRecord(startPos, typeName);\n      case T_VARIANT:\n        return this._parseDefTypeVariant(startPos, typeName);\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('<alternative>')([\n              i18n('T_RECORD'),\n              i18n('T_VARIANT')\n            ]),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  _parseDefTypeRecord(startPos, typeName) {\n    this._match(T_RECORD);\n    let attributes = this._lexer.getPendingAttributes();\n    this._match(T_LBRACE);\n    let fieldNames = this._parseFieldNames();\n    let endPos = this._currentToken.startPos;\n    this._matchExpected(T_RBRACE, [T_FIELD, T_RBRACE]);\n    let result = new ASTDefType(typeName, [\n                   new ASTConstructorDeclaration(typeName, fieldNames)\n                 ]);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseDefTypeVariant(startPos, typeName) {\n    let constructorDeclarations = [];\n    this._match(T_VARIANT);\n    let attributes = this._lexer.getPendingAttributes();\n    this._match(T_LBRACE);\n    while (this._currentToken.tag === T_CASE) {\n      constructorDeclarations.push(this._parseConstructorDeclaration());\n    }\n    let endPos = this._currentToken.startPos;\n    this._matchExpected(T_RBRACE, [T_CASE, T_RBRACE]);\n    let result = new ASTDefType(typeName, constructorDeclarations);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    result.attributes = attributes;\n    return result;\n  }\n\n  _parseConstructorDeclaration() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_CASE);\n    let constructorName = this._parseUpperid();\n    this._match(T_LBRACE);\n    let fieldNames = this._parseFieldNames();\n    let endPos = this._currentToken.startPos;\n    this._matchExpected(T_RBRACE, [T_FIELD, T_RBRACE]);\n    let result = new ASTConstructorDeclaration(constructorName, fieldNames);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parseFieldNames() {\n    let fieldNames = [];\n    while (this._currentToken.tag === T_FIELD) {\n      this._match(T_FIELD);\n      fieldNames.push(this._parseLowerid());\n    }\n    return fieldNames;\n  }\n\n  /** Statements **/\n\n  /* Statement, optionally followed by semicolon */\n  _parseStatement() {\n    let statement = this._parsePureStatement();\n    if (this._currentToken.tag === T_SEMICOLON) {\n      this._match(T_SEMICOLON);\n    }\n    return statement;\n  }\n\n  /* Statement (not followed by semicolon) */\n  _parsePureStatement() {\n    switch (this._currentToken.tag) {\n      case T_ELLIPSIS:\n        return this._parseStmtEllipsis();\n      case T_RETURN:\n        return this._parseStmtReturn();\n      case T_IF:\n        return this._parseStmtIf(true /* expectInitialIf */);\n      case T_REPEAT:\n        return this._parseStmtRepeat();\n      case T_FOREACH:\n        return this._parseStmtForeach();\n      case T_WHILE:\n        return this._parseStmtWhile();\n      case T_SWITCH:\n        return this._parseStmtSwitch();\n      case T_LET:\n        return this._parseStmtLet();\n      case T_LBRACE:\n        return this._parseStmtBlock();\n      case T_LOWERID:\n        return this._parseStmtAssignVariable();\n      case T_UPPERID:\n        return this._parseStmtProcedureCall();\n      case T_LPAREN:\n        /* Special error for rejecting tuple assignments\n         *   (x1, ..., xN) := expression\n         * in favour of\n         *   let (x1, ..., xN) := expression\n         */\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'obsolete-tuple-assignment', []\n        );\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('statement'),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  _parseStmtBlock() {\n    let startPos = this._currentToken.startPos;\n    let statements = [];\n    this._match(T_LBRACE);\n    while (this._currentToken.tag !== T_RBRACE) {\n      statements.push(this._parseStatement());\n      if (this._currentToken === T_SEMICOLON) {\n        this._match(T_SEMICOLON);\n      }\n    }\n    let endPos = this._currentToken.startPos;\n    this._match(T_RBRACE);\n    let result = new ASTStmtBlock(statements);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parseStmtEllipsis() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_ELLIPSIS);\n    let result = new ASTStmtProcedureCall(\n      new Token(T_UPPERID, i18n('PRIM:BOOM'), startPos, startPos), [\n        new ASTExprConstantString(\n          new Token(T_STRING, i18n('errmsg:ellipsis'))\n        )\n      ]\n    );\n    result.startPos = startPos;\n    result.endPos = this._currentToken.startPos;\n    return result;\n  }\n\n  _parseStmtReturn() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_RETURN);\n    let tuple = this._parseExprTuple(false /* possiblyEmpty */);\n    let result = new ASTStmtReturn(tuple);\n    result.startPos = startPos;\n    result.endPos = tuple.endPos;\n    return result;\n  }\n\n  _parseStmtIf(expectInitialIf) {\n    let startPos = this._currentToken.startPos;\n    if (expectInitialIf) {\n      this._match(T_IF);\n    }\n\n    this._match(T_LPAREN);\n    let condition = this._parseExpression();\n    this._match(T_RPAREN);\n    /* Optional 'then' */\n    if (this._currentToken.tag === T_THEN) {\n      this._match(T_THEN);\n    }\n    let thenBlock = this._parseStmtBlock();\n\n    let endPos;\n    let elseBlock;\n    if (this._currentToken.tag === T_ELSEIF) {\n      this._match(T_ELSEIF);\n      elseBlock = this._parseStmtIf(false /* expectInitialIf */);\n      endPos = elseBlock.endPos;\n    } else if (this._currentToken.tag === T_ELSE) {\n      this._match(T_ELSE);\n      elseBlock = this._parseStmtBlock();\n      endPos = elseBlock.endPos;\n    } else {\n      elseBlock = null;\n      endPos = thenBlock.endPos;\n    }\n    let result = new ASTStmtIf(condition, thenBlock, elseBlock);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parseStmtRepeat() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_REPEAT);\n    this._match(T_LPAREN);\n    let times = this._parseExpression();\n    this._match(T_RPAREN);\n    let body = this._parseStmtBlock();\n    let result = new ASTStmtRepeat(times, body);\n    result.startPos = startPos;\n    result.endPos = body.endPos;\n    return result;\n  }\n\n  _parseStmtForeach() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_FOREACH);\n    let pattern = this._parsePattern();\n    this._match(T_IN);\n    let range = this._parseExpression();\n    let body = this._parseStmtBlock();\n    let result = new ASTStmtForeach(pattern, range, body);\n    result.startPos = startPos;\n    result.endPos = body.endPos;\n    return result;\n  }\n\n  _parseStmtWhile() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_WHILE);\n    this._match(T_LPAREN);\n    let condition = this._parseExpression();\n    this._match(T_RPAREN);\n    let body = this._parseStmtBlock();\n    let result = new ASTStmtWhile(condition, body);\n    result.startPos = startPos;\n    result.endPos = body.endPos;\n    return result;\n  }\n\n  _parseStmtSwitch() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_SWITCH);\n    this._match(T_LPAREN);\n    let subject = this._parseExpression();\n    this._match(T_RPAREN);\n    if (this._currentToken.tag === T_TO) {\n      this._match(T_TO);\n    }\n    this._match(T_LBRACE);\n    let branches = this._parseSwitchBranches();\n    let endPos = this._currentToken.startPos;\n    this._match(T_RBRACE);\n    let result = new ASTStmtSwitch(subject, branches);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parseStmtLet() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_LET);\n    let result;\n    if (this._currentToken.tag === T_LOWERID) {\n      result = this._parseStmtAssignVariable();\n    } else if (this._currentToken.tag === T_LPAREN) {\n      result = this._parseStmtAssignTuple();\n    } else {\n      fail(\n        this._currentToken.startPos, this._currentToken.endPos,\n        'expected-but-found', [\n          i18n('<alternative>')(\n            i18n('T_LOWERID'),\n            i18n('T_LPAREN')\n          ),\n          i18n(Symbol.keyfor(this._currentToken.tag))\n        ]\n      );\n    }\n    result.startPos = startPos;\n    return result;\n  }\n\n  _parseStmtAssignVariable() {\n    let variable = this._parseLowerid();\n    this._match(T_ASSIGN);\n    let value = this._parseExpression();\n    let result = new ASTStmtAssignVariable(variable, value);\n    result.startPos = variable.startPos;\n    result.endPos = value.endPos;\n    return result;\n  }\n\n  _parseStmtAssignTuple() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_LPAREN);\n    let variables = this._parseLoweridSeq();\n    if (variables.length === 1) {\n      fail(\n        startPos, this._currentToken.endPos,\n        'assignment-tuple-cannot-be-singleton', []\n      );\n    }\n    this._match(T_RPAREN);\n    this._match(T_ASSIGN);\n    let value = this._parseExpression();\n    let result = new ASTStmtAssignTuple(variables, value);\n    result.startPos = startPos;\n    result.endPos = value.endPos;\n    return result;\n  }\n\n  _parseStmtProcedureCall() {\n    let procedureName = this._parseUpperid();\n    this._match(T_LPAREN);\n    let args = this._parseDelimitedSeq(\n                 T_RPAREN, T_COMMA,\n                 () => this._parseExpression()\n               );\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n    let result = new ASTStmtProcedureCall(procedureName, args);\n    result.startPos = procedureName.startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /** Patterns **/\n\n  _parsePattern() {\n    switch (this._currentToken.tag) {\n      case T_UNDERSCORE:\n        return this._parsePatternWildcard();\n      case T_LOWERID:\n        return this._parsePatternVariable();\n      case T_NUM: case T_MINUS:\n        return this._parsePatternNumber();\n      case T_UPPERID:\n        return this._parsePatternStructure();\n      case T_LPAREN:\n        return this._parsePatternTuple();\n      case T_TIMEOUT:\n        return this._parsePatternTimeout();\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('pattern'),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  _parsePatternWildcard() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_UNDERSCORE);\n    let result = new ASTPatternWildcard();\n    let endPos = startPos;\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parsePatternVariable() {\n    let startPos = this._currentToken.startPos;\n    let id = this._parseLowerid();\n    let result = new ASTPatternVariable(id);\n    result.startPos = startPos;\n    result.endPos = id.endPos;\n    return result;\n  }\n\n  _parsePatternNumber() {\n    let startPos = this._currentToken.startPos;\n    let sign = '';\n    if (this._currentToken.tag === T_MINUS) {\n      this._match(T_MINUS);\n      sign = '-';\n    }\n    let number = this._currentToken;\n    this._match(T_NUM);\n    let value = sign + number.value;\n    if (value === '-0') {\n      fail(\n        startPos, number.endPos,\n        'pattern-number-cannot-be-negative-zero', []\n      );\n    }\n    number = new Token(T_NUM, value, number.startPos, number.endPos);\n    let result = new ASTPatternNumber(number);\n    result.startPos = startPos;\n    result.endPos = number.endPos;\n    return result;\n  }\n\n  _parsePatternStructure() {\n    let startPos = this._currentToken.startPos;\n    let endPos = this._currentToken.startPos;\n    let constructor = this._parseUpperid();\n    let parameters;\n    if (this._currentToken.tag === T_LPAREN) {\n      this._match(T_LPAREN);\n      parameters = this._parseLoweridSeq();\n      endPos = this._currentToken.startPos;\n      this._match(T_RPAREN);\n    } else {\n      parameters = [];\n    }\n    let result = new ASTPatternStructure(constructor, parameters);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parsePatternTuple() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_LPAREN);\n    let parameters = this._parseLoweridSeq();\n    if (parameters.length === 1) {\n      fail(\n        startPos, this._currentToken.endPos,\n        'pattern-tuple-cannot-be-singleton', []\n      );\n    }\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n    let result = new ASTPatternTuple(parameters);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parsePatternTimeout() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_TIMEOUT);\n    this._match(T_LPAREN);\n    let timeout = this._currentToken;\n    this._match(T_NUM);\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n    let result = new ASTPatternTimeout(timeout);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /** Expressions **/\n\n  _parseExpression() {\n    return this._parseExprOperator(0);\n  }\n\n  /* Read an expression of the given level.\n   *\n   * If the list OPERATORS of precedence levels has N elements, then:\n   * - Expressions of level 0 are arbitrary expressions.\n   * - Expressions of level N are atomic expressions.\n   * - In general, expressions of level I involve operators\n   *   of levels I, I+1, ..., N-1,\n   *   and they can only include operators of the lower levels\n   *   by surrounding them in parentheses.\n   */\n  _parseExprOperator(level) {\n    if (level === OPERATORS.length) {\n      return this._parseExprAtom();\n    }\n    switch (OPERATORS[level].fixity) {\n      case Infix:\n        return this._parseExprOperatorInfix(level);\n      case InfixL:\n        return this._parseExprOperatorInfixL(level);\n      case InfixR:\n        return this._parseExprOperatorInfixR(level);\n      case Prefix:\n        return this._parseExprOperatorPrefix(level);\n      default:\n        throw Error('Invalid operator.');\n    }\n  }\n\n  _parseExprOperatorInfix(level) {\n    let left = this._parseExprOperator(level + 1);\n    if (OPERATORS[level].isOperator(this._currentToken)) {\n      let op = this._currentToken;\n      this._nextToken();\n      let right = this._parseExprOperator(level + 1);\n\n      /* Check that it is not used associatively */\n      if (OPERATORS[level].isOperator(this._currentToken)) {\n        fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'operators-are-not-associative', [\n            i18n(Symbol.keyFor(op.tag)),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n      }\n\n      let result = new ASTExprFunctionCall(\n                     OPERATORS[level].functionName(op), [left, right]\n                   );\n      result.startPos = left.startPos;\n      result.endPos = right.endPos;\n      return result;\n    } else {\n      return left;\n    }\n  }\n\n  _parseExprOperatorInfixL(level) {\n    let result = this._parseExprOperator(level + 1);\n    while (OPERATORS[level].isOperator(this._currentToken)) {\n      let op = this._currentToken;\n      this._nextToken();\n      let right = this._parseExprOperator(level + 1);\n      let result2 = new ASTExprFunctionCall(\n                      OPERATORS[level].functionName(op), [result, right]\n                    );\n      result2.startPos = result.startPos;\n      result2.endPos = right.endPos;\n      result = result2;\n    }\n    return result;\n  }\n\n  _parseExprOperatorInfixR(level) {\n    let left = this._parseExprOperator(level + 1);\n    if (OPERATORS[level].isOperator(this._currentToken)) {\n      let op = this._currentToken;\n      this._nextToken();\n      let right = this._parseExprOperator(level); /* same level */\n      let result = new ASTExprFunctionCall(\n                      OPERATORS[level].functionName(op), [left, right]\n                    );\n      result.startPos = left.startPos;\n      result.endPos = right.endPos;\n      return result;\n    } else {\n      return left;\n    }\n  }\n\n  _parseExprOperatorPrefix(level) {\n    if (OPERATORS[level].isOperator(this._currentToken)) {\n      let op = this._currentToken;\n      this._nextToken();\n      let inner = this._parseExprOperator(level); /* same level */\n      let result = new ASTExprFunctionCall(\n                      OPERATORS[level].functionName(op), [inner]\n                    );\n      result.startPos = op.startPos;\n      result.endPos = inner.endPos;\n      return result;\n    } else {\n      return this._parseExprOperator(level + 1);\n    }\n  }\n\n  /* Parse an atomic expression.\n   * I.e. all the operators must be surrounded by parentheses */\n  _parseExprAtom() {\n    switch (this._currentToken.tag) {\n      case T_ELLIPSIS:\n        return this._parseExprEllipsis();\n      case T_LOWERID:\n        return this._parseExprVariableOrFunctionCall();\n      case T_NUM:\n        return this._parseExprConstantNumber();\n      case T_STRING:\n        return this._parseExprConstantString();\n      case T_CHOOSE:\n        return this._parseExprChoose(true /* expectInitialChoose */);\n      case T_MATCHING:\n        return this._parseExprMatching();\n      case T_UPPERID:\n        return this._parseExprStructureOrStructureUpdate();\n      case T_LPAREN:\n        return this._parseExprTuple(true /* possiblyEmpty */);\n      case T_LBRACK:\n        return this._parseExprListOrRange();\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('expression'),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  _parseExprEllipsis() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_ELLIPSIS);\n    let result = new ASTExprFunctionCall(\n      new Token(T_LOWERID, i18n('PRIM:boom'), startPos, startPos), [\n        new ASTExprConstantString(\n          new Token(T_STRING, i18n('errmsg:ellipsis'))\n        )\n      ]\n    );\n    result.startPos = startPos;\n    result.endPos = this._currentToken.startPos;\n    return result;\n  }\n\n  _parseExprVariableOrFunctionCall() {\n    let id = this._parseLowerid();\n    let result;\n    let endPos;\n    if (this._currentToken.tag === T_LPAREN) {\n      this._match(T_LPAREN);\n      let args = this._parseExpressionSeq(T_RPAREN);\n      result = new ASTExprFunctionCall(id, args);\n      endPos = this._currentToken.startPos;\n      this._match(T_RPAREN);\n    } else {\n      result = new ASTExprVariable(id);\n      endPos = id.endPos;\n    }\n    result.startPos = id.startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  _parseExprConstantNumber() {\n    let number = this._currentToken;\n    this._match(T_NUM);\n    let result = new ASTExprConstantNumber(number);\n    result.startPos = number.startPos;\n    result.endPos = number.endPos;\n    return result;\n  }\n\n  _parseExprConstantString() {\n    let string = this._currentToken;\n    this._match(T_STRING);\n    let result = new ASTExprConstantString(string);\n    result.startPos = string.startPos;\n    result.endPos = string.endPos;\n    return result;\n  }\n\n  _parseExprChoose(expectInitialChoose) {\n    let startPos = this._currentToken.startPos;\n    if (expectInitialChoose) {\n      this._match(T_CHOOSE);\n    }\n    let expr1 = this._parseExpression();\n    if (this._currentToken.tag === T_WHEN) {\n      this._match(T_WHEN);\n      this._match(T_LPAREN);\n      let condition = this._parseExpression();\n      this._match(T_RPAREN);\n      let expr2 = this._parseExprChoose(false /* expectInitialChoose */);\n      let result = new ASTExprChoose(condition, expr1, expr2);\n      result.startPos = startPos;\n      result.endPos = expr2.endPos;\n      return result;\n    } else {\n      let endPos = this._currentToken.endPos;\n      this._match(T_OTHERWISE);\n      expr1.startPos = startPos;\n      expr1.endPos = endPos;\n      return expr1;\n    }\n  }\n\n  _parseExprMatching() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_MATCHING);\n    this._match(T_LPAREN);\n    let subject = this._parseExpression();\n    this._match(T_RPAREN);\n    this._match(T_SELECT);\n    let branches = this._parseMatchingBranches();\n    let result = new ASTExprMatching(subject, branches);\n    result.startPos = startPos;\n    result.endPos = result.endPos;\n    return result;\n  }\n\n  /*\n   * Parse any of the following constructions:\n   * (1) Structure with no arguments: \"Norte\"\n   * (2) Structure with no arguments and explicit parentheses: \"Nil()\"\n   * (3) Structure with arguments: \"Coord(x <- 1, y <- 2)\"\n   * (4) Update structure with arguments: \"Coord(expression | x <- 2)\"\n   *\n   * Deciding between (3) and (4) unfortunately cannot be done with one\n   * token of lookahead, so after reading the constructor and a left\n   * parenthesis we resort to the following workaround:\n   *\n   * - Parse an expression.\n   * - If the next token is GETS (\"<-\") we are in case (3).\n   *   We must then ensure that the expression is just a variable\n   *   and recover its name.\n   * - If the next token is PIPE (\"|\") we are in case (4), and we go on.\n   */\n  _parseExprStructureOrStructureUpdate() {\n    let constructorName = this._parseUpperid();\n    if (this._currentToken.tag !== T_LPAREN) {\n      /* Structure with no arguments, e.g. \"Norte\" */\n      let result = new ASTExprStructure(constructorName, []);\n      result.startPos = constructorName.startPos;\n      result.endPos = constructorName.endPos;\n      return result;\n    }\n    this._match(T_LPAREN);\n    if (this._currentToken.tag === T_RPAREN) {\n      /* Structure with no arguments with explicit parentheses,\n       * e.g. \"Nil()\" */\n      let result = new ASTExprStructure(constructorName, []);\n      let endPos = this._currentToken.startPos;\n      this._match(T_RPAREN);\n      result.startPos = constructorName.startPos;\n      result.endPos = endPos;\n      return result;\n    }\n    let subject = this._parseExpression();\n    switch (this._currentToken.tag) {\n      case T_GETS:\n        if (subject.tag !== N_ExprVariable) {\n          fail(\n            this._currentToken.startPos, this._currentToken.endPos,\n            'expected-but-found', [\n              i18n('T_PIPE'),\n              i18n('T_GETS')\n            ]\n          );\n        }\n        return this._parseStructure(constructorName, subject.variableName);\n      case T_PIPE:\n        return this._parseStructureUpdate(constructorName, subject);\n      case T_COMMA: case T_RPAREN:\n        /* Issue a specific error message to deal with a common\n         * programming error, namely calling a procedure name\n         * where an expression is expected. */\n        return fail(\n          constructorName.startPos, constructorName.endPos,\n          'expected-but-found', [\n            i18n('expression'),\n            i18n('procedure call')\n          ]\n        );\n      default:\n        let expected;\n        if (subject.tag === N_ExprVariable) {\n          expected = i18n('<alternative>')([\n                       i18n('T_GETS'),\n                       i18n('T_PIPE')\n                     ]);\n        } else {\n          expected = i18n('T_PIPE');\n        }\n        return fail(\n          constructorName.startPos, constructorName.endPos,\n          'expected-but-found', [\n            expected,\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  /* Parse a structure   A(x1 <- expr1, ..., xN <- exprN)\n   * where N >= 1,\n   * assuming that  \"A(x1\" has already been read.\n   *\n   * - constructorName and fieldName1 correspond to \"A\" and \"x1\"\n   *   respectively.\n   */\n  _parseStructure(constructorName, fieldName1) {\n    /* Read \"<- expr1\" */\n    this._match(T_GETS);\n    let value1 = this._parseExpression();\n    let fieldBinding1 = new ASTFieldBinding(fieldName1, value1);\n    fieldBinding1.startPos = fieldName1.startPos;\n    fieldBinding1.endPos = value1.endPos;\n    /* Read \"x2 <- expr2, ..., xN <- exprN\" (this might be empty) */\n    let fieldBindings = this._parseNonEmptyDelimitedSeq(\n                          T_RPAREN, T_COMMA, [fieldBinding1],\n                          () => this._parseFieldBinding()\n                        );\n    /* Read \")\" */\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n    /* Return an ExprStructure node */\n    let result = new ASTExprStructure(constructorName, fieldBindings);\n    result.startPos = constructorName.startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /* Parse a structure update  A(e | x1 <- expr1, ..., xN <- exprN)\n   * where N >= 1,\n   * assuming that \"A(e\" has already been read.\n   *\n   * constructorName and original correspond to \"A\" and \"e\"\n   * respectively.\n   */\n  _parseStructureUpdate(constructorName, original) {\n    /* Read \"|\" */\n    this._match(T_PIPE);\n    /* Read \"x2 <- expr2, ..., xN <- exprN\" (this might be empty) */\n    let fieldBindings = this._parseDelimitedSeq(\n                          T_RPAREN, T_COMMA,\n                          () => this._parseFieldBinding()\n                        );\n    /* Read \")\" */\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n    /* Return an ExprStructureUpdate node */\n    let result = new ASTExprStructureUpdate(\n                      constructorName, original, fieldBindings\n                 );\n    result.startPos = constructorName.startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /* Read a list\n   *   [expr1, ..., exprN]\n   * a range expression\n   *   [first .. last]\n   * or a range expression with step\n   *   [first, second .. last]\n   */\n  _parseExprListOrRange() {\n    let startPos = this._currentToken.startPos;\n    this._match(T_LBRACK);\n    if (this._currentToken.tag === T_RBRACK) {\n      return this._parseExprListRemainder(startPos, []);\n    }\n    let first = this._parseExpression();\n    switch (this._currentToken.tag) {\n      case T_RBRACK:\n        return this._parseExprListRemainder(startPos, [first]);\n      case T_RANGE:\n        return this._parseExprRange(startPos, first, null);\n      case T_COMMA:\n        this._match(T_COMMA);\n        let second = this._parseExpression();\n        switch (this._currentToken.tag) {\n          case T_RBRACK:\n          case T_COMMA:\n            return this._parseExprListRemainder(startPos, [first, second]);\n          case T_RANGE:\n            return this._parseExprRange(startPos, first, second);\n          default:\n            return fail(\n              this._currentToken.startPos, this._currentToken.endPos,\n              'expected-but-found', [\n                i18n('<alternative>')([\n                  i18n('T_COMMA'),\n                  i18n('T_RANGE'),\n                  i18n('T_RBRACK')\n                ]),\n                i18n(Symbol.keyFor(this._currentToken.tag))\n              ]\n            );\n        }\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('<alternative>')([\n              i18n('T_COMMA'),\n              i18n('T_RANGE'),\n              i18n('T_RBRACK')\n            ]),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  /* Read the end of a list \"[expr1, ..., exprN]\" assumming we have\n   * already read \"[expr1, ..., exprK\" up to some point K >= 1.\n   * - startPos is the position of \"[\"\n   * - prefix is the list of elements we have already read\n   */\n  _parseExprListRemainder(startPos, prefix) {\n    let elements = this._parseNonEmptyDelimitedSeq(\n                     T_RBRACK, T_COMMA, prefix,\n                     () => this._parseExpression()\n                   );\n    let endPos = this._currentToken.startPos;\n    this._match(T_RBRACK);\n    let result = new ASTExprList(elements);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /* Read a range \"[first..last]\" or \"[first,second..last]\"\n   * assumming we are left to read \"..last]\"\n   * - startPos is the position of \"[\".\n   * - second may be null */\n  _parseExprRange(startPos, first, second) {\n    this._match(T_RANGE);\n    let last = this._parseExpression();\n    let endPos = this._currentToken.startPos;\n    this._match(T_RBRACK);\n    let result = new ASTExprRange(first, second, last);\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /* Read a list of expressions separated by commas and delimited\n   * by parentheses. If there is a single expression, return the\n   * expression itself. If there are 0 or >=2 expressions, return\n   * a tuple.\n   */\n  _parseExprTuple(possiblyEmpty) {\n    let startPos = this._currentToken.startPos;\n    this._match(T_LPAREN);\n    let expressionList = this._parseExpressionSeq(T_RPAREN);\n    let endPos = this._currentToken.startPos;\n    this._match(T_RPAREN);\n\n    if (!possiblyEmpty && expressionList === 0) {\n      fail(startPos, endPos, 'return-tuple-cannot-be-empty', []);\n    }\n\n    let result;\n    if (expressionList.length === 1) {\n      result = expressionList[0];\n    } else {\n      result = new ASTExprTuple(expressionList);\n    }\n    result.startPos = startPos;\n    result.endPos = endPos;\n    return result;\n  }\n\n  /** SwitchBranch **/\n\n  _parseSwitchBranches() {\n    let branches = [];\n    while (this._currentToken.tag !== T_RBRACE) {\n      branches.push(this._parseSwitchBranch());\n    }\n    return branches;\n  }\n\n  _parseSwitchBranch() {\n    let pattern = this._parsePattern();\n    this._match(T_ARROW);\n    let body = this._parseStmtBlock();\n    let result = new ASTSwitchBranch(pattern, body);\n    result.startPos = pattern.startPos;\n    result.endPos = body.endPos;\n    return result;\n  }\n\n  /** MatchingBranch **/\n\n  _parseMatchingBranches() {\n    let branches = [];\n    while (this._currentToken.tag !== T_OTHERWISE) {\n      branches.push(this._parseMatchingBranch());\n    }\n    this._match(T_OTHERWISE);\n    return branches;\n  }\n\n  _parseMatchingBranch() {\n    let body = this._parseExpression();\n    switch (this._currentToken.tag) {\n      case T_ON:\n        {\n          this._match(T_ON);\n          let pattern = this._parsePattern();\n          let result = new ASTMatchingBranch(pattern, body);\n          result.startPos = body.startPos;\n          result.endPos = pattern.endPos;\n          return result;\n        }\n      case T_OTHERWISE:\n        {\n          let pattern = new ASTPatternWildcard();\n          pattern.startPos = this._currentToken.startPos;\n          pattern.endPos = this._currentToken.endPos;\n          let result = new ASTMatchingBranch(pattern, body);\n          result.startPos = body.startPos;\n          result.endPos = this._currentToken.endPos;\n          return result;\n        }\n      default:\n        return fail(\n          this._currentToken.startPos, this._currentToken.endPos,\n          'expected-but-found', [\n            i18n('<alternative>')([\n              i18n('T_ON'),\n              i18n('T_OTHERWISE'),\n            ]),\n            i18n(Symbol.keyFor(this._currentToken.tag))\n          ]\n        );\n    }\n  }\n\n  /** FieldBinding **/\n\n  _parseFieldBinding() {\n    let fieldName = this._parseLowerid();\n    this._match(T_GETS);\n    let value = this._parseExpression();\n    let result = new ASTFieldBinding(fieldName, value);\n    result.startPos = fieldName.startPos;\n    result.endPos = value.endPos;\n    return result;\n  }\n\n  /** Helpers **/\n\n  /* Advance to the next token */\n  _nextToken() {\n    this._currentToken = this._lexer.nextToken();\n  }\n\n  /* Check that the current token has the expected tag.\n   * Then advance to the next token. */\n  _match(tokenTag) {\n    if (this._currentToken.tag !== tokenTag) {\n      fail(\n        this._currentToken.startPos, this._currentToken.endPos,\n        'expected-but-found', [\n          i18n(Symbol.keyFor(tokenTag)),\n          i18n(Symbol.keyFor(this._currentToken.tag))\n        ]\n      );\n    }\n    this._nextToken();\n  }\n\n  /* Check that the current token has the expected tag.\n   * Then advance to the next token.\n   * Otherwise report that any of the alternatives in the tagList\n   * was expected.\n   */\n  _matchExpected(tokenTag, tagList) {\n    if (this._currentToken.tag !== tokenTag) {\n      fail(\n        this._currentToken.startPos, this._currentToken.endPos,\n        'expected-but-found', [\n          i18n('<alternative>')(\n            tagList.map(tag => i18n(Symbol.keyFor(tag)))\n          ),\n          i18n(Symbol.keyFor(this._currentToken.tag))\n        ]\n      );\n    }\n    this._nextToken();\n  }\n\n  /* Parse a delimited list:\n   *   rightDelimiter: token tag for the right delimiter\n   *   separator: token tag for the separator\n   *   parseElement: function that parses one element */\n  _parseDelimitedSeq(rightDelimiter, separator, parseElement) {\n    if (this._currentToken.tag === rightDelimiter) {\n      return []; /* Empty case */\n    }\n    let first = parseElement();\n    return this._parseNonEmptyDelimitedSeq(\n             rightDelimiter, separator, [first], parseElement\n           );\n  }\n\n  /* Parse a delimited list, assuming the first elements are already given.\n   *   rightDelimiter: token tag for the right delimiter\n   *   separator: token tag for the separator\n   *   prefix: non-empty list of all the first elements (already given)\n   *   parseElement: function that parses one element */\n  _parseNonEmptyDelimitedSeq(rightDelimiter, separator, prefix, parseElement) {\n    let list = prefix;\n    while (this._currentToken.tag === separator) {\n      this._match(separator);\n      list.push(parseElement());\n    }\n    if (this._currentToken.tag !== rightDelimiter) {\n      fail(\n        this._currentToken.startPos, this._currentToken.endPos,\n        'expected-but-found', [\n          i18n('<alternative>')([\n            i18n(Symbol.keyFor(separator)),\n            i18n(Symbol.keyFor(rightDelimiter))\n          ]),\n          i18n(Symbol.keyFor(this._currentToken.tag))\n        ]\n      );\n    }\n    return list;\n  }\n\n  _parseLowerid() {\n    let lowerid = this._currentToken;\n    this._match(T_LOWERID);\n    return lowerid;\n  }\n\n  _parseUpperid() {\n    let upperid = this._currentToken;\n    this._match(T_UPPERID);\n    return upperid;\n  }\n\n  _parseLoweridSeq() {\n    return this._parseDelimitedSeq(\n             T_RPAREN, T_COMMA, () => this._parseLowerid()\n           );\n  }\n\n  /* Parse a list of expressions delimited by the given right delimiter\n   * e.g. T_RPAREN or T_RBRACK, without consuming the delimiter. */\n  _parseExpressionSeq(rightDelimiter) {\n    return this._parseDelimitedSeq(\n             rightDelimiter, T_COMMA, () => this._parseExpression()\n           );\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser.js","import { i18n } from './i18n';\nimport { GbsWarning, GbsSyntaxError } from './exceptions';\nimport { MultifileReader } from './reader';\nimport {\n  Token, T_EOF, T_NUM, T_STRING, T_LOWERID, T_UPPERID,\n  /* Keywords */\n  T_PROGRAM, T_INTERACTIVE, T_PROCEDURE, T_FUNCTION, T_RETURN,\n  T_IF, T_THEN, T_ELSEIF, T_ELSE,\n  T_CHOOSE, T_WHEN, T_OTHERWISE,\n  T_MATCHING, T_SELECT, T_ON,\n  T_REPEAT, T_FOREACH, T_IN, T_WHILE,\n  T_SWITCH, T_TO, T_LET, T_NOT, T_DIV, T_MOD, T_TYPE,\n  T_IS, T_RECORD, T_VARIANT, T_CASE, T_FIELD, T_UNDERSCORE,\n  T_TIMEOUT,\n  /* Symbols */\n  T_LPAREN, T_RPAREN, T_LBRACE, T_RBRACE, T_LBRACK, T_RBRACK, T_COMMA,\n  T_SEMICOLON, T_ELLIPSIS, T_RANGE, T_GETS, T_PIPE, T_ARROW, T_ASSIGN,\n  T_EQ, T_NE, T_LE, T_GE, T_LT, T_GT, T_AND, T_OR, T_CONCAT, T_PLUS,\n  T_MINUS, T_TIMES, T_POW\n} from './token';\n\nfunction isWhitespace(chr) {\n  return chr === ' '\n      || chr === '\\t'\n      || chr === '\\r'\n      || chr === '\\n';\n}\n\nfunction isDigit(chr) {\n  return '0' <= chr && chr <= '9';\n}\n\n/* We define a character to be alphabetic if it has two distinct forms:\n * an uppercase form and a lowercase form.\n *\n * This accepts alphabetic Unicode characters but rejects numbers and symbols.\n */\nfunction isAlpha(chr) {\n  return chr.toUpperCase(chr) !== chr.toLowerCase();\n}\n\n/* An uppercase character is an alphabetic character that coincides with\n * its uppercase form */\nfunction isUpper(chr) {\n  return isAlpha(chr) && chr.toUpperCase() === chr;\n}\n\n/* A lowercase character is an alphabetic character that coincides with\n * its lowercase form */\nfunction isLower(chr) {\n  return isAlpha(chr) && chr.toLowerCase() === chr;\n}\n\nfunction isIdent(chr) {\n  return isAlpha(chr) || isDigit(chr) || chr === '_' || chr === \"'\";\n}\n\nlet KEYWORDS = {\n  'program': T_PROGRAM,\n  'interactive': T_INTERACTIVE,\n  'procedure': T_PROCEDURE,\n  'function': T_FUNCTION,\n  'return': T_RETURN,\n  /* Control structures */\n  'if': T_IF,\n  'then': T_THEN,\n  'elseif': T_ELSEIF,\n  'else': T_ELSE,\n  'choose': T_CHOOSE,\n  'when': T_WHEN,\n  'otherwise': T_OTHERWISE,\n  'repeat': T_REPEAT,\n  'foreach': T_FOREACH,\n  'in': T_IN,\n  'while': T_WHILE,\n  'switch': T_SWITCH,\n  'to': T_TO,\n  'matching': T_MATCHING,\n  'select': T_SELECT,\n  'on': T_ON,\n  /* Assignment */\n  'let': T_LET,\n  /* Operators */\n  'not': T_NOT,\n  'div': T_DIV,\n  'mod': T_MOD,\n  /* Records/variants */\n  'type': T_TYPE,\n  'is': T_IS,\n  'record': T_RECORD,\n  'variant': T_VARIANT,\n  'case': T_CASE,\n  'field': T_FIELD,\n  /* Default case in a switch/match */\n  '_': T_UNDERSCORE,\n};\n\n/* Pattern for timeouts in an interactive program */\nKEYWORDS[i18n('CONS:TIMEOUT')] = T_TIMEOUT;\n\n/* Note: the order is relevant so that the 'maximal munch' rule applies. */\nconst SYMBOLS = [\n  /* Various delimiters */\n  ['(', T_LPAREN],\n  [')', T_RPAREN],\n  ['{', T_LBRACE],\n  ['}', T_RBRACE],\n  ['[', T_LBRACK],     // For lists and ranges\n  [']', T_RBRACK],\n  [',', T_COMMA],\n  [';', T_SEMICOLON],\n  ['...', T_ELLIPSIS], // For intentionally incomplete programs\n  /* Range operator */\n  ['..', T_RANGE],\n  /* Assignment */\n  [':=', T_ASSIGN],\n  /* Logical operators */\n  ['&&', T_AND],\n  ['||', T_OR],\n  /* Fields */\n  ['<-', T_GETS],      // Field initializer, e.g. Coord(x <- 1, y <- 2)\n  ['|', T_PIPE],       // Field update, e.g. Coord(c | x <- 2)\n  /* Pattern matching */\n  ['->', T_ARROW],     // For the branches of a switch\n  /* Relational operators */\n  ['==', T_EQ],\n  ['/=', T_NE],\n  ['<=', T_LE],\n  ['>=', T_GE],\n  ['<', T_LT],\n  ['>', T_GT],\n  /* Functions */\n  ['++', T_CONCAT],\n  ['+', T_PLUS],\n  ['-', T_MINUS],\n  ['*', T_TIMES],\n  ['^', T_POW]\n];\n\n/* Valid language options accepted by the LANGUAGE pragma */\nconst LANGUAGE_OPTIONS = [\n  'DestructuringForeach',\n  'AllowRecursion',\n];\n\nfunction leadingZeroes(string) {\n  return string.length >= 0 && string[0] === '0';\n}\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsSyntaxError(startPos, endPos, reason, args);\n}\n\nconst CLOSING_DELIMITERS = {\n  '(': ')',\n  '[': ']',\n  '{': '}',\n};\n\n/* An instance of Lexer scans source code for tokens.\n * Example:\n *\n *     let tok = new Lexer('if (a)');\n *     tok.nextToken(); // ~~> new Token(T_IF, null, ...)\n *     tok.nextToken(); // ~~> new Token(T_LPAREN, null, ...)\n *     tok.nextToken(); // ~~> new Token(T_LOWERID, 'a', ...)\n *     tok.nextToken(); // ~~> new Token(T_RPAREN, null, ...)\n *     tok.nextToken(); // ~~> new Token(T_EOF, null, ...)\n *\n * The 'input' parameter is either a string or a mapping\n * from filenames to strings.\n */\nexport class Lexer {\n\n  constructor(input) {\n    this._multifileReader = new MultifileReader(input);\n    this._reader = this._multifileReader.readCurrentFile();\n    this._warnings = [];\n\n    /* A stack of tokens '(', '[' and '{', to provide more helpful\n     * error reporting if delimiters are not balanced. */\n    this._delimiterStack = [];\n\n    /* A dictionary of pending attributes, set by the ATTRIBUTE pragma.\n     * Pending attributes are used by the parser to decorate any procedure\n     * or function definition. */\n    this._pendingAttributes = {};\n\n    /* A list of language options, enabled by the LANGUAGE pragma.\n     * Language options are interpreted by the runner to initialize.\n     * the remaining modules (linter, compiler, runtime, ...)\n     * accordingly. */\n    this._languageOptions = [];\n  }\n\n  /* Return the next token from the input */\n  nextToken() {\n    if (!this._findNextToken()) {\n      let token = new Token(T_EOF, null, this._reader, this._reader);\n      this._checkBalancedDelimiters(token);\n      return token;\n    }\n    if (isDigit(this._reader.peek())) {\n      let startPos = this._reader;\n      let value = this._readStringWhile(isDigit);\n      let endPos = this._reader;\n      if (leadingZeroes(value) && value.length > 1) {\n        return fail(\n          startPos, endPos,\n          'numeric-constant-should-not-have-leading-zeroes', []\n        );\n      }\n      return new Token(T_NUM, value, startPos, endPos);\n    } else if (isIdent(this._reader.peek())) {\n      let startPos = this._reader;\n      let value = this._readStringWhile(isIdent);\n      let endPos = this._reader;\n      if (value in KEYWORDS) {\n        return new Token(KEYWORDS[value], value, startPos, endPos);\n      } else if (isUpper(value[0])) {\n        return new Token(T_UPPERID, value, startPos, endPos);\n      } else if (isLower(value[0])) {\n        return new Token(T_LOWERID, value, startPos, endPos);\n      } else {\n        return fail(\n          startPos, endPos,\n          'identifier-must-start-with-alphabetic-character', []\n        );\n      }\n    } else if (this._reader.peek() === '\"') {\n      return this._readStringConstant();\n    } else {\n      return this._readSymbol();\n    }\n  }\n\n  /* When tokenization is done, this function returns the list of all\n   * the warnings collected during tokenization */\n  warnings() {\n    return this._warnings;\n  }\n\n  /* Skip whitespace and advance through files until the start of the next\n   * token is found. Return false if EOF is found. */\n  _findNextToken() {\n    for (;;) {\n      this._ignoreWhitespaceAndComments();\n      if (!this._reader.eof()) {\n        break;\n      }\n      if (this._multifileReader.moreFiles()) {\n        this._multifileReader.nextFile();\n        this._reader = this._multifileReader.readCurrentFile();\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /* Read a string while the given condition holds for the current\n   * character */\n  _readStringWhile(condition) {\n    let result = [];\n    while (!this._reader.eof()) {\n      if (!condition(this._reader.peek())) {\n        break;\n      }\n      result.push(this._reader.peek());\n      this._reader = this._reader.consumeCharacter();\n    }\n    return result.join('');\n  }\n\n  /* Reads a quote-delimited string constant.\n   * Escapes are recognized. */\n  _readStringConstant() {\n    let startPos = this._reader;\n    let result = [];\n    this._reader = this._reader.consumeCharacter();\n    while (!this._reader.eof()) {\n      let c = this._reader.peek();\n      if (c === '\"') {\n        this._reader = this._reader.consumeCharacter();\n        return new Token(T_STRING, result.join(''), startPos, this._reader);\n      } else if (c === '\\\\') {\n        this._reader = this._reader.consumeCharacter();\n        if (this._reader.eof()) {\n          break;\n        }\n        let c2 = this._reader.peek();\n        this._reader = this._reader.consumeCharacter();\n        switch (c2) {\n          case 'a':\n            result.push('\\u0007');\n            break;\n          case 'b':\n            result.push('\\u0008');\n            break;\n          case 'f':\n            result.push('\\u000c');\n            break;\n          case 'n':\n            result.push('\\u000a');\n            break;\n          case 'r':\n            result.push('\\u000d');\n            break;\n          case 't':\n            result.push('\\u0009');\n            break;\n          case 'v':\n            result.push('\\u000b');\n            break;\n          default:\n            result.push(c2);\n            break;\n        }\n      } else {\n        result.push(c);\n        this._reader = this._reader.consumeCharacter();\n      }\n    }\n    return fail(startPos, this._reader, 'unclosed-string-constant', []);\n  }\n\n  /* Read a symbol */\n  _readSymbol() {\n    for (let [symbol, tag] of SYMBOLS) {\n      if (this._reader.startsWith(symbol)) {\n        let startPos = this._reader;\n        this._reader = this._reader.consumeString(symbol);\n        let endPos = this._reader;\n        let token = new Token(tag, symbol, startPos, endPos);\n        this._checkBalancedDelimiters(token);\n        return token;\n      }\n    }\n    return fail(\n      this._reader, this._reader,\n      'unknown-token', [this._reader.peek()]\n    );\n  }\n\n  _ignoreWhitespaceAndComments() {\n    while (this._ignoreWhitespace() || this._ignoreComments()) {\n      /* continue */\n    }\n  }\n\n  _ignoreWhitespace() {\n    if (!this._reader.eof() && isWhitespace(this._reader.peek())) {\n      this._reader = this._reader.consumeCharacter();\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /* Skips comments and pragmas, returns false if there are no comments */\n  _ignoreComments() {\n    if (this._startSingleLineComment()) {\n      this._ignoreSingleLineComment();\n      return true;\n    } else if (this._reader.startsWith('/*@')) {\n      let startPos = this._reader;\n      this._evaluatePragma(startPos,\n                           this._readInvisiblePragma('/*', '*/', '@'));\n      return true;\n    } else if (this._reader.startsWith('{-')) {\n      this._ignoreMultilineComment('{-', '-}');\n      return true;\n    } else if (this._reader.startsWith('/*')) {\n      this._ignoreMultilineComment('/*', '*/');\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /* Returns true if a single-line comment starts here */\n  _startSingleLineComment() {\n    return this._reader.startsWith('--')\n        || this._reader.startsWith('//')\n        || this._reader.startsWith('#');\n  }\n\n  /* Skips a single-line comment */\n  _ignoreSingleLineComment() {\n    while (!this._reader.eof()) {\n      this._reader = this._reader.consumeCharacter();\n      if (this._reader.peek() === '\\n') {\n        break;\n      }\n    }\n  }\n\n  /* Skips a multiline comment with the given left/right delimiters.\n   * Multi-line comments may be nested. */\n  _ignoreMultilineComment(left, right) {\n    let nesting = 0;\n    let startPos = this._reader;\n    while (!this._reader.eof()) {\n      if (this._reader.startsWith(left)) {\n        this._reader = this._reader.consumeString(left);\n        nesting++;\n      } else if (this._reader.startsWith(right)) {\n        this._reader = this._reader.consumeString(right);\n        nesting--;\n        if (nesting === 0) {\n          return;\n        }\n      } else {\n        this._reader = this._reader.consumeCharacter();\n      }\n    }\n    fail(\n      startPos, this._reader,\n      'unclosed-multiline-comment', []\n    );\n  }\n\n  /* Read a pragma. A pragma is a comment delimited by the\n   * given left   / *\n   * and right    * /\n   * comment delimiters.\n   * It has N >= 0 parts delimited by the pragma delimiter   @\n   *   @part1@part2@...@partN@\n   */\n  _readInvisiblePragma(left, right, pragmaDelim) {\n    let pragma = [];\n    let startPos = this._reader;\n    this._reader = this._reader.consumeInvisibleString(left);\n    this._reader = this._reader.consumeInvisibleString(pragmaDelim);\n    while (!this._reader.eof()) {\n      pragma.push(this._readInvisibleStringUntilDelimiter(pragmaDelim));\n      this._reader = this._reader.consumeInvisibleString(pragmaDelim);\n      if (this._reader.startsWith(right)) {\n        this._reader = this._reader.consumeInvisibleString(right);\n        return pragma;\n      }\n    }\n    return fail(\n      startPos, this._reader,\n      'unclosed-multiline-comment', []\n    );\n  }\n\n  /* Read an invisible string until the given delimiter is found */\n  _readInvisibleStringUntilDelimiter(delimiter) {\n    let startPos = this._reader;\n    let result = [];\n    while (!this._reader.eof()) {\n      if (this._reader.peek() === delimiter) {\n        return result.join('');\n      }\n      result.push(this._reader.peek());\n      this._reader = this._reader.consumeInvisibleCharacter();\n    }\n    return fail(\n      startPos, this._reader,\n      'unclosed-multiline-comment', []\n    );\n  }\n\n  _evaluatePragma(startPos, pragma) {\n    if (pragma.length === 0) {\n      this._emitWarning(startPos, this._reader, 'empty-pragma', []);\n    } else if (pragma[0] === 'BEGIN_REGION') {\n      let region = pragma[1];\n      this._reader = this._reader.beginRegion(region);\n    } else if (pragma[0] === 'END_REGION') {\n      this._reader = this._reader.endRegion();\n    } else if (pragma[0] === 'ATTRIBUTE' && pragma.length >= 2) {\n      let key = pragma[1];\n      let value = pragma.slice(2, pragma.length).join('@');\n      this.setAttribute(key, value);\n    } else if (pragma[0] === 'LANGUAGE' && pragma.length === 2) {\n      let languageOption = pragma[1];\n      this.addLanguageOption(languageOption);\n    } else {\n      this._emitWarning(startPos, this._reader, 'unknown-pragma', [pragma[0]]);\n    }\n  }\n\n  _emitWarning(startPos, endPos, reason, args) {\n    this._warnings.push(new GbsWarning(startPos, endPos, reason, args));\n  }\n\n  /* Check that reading a delimiter keeps the delimiter stack balanced. */\n  _checkBalancedDelimiters(token) {\n    if (token.tag === T_EOF && this._delimiterStack.length > 0) {\n      let openingDelimiter = this._delimiterStack.pop();\n      fail(\n        openingDelimiter.startPos, openingDelimiter.endPos,\n        'unmatched-opening-delimiter',\n        [openingDelimiter.value]\n      );\n    } else if (token.tag === T_LPAREN\n            || token.tag === T_LBRACE\n            || token.tag === T_LBRACK) {\n      this._delimiterStack.push(token);\n    } else if (token.tag === T_RPAREN\n            || token.tag === T_RBRACE\n            || token.tag === T_RBRACK) {\n      if (this._delimiterStack.length === 0) {\n        fail(\n          token.startPos, token.endPos,\n          'unmatched-closing-delimiter',\n          [token.value]\n        );\n      }\n      let openingDelimiter = this._delimiterStack.pop();\n      if (CLOSING_DELIMITERS[openingDelimiter.value] !== token.value) {\n        fail(\n          openingDelimiter.startPos, openingDelimiter.endPos,\n          'unmatched-opening-delimiter',\n          [openingDelimiter.value]\n        );\n      }\n    }\n  }\n\n  /*\n   * Interface for handling attributes.\n   *\n   * The pragma ATTRIBUTE@key@value\n   * establishes the attribute given by <key> to <value>.\n   *\n   * Whenever the parser finds a definition of the following kinds:\n   *   procedure\n   *   function\n   *   program\n   *   interactive program\n   *   type\n   * it gets decorated with the pending attributes.\n   */\n  getPendingAttributes() {\n    let a = this._pendingAttributes;\n    this._pendingAttributes = {};\n    return a;\n  }\n\n  setAttribute(key, value) {\n    this._pendingAttributes[key] = value;\n  }\n\n  /*\n   * Interface for handling language options.\n   *\n   * The pragma LANGUAGE@option sets the given option.\n   *\n   * The runner module reads these options to initialize the\n   * linter/compiler/runtime.\n   */\n  getLanguageOptions() {\n    return this._languageOptions;\n  }\n\n  addLanguageOption(option) {\n    if (LANGUAGE_OPTIONS.indexOf(option) !== -1) {\n      this._languageOptions.push(option);\n    } else {\n      fail(this._reader, this._reader, 'unknown-language-option', [option]);\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lexer.js","\nimport {\n  N_Main,\n  /* Definitions */\n  N_DefProgram,\n  N_DefInteractiveProgram,\n  N_DefProcedure,\n  N_DefFunction,\n  N_DefType,\n  /* Statements */\n  N_StmtBlock,\n  N_StmtReturn,\n  N_StmtIf,\n  N_StmtRepeat,\n  N_StmtForeach,\n  N_StmtWhile,\n  N_StmtSwitch,\n  N_StmtAssignVariable,\n  N_StmtAssignTuple,\n  N_StmtProcedureCall,\n  /* Patterns */\n  N_PatternWildcard,\n  N_PatternVariable,\n  N_PatternNumber,\n  N_PatternStructure,\n  N_PatternTuple,\n  N_PatternTimeout,\n  /* Expressions */\n  N_ExprVariable,\n  N_ExprConstantNumber,\n  N_ExprConstantString,\n  N_ExprChoose,\n  N_ExprMatching,\n  N_ExprList,\n  N_ExprRange,\n  N_ExprTuple,\n  N_ExprStructure,\n  N_ExprStructureUpdate,\n  N_ExprFunctionCall,\n  /* SwitchBranch: pattern -> body */\n  N_SwitchBranch,\n  /* FieldValue: field <- value */\n  N_FieldValue,\n  /* ConstructorDeclaration */\n  N_ConstructorDeclaration,\n} from './ast';\nimport { LocalParameter, LocalIndex, LocalVariable } from './symtable';\nimport { GbsSyntaxError } from './exceptions';\nimport { i18n } from './i18n';\nimport { RecursionChecker } from './recursion_checker';\n\nfunction isBlockWithReturn(stmt) {\n  return stmt.tag === N_StmtBlock\n      && stmt.statements.length > 0\n      && stmt.statements.slice(-1)[0].tag === N_StmtReturn;\n}\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsSyntaxError(startPos, endPos, reason, args);\n}\n\n/* A semantic analyzer receives\n *   a symbol table (instance of SymbolTable)\n *   an abstract syntax tree (the output of a parser)\n *\n * Then:\n *\n * - It performs semantic checks (linting) to ensure that the\n *   program is well-formed.\n *\n * - It builds a symbol table with information on global identifiers\n *   such as procedures, functions, types, constructors, and fields.\n *\n * - The semantic analysis is structured as a recursive visit over the\n *   AST.\n *\n * We assume that the AST is the valid output of a parser.\n */\nexport class Linter {\n\n  constructor(symtable) {\n    this._symtable = symtable;\n\n    /* All checks performed by the linter have an entry in this dictionary.\n     * The value of a check indicates whether it is enabled (true) or\n     * disabled (false).\n     *\n     * If a check is disabled, it does not produce a syntax error.\n     */\n    this._enabledLinterChecks = {\n      // Linter options\n      'source-should-have-a-program-definition': true,\n      'procedure-should-not-have-return': true,\n      'function-should-have-return': true,\n      'return-statement-not-allowed-here': true,\n      'wildcard-pattern-should-be-last': true,\n      'variable-pattern-should-be-last': true,\n      'structure-pattern-repeats-constructor': true,\n      'structure-pattern-repeats-tuple-arity': true,\n      'structure-pattern-repeats-timeout': true,\n      'pattern-does-not-match-type': true,\n      'patterns-in-interactive-program-must-be-events': true,\n      'patterns-in-interactive-program-cannot-be-variables': true,\n      'patterns-in-switch-must-not-be-events': true,\n      'patterns-in-foreach-must-not-be-events': true,\n      'repeated-variable-in-tuple-assignment': true,\n      'constructor-used-as-procedure': true,\n      'undefined-procedure': true,\n      'procedure-arity-mismatch': true,\n      'numeric-pattern-repeats-number': true,\n      'structure-pattern-arity-mismatch': true,\n      'structure-construction-repeated-field': true,\n      'structure-construction-invalid-field': true,\n      'structure-construction-missing-field': true,\n      'structure-construction-cannot-be-an-event': true,\n      'undefined-function': true,\n      'function-arity-mismatch': true,\n      'type-used-as-constructor': true,\n      'procedure-used-as-constructor': true,\n      'undeclared-constructor': true,\n      // Extensions\n      'forbidden-extension-destructuring-foreach': true,\n      'forbidden-extension-allow-recursion': true,\n    };\n  }\n\n  lint(ast) {\n    this._lintMain(ast);\n    return this._symtable;\n  }\n\n  _ensureLintCheckExists(linterCheckId) {\n    if (!(linterCheckId in this._enabledLinterChecks)) {\n      throw Error('Linter check \"' + linterCheckId + '\" does not exist.');\n    }\n  }\n\n  enableCheck(linterCheckId, enabled) {\n    this._ensureLintCheckExists(linterCheckId);\n    this._enabledLinterChecks[linterCheckId] = enabled;\n  }\n\n  _lintCheck(startPos, endPos, reason, args) {\n    this._ensureLintCheckExists(reason);\n    if (this._enabledLinterChecks[reason]) {\n      fail(startPos, endPos, reason, args);\n    }\n  }\n\n  _lintMain(ast) {\n    /* Collect all definitions into the symbol table.\n     * This should be done all together, before linting individual\n     * definitions, so all the names of types, constructors, fields, etc.\n     * are already known when checking statements and expressions. */\n    for (let definition of ast.definitions) {\n      this._addDefinitionToSymbolTable(definition);\n    }\n\n    /* The source should either be empty or have exactly one program */\n    if (ast.definitions.length > 0 && this._symtable.program === null) {\n      this._lintCheck(\n        ast.startPos, ast.endPos,\n        'source-should-have-a-program-definition', []\n      );\n    }\n\n    /* Lint individual definitions */\n    for (let definition of ast.definitions) {\n      this._lintDefinition(definition);\n    }\n\n    /* Disable recursion */\n    this._disableRecursion(ast);\n  }\n\n  _addDefinitionToSymbolTable(definition) {\n    switch (definition.tag) {\n      case N_DefProgram:\n        return this._symtable.defProgram(definition);\n      case N_DefInteractiveProgram:\n        return this._symtable.defInteractiveProgram(definition);\n      case N_DefProcedure:\n        return this._symtable.defProcedure(definition);\n      case N_DefFunction:\n        return this._symtable.defFunction(definition);\n      case N_DefType:\n        return this._symtable.defType(definition);\n      default:\n        throw Error('Unknown definition: ' + Symbol.keyFor(definition.tag));\n    }\n  }\n\n  /** Definitions **/\n\n  _lintDefinition(definition) {\n    switch (definition.tag) {\n      case N_DefProgram:\n        return this._lintDefProgram(definition);\n      case N_DefInteractiveProgram:\n        return this._lintDefInteractiveProgram(definition);\n      case N_DefProcedure:\n        return this._lintDefProcedure(definition);\n      case N_DefFunction:\n        return this._lintDefFunction(definition);\n      case N_DefType:\n        return this._lintDefType(definition);\n      default:\n        throw Error(\n                'Linter: Definition not implemented: '\n              + Symbol.keyFor(definition.tag)\n              );\n    }\n  }\n\n  _lintDefProgram(definition) {\n    /* Lint body */\n    this._lintStmtBlock(definition.body, true /* allowReturn */);\n\n    /* Remove all local names */\n    this._symtable.exitScope();\n  }\n\n  _lintDefInteractiveProgram(definition) {\n    /* Lint all branches */\n    this._lintSwitchBranches(\n      definition.branches,\n      true /* isInteractiveProgram */\n    );\n  }\n\n  _lintDefProcedure(definition) {\n    /* Check that it does not have a return statement */\n    if (isBlockWithReturn(definition.body)) {\n      this._lintCheck(\n        definition.startPos, definition.endPos,\n        'procedure-should-not-have-return', [definition.name.value]\n      );\n    }\n\n    /* Add parameters as local names */\n    for (let parameter of definition.parameters) {\n      this._symtable.addNewLocalName(parameter, LocalParameter);\n    }\n\n    /* Lint body */\n    this._lintStmtBlock(definition.body, false /* !allowReturn */);\n\n    /* Remove all local names */\n    this._symtable.exitScope();\n  }\n\n  _lintDefFunction(definition) {\n    /* Check that it has a return statement */\n    if (!isBlockWithReturn(definition.body)) {\n      this._lintCheck(\n        definition.startPos, definition.endPos,\n        'function-should-have-return', [definition.name.value]\n      );\n    }\n\n    /* Add parameters as local names */\n    for (let parameter of definition.parameters) {\n      this._symtable.addNewLocalName(parameter, LocalParameter);\n    }\n\n    /* Lint body */\n    this._lintStmtBlock(definition.body, true /* allowReturn */);\n\n    /* Remove all local names */\n    this._symtable.exitScope();\n  }\n\n  _lintDefType(definition) {\n    /* No restrictions */\n  }\n\n  /** Statements **/\n\n  _lintStatement(statement) {\n    switch (statement.tag) {\n      case N_StmtBlock:\n        /* Do not allow return in nested blocks */\n        return this._lintStmtBlock(statement, false /* !allowReturn */);\n      case N_StmtReturn:\n        return this._lintStmtReturn(statement);\n      case N_StmtIf:\n        return this._lintStmtIf(statement);\n      case N_StmtRepeat:\n        return this._lintStmtRepeat(statement);\n      case N_StmtForeach:\n        return this._lintStmtForeach(statement);\n      case N_StmtWhile:\n        return this._lintStmtWhile(statement);\n      case N_StmtSwitch:\n        return this._lintStmtSwitch(statement);\n      case N_StmtAssignVariable:\n        return this._lintStmtAssignVariable(statement);\n      case N_StmtAssignTuple:\n        return this._lintStmtAssignTuple(statement);\n      case N_StmtProcedureCall:\n        return this._lintStmtProcedureCall(statement);\n      default:\n        throw Error(\n                'Linter: Statement not implemented: '\n              + Symbol.keyFor(statement.tag)\n              );\n    }\n  }\n\n  _lintStmtBlock(block, allowReturn) {\n    let i = 0;\n    for (let statement of block.statements) {\n      let returnAllowed = allowReturn && i === block.statements.length - 1;\n      if (!returnAllowed && statement.tag === N_StmtReturn) {\n        this._lintCheck(\n          statement.startPos, statement.endPos,\n          'return-statement-not-allowed-here', []\n        );\n      }\n      this._lintStatement(statement);\n      i++;\n    }\n  }\n\n  _lintStmtReturn(statement) {\n    this._lintExpression(statement.result);\n  }\n\n  _lintStmtIf(statement) {\n    this._lintExpression(statement.condition);\n    this._lintStatement(statement.thenBlock);\n    if (statement.elseBlock !== null) {\n      this._lintStatement(statement.elseBlock);\n    }\n  }\n\n  _lintStmtRepeat(statement) {\n    this._lintExpression(statement.times);\n    this._lintStatement(statement.body);\n  }\n\n  _lintStmtForeach(statement) {\n    this._lintStmtForeachPattern(statement.pattern);\n    this._lintExpression(statement.range);\n    for (let variable of statement.pattern.boundVariables) {\n      this._symtable.addNewLocalName(variable, LocalIndex);\n    }\n    this._lintStatement(statement.body);\n    for (let variable of statement.pattern.boundVariables) {\n      this._symtable.removeLocalName(variable);\n    }\n  }\n\n  _lintStmtForeachPattern(pattern) {\n    /* If \"DestructuringForeach\" is disabled, forbid complex patterns.\n     * Allow only variable patterns (indices). */\n    if (pattern.tag !== N_PatternVariable) {\n      this._lintCheck(\n        pattern.startPos, pattern.endPos,\n        'forbidden-extension-destructuring-foreach', []\n      );\n    }\n\n    /* Check that the pattern itself is well-formed */\n    this._lintPattern(pattern);\n\n    /* The pattern in a foreach cannot be an event */\n    let patternType = this._patternType(pattern);\n    if (patternType === i18n('TYPE:Event')) {\n      this._lintCheck(\n        pattern.startPos, pattern.endPos,\n        'patterns-in-foreach-must-not-be-events', []\n      );\n    }\n  }\n\n  _lintStmtWhile(statement) {\n    this._lintExpression(statement.condition);\n    this._lintStatement(statement.body);\n  }\n\n  _lintStmtSwitch(statement) {\n    this._lintExpression(statement.subject);\n    this._lintSwitchBranches(\n      statement.branches,\n      false /* !isInteractiveProgram */\n    );\n  }\n\n  _lintSwitchBranches(branches, isInteractiveProgram) {\n    this._lintBranches(branches, isInteractiveProgram, false /* isMatching */);\n  }\n\n  _lintBranches(branches, isInteractiveProgram, isMatching) {\n    /* Check that each pattern is well-formed */\n    for (let branch of branches) {\n      this._lintPattern(branch.pattern);\n    }\n\n    this._branchesCheckWildcardAndVariable(branches);\n    this._branchesCheckNoRepeats(branches);\n    this._branchesCheckCompatible(branches);\n    if (isInteractiveProgram) {\n      this._branchesCheckTypeEvent(branches);\n    } else {\n      this._branchesCheckTypeNotEvent(branches);\n    }\n\n    /* Lint recursively each branch */\n    for (let branch of branches) {\n      this._lintBranchBody(branch, isMatching);\n    }\n  }\n\n  /* Check that there is at most one wildcard/variable pattern at the end */\n  _branchesCheckWildcardAndVariable(branches) {\n    let i = 0;\n    const n = branches.length;\n    for (let branch of branches) {\n      if (branch.pattern.tag === N_PatternWildcard && i !== n - 1) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'wildcard-pattern-should-be-last', []\n        );\n      }\n      if (branch.pattern.tag === N_PatternVariable && i !== n - 1) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'variable-pattern-should-be-last', [branch.pattern.variableName.value]\n        );\n      }\n      i++;\n    }\n  }\n\n  /* Check that there are no repeated constructors in a sequence\n   * of branches. */\n  _branchesCheckNoRepeats(branches) {\n    let coveredNumbers = {};\n    let coveredConstructors = {};\n    let coveredTuples = {};\n    let coveredTimeout = false;\n    for (let branch of branches) {\n      switch (branch.pattern.tag) {\n        case N_PatternWildcard: case N_PatternVariable:\n          /* Already checked in _switchBranchesCheckWildcardAndVariable */\n          break;\n        case N_PatternNumber:\n          let number = branch.pattern.number.value;\n          if (number in coveredNumbers) {\n            this._lintCheck(\n              branch.pattern.startPos, branch.pattern.endPos,\n              'numeric-pattern-repeats-number', [number]\n            );\n          }\n          coveredNumbers[number] = true;\n          break;\n        case N_PatternStructure:\n          let constructorName = branch.pattern.constructorName.value;\n          if (constructorName in coveredConstructors) {\n            this._lintCheck(\n              branch.pattern.startPos, branch.pattern.endPos,\n              'structure-pattern-repeats-constructor', [constructorName]\n            );\n          }\n          coveredConstructors[constructorName] = true;\n          break;\n        case N_PatternTuple:\n          let arity = branch.pattern.boundVariables.length;\n          if (arity in coveredTuples) {\n            this._lintCheck(\n              branch.pattern.startPos, branch.pattern.endPos,\n              'structure-pattern-repeats-tuple-arity', [arity]\n            );\n          }\n          coveredTuples[arity] = true;\n          break;\n        case N_PatternTimeout:\n          if (coveredTimeout) {\n            this._lintCheck(\n              branch.pattern.startPos, branch.pattern.endPos,\n              'structure-pattern-repeats-timeout', []\n            );\n          }\n          coveredTimeout = true;\n          break;\n        default:\n          throw Error(\n                  'Linter: pattern \"'\n                + Symbol.keyFor(branch.pattern.tag)\n                + '\" not implemented.'\n                );\n      }\n    }\n  }\n\n  /* Check that constructors are compatible,\n   * i.e. that they belong to the same type */\n  _branchesCheckCompatible(branches) {\n    let expectedType = null;\n    for (let branch of branches) {\n      let patternType = this._patternType(branch.pattern);\n      if (expectedType === null) {\n        expectedType = patternType;\n      } else if (patternType !== null && expectedType !== patternType) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'pattern-does-not-match-type', [\n            i18n('<pattern-type>')(expectedType),\n            i18n('<pattern-type>')(patternType)\n          ]\n        );\n      }\n    }\n  }\n\n  /* Check that there are patterns are of type Event */\n  _branchesCheckTypeEvent(branches) {\n    for (let branch of branches) {\n      let patternType = this._patternType(branch.pattern);\n      if (patternType !== null && patternType !== i18n('TYPE:Event')) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'patterns-in-interactive-program-must-be-events', []\n        );\n      }\n      if (branch.pattern.tag === N_PatternVariable) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'patterns-in-interactive-program-cannot-be-variables', []\n        );\n      }\n    }\n  }\n\n  /* Check that there are no patterns of type Event */\n  _branchesCheckTypeNotEvent(branches) {\n    for (let branch of branches) {\n      let patternType = this._patternType(branch.pattern);\n      if (patternType === i18n('TYPE:Event')) {\n        this._lintCheck(\n          branch.pattern.startPos, branch.pattern.endPos,\n          'patterns-in-switch-must-not-be-events', []\n        );\n      }\n    }\n  }\n\n  /* Recursively lint the body of each branch. Locally bind variables. */\n  _lintBranchBody(branch, isMatching) {\n    for (let variable of branch.pattern.boundVariables) {\n      this._symtable.addNewLocalName(variable, LocalParameter);\n    }\n    if (isMatching) {\n      this._lintExpression(branch.body);\n    } else {\n      this._lintStatement(branch.body);\n    }\n    for (let variable of branch.pattern.boundVariables) {\n      this._symtable.removeLocalName(variable);\n    }\n  }\n\n  /* Return a description of the type of a pattern */\n  _patternType(pattern) {\n    switch (pattern.tag) {\n      case N_PatternWildcard: case N_PatternVariable:\n        return null;\n      case N_PatternNumber:\n        return i18n('TYPE:Integer');\n      case N_PatternStructure:\n        return this._symtable.constructorType(pattern.constructorName.value);\n      case N_PatternTuple:\n        return '_TUPLE_' + pattern.boundVariables.length.toString();\n      case N_PatternTimeout:\n        return i18n('TYPE:Event');\n      default:\n        throw Error(\n                'Linter: pattern \"'\n              + Symbol.keyFor(pattern.tag)\n              + '\" not implemented.'\n              );\n    }\n  }\n\n  _lintStmtAssignVariable(statement) {\n    this._symtable.setLocalName(statement.variable, LocalVariable);\n    this._lintExpression(statement.value);\n  }\n\n  _lintStmtAssignTuple(statement) {\n    let variables = {};\n    for (let variable of statement.variables) {\n      this._symtable.setLocalName(variable, LocalVariable);\n      if (variable.value in variables) {\n        this._lintCheck(\n          variable.startPos, variable.endPos,\n          'repeated-variable-in-tuple-assignment', [variable.value]\n        );\n      }\n      variables[variable.value] = true;\n    }\n    this._lintExpression(statement.value);\n  }\n\n  _lintStmtProcedureCall(statement) {\n    let name = statement.procedureName.value;\n\n    /* Check that it is a procedure */\n    if (!this._symtable.isProcedure(name)) {\n      if (this._symtable.isConstructor(name)) {\n        this._lintCheck(\n          statement.startPos, statement.endPos,\n          'constructor-used-as-procedure', [\n            name,\n            this._symtable.constructorType(name)\n          ]\n        );\n      } else {\n        this._lintCheck(\n          statement.startPos, statement.endPos,\n          'undefined-procedure', [name]\n        );\n      }\n    }\n\n    /* Check that the number of argument coincides */\n    let expected = this._symtable.procedureParameters(name).length;\n    let received = statement.args.length;\n    if (expected !== received) {\n      this._lintCheck(\n        statement.startPos, statement.endPos,\n        'procedure-arity-mismatch', [\n          name,\n          expected,\n          received\n        ]\n      );\n    }\n\n    /* Check all the arguments */\n    for (let argument of statement.args) {\n      this._lintExpression(argument);\n    }\n  }\n\n  /** Patterns **/\n\n  _lintPattern(pattern) {\n    switch (pattern.tag) {\n      case N_PatternWildcard:\n        return this._lintPatternWildcard(pattern);\n      case N_PatternVariable:\n        return this._lintPatternVariable(pattern);\n      case N_PatternNumber:\n        return this._lintPatternNumber(pattern);\n      case N_PatternStructure:\n        return this._lintPatternStructure(pattern);\n      case N_PatternTuple:\n        return this._lintPatternTuple(pattern);\n      case N_PatternTimeout:\n        return this._lintPatternTimeout(pattern);\n      default:\n        throw Error(\n                'Linter: pattern \"'\n               + Symbol.keyFor(pattern.tag)\n               + '\" not implemented.'\n              );\n    }\n  }\n\n  _lintPatternWildcard(pattern) {\n    /* No restrictions */\n  }\n\n  _lintPatternVariable(pattern) {\n    /* No restrictions */\n  }\n\n  _lintPatternNumber(pattern) {\n    /* No restrictions */\n  }\n\n  _lintPatternStructure(pattern) {\n    let name = pattern.constructorName.value;\n\n    /* Check that the constructor exists */\n    if (!this._symtable.isConstructor(name)) {\n      this._failExpectedConstructorButGot(    // throws\n          pattern.startPos, pattern.endPos, name\n      );\n      return;\n    }\n\n    /* Check that the number of parameters match.\n     * Note: constructor patterns with 0 arguments are always allowed.\n     */\n    let expected = this._symtable.constructorFields(name).length;\n    let received = pattern.boundVariables.length;\n    if (received > 0 && expected !== received) {\n      this._lintCheck(\n        pattern.startPos, pattern.endPos,\n        'structure-pattern-arity-mismatch', [\n          name,\n          expected,\n          received\n        ]\n      );\n    }\n  }\n\n  _lintPatternTuple(pattern) {\n    /* No restrictions */\n  }\n\n  _lintPatternTimeout(pattern) {\n    /* No restrictions */\n  }\n\n  /** Expressions **/\n\n  _lintExpression(expression) {\n    switch (expression.tag) {\n      case N_ExprVariable:\n        return this._lintExprVariable(expression);\n      case N_ExprConstantNumber:\n        return this._lintExprConstantNumber(expression);\n      case N_ExprConstantString:\n        return this._lintExprConstantString(expression);\n      case N_ExprChoose:\n        return this._lintExprChoose(expression);\n      case N_ExprMatching:\n        return this._lintExprMatching(expression);\n      case N_ExprList:\n        return this._lintExprList(expression);\n      case N_ExprRange:\n        return this._lintExprRange(expression);\n      case N_ExprTuple:\n        return this._lintExprTuple(expression);\n      case N_ExprStructure:\n        return this._lintExprStructure(expression);\n      case N_ExprStructureUpdate:\n        return this._lintExprStructureUpdate(expression);\n      case N_ExprFunctionCall:\n        return this._lintExprFunctionCall(expression);\n      default:\n        throw Error(\n                'Linter: Expression not implemented: '\n              + Symbol.keyFor(expression.tag)\n              );\n    }\n  }\n\n  _lintExprVariable(expression) {\n    /* No restrictions.\n     * Note: the restriction that a variable is defined before it is used\n     * is a dynamic constraint . */\n  }\n\n  _lintExprConstantNumber(expression) {\n    /* No restrictions */\n  }\n\n  _lintExprConstantString(expression) {\n    /* No restrictions */\n  }\n\n  _lintExprChoose(expression) {\n    this._lintExpression(expression.condition);\n    this._lintExpression(expression.trueExpr);\n    this._lintExpression(expression.falseExpr);\n  }\n\n  _lintExprMatching(expression) {\n    this._lintExpression(expression.subject);\n    this._lintMatchingBranches(expression.branches);\n  }\n\n  _lintMatchingBranches(branches) {\n    this._lintBranches(\n      branches,\n      false /* !isInteractiveProgram */,\n      true /* isMatching */\n    );\n  }\n\n  _lintExprList(expression) {\n    for (let element of expression.elements) {\n      this._lintExpression(element);\n    }\n  }\n\n  _lintExprRange(expression) {\n    this._lintExpression(expression.first);\n    if (expression.second !== null) {\n      this._lintExpression(expression.second);\n    }\n    this._lintExpression(expression.last);\n  }\n\n  _lintExprTuple(expression) {\n    for (let element of expression.elements) {\n      this._lintExpression(element);\n    }\n  }\n\n  _lintExprStructure(expression) {\n    this._lintExprStructureOrUpdate(expression, null);\n  }\n\n  _lintExprStructureUpdate(expression) {\n    this._lintExprStructureOrUpdate(expression, expression.original);\n  }\n\n  /* Check a structure construction: C(x1 <- e1, ..., xN <- eN)\n   * or a structure update: C(original | x1 <- e1, ..., xN <- eN).\n   *\n   * If original is null, it is a structure construction.\n   * If original is not null, it is the updated expression.\n   * */\n  _lintExprStructureOrUpdate(expression, original) {\n    /* Check that constructor exists */\n    let constructorName = expression.constructorName.value;\n    if (!this._symtable.isConstructor(constructorName)) {\n      this._failExpectedConstructorButGot(    // throws\n        expression.startPos, expression.endPos, constructorName\n      );\n      return;\n    }\n\n    this._checkStructureTypeNotEvent(constructorName, expression);\n    this._checkStructureNoRepeatedFields(constructorName, expression);\n    this._checkStructureBindingsCorrect(constructorName, expression);\n\n    /* If it is a structure construction, check that the fields are complete */\n    if (original === null) {\n      this._checkStructureBindingsComplete(constructorName, expression);\n    }\n\n    /* If it is an update, recursively check the original expression */\n    if (original !== null) {\n      this._lintExpression(original);\n    }\n\n    /* Recursively check expressions in field bindings */\n    for (let fieldBinding of expression.fieldBindings) {\n      this._lintExpression(fieldBinding.value);\n    }\n  }\n\n  /* Check that there are no repeated fields in a structure\n   * construction/update */\n  _checkStructureNoRepeatedFields(constructorName, expression) {\n    let declaredFields = expression.fieldNames();\n    let seen = {};\n    for (let fieldName of declaredFields) {\n      if (fieldName in seen) {\n        this._lintCheck(\n          expression.startPos, expression.endPos,\n          'structure-construction-repeated-field', [\n           constructorName,\n           fieldName\n          ]\n        );\n      }\n      seen[fieldName] = true;\n    }\n  }\n\n  /* Check that all bindings in a structure construction/update\n   * correspond to existing fields */\n  _checkStructureBindingsCorrect(constructorName, expression) {\n    let declaredFields = expression.fieldNames();\n    let constructorFields = this._symtable.constructorFields(constructorName);\n    for (let fieldName of declaredFields) {\n      if (constructorFields.indexOf(fieldName) === -1) {\n        this._lintCheck(\n          expression.startPos, expression.endPos,\n          'structure-construction-invalid-field', [\n           constructorName,\n           fieldName\n          ]\n        );\n      }\n    }\n  }\n\n  /* Check that bindings in a structure construction/update\n   * cover all existing fields */\n  _checkStructureBindingsComplete(constructorName, expression) {\n    let declaredFields = expression.fieldNames();\n    let constructorFields = this._symtable.constructorFields(constructorName);\n    for (let fieldName of constructorFields) {\n      if (declaredFields.indexOf(fieldName) === -1) {\n        this._lintCheck(\n          expression.startPos, expression.endPos,\n          'structure-construction-missing-field', [\n           constructorName,\n           fieldName\n          ]\n        );\n      }\n    }\n  }\n\n  /* Check that a structure construction/update does not involve\n   * constructors of the Event type, which should only be\n   * handled implicitly in an interactive program. */\n  _checkStructureTypeNotEvent(constructorName, expression) {\n    let constructorType = this._symtable.constructorType(constructorName);\n    if (constructorType === i18n('TYPE:Event')) {\n      this._lintCheck(\n        expression.startPos, expression.endPos,\n        'structure-construction-cannot-be-an-event', [constructorName]\n      );\n    }\n  }\n\n  _lintExprFunctionCall(expression) {\n    /* Check that it is a function or a field */\n    let name = expression.functionName.value;\n    if (!this._symtable.isFunction(name) && !this._symtable.isField(name)) {\n      this._lintCheck(\n        expression.startPos, expression.endPos,\n        'undefined-function', [name]\n      );\n    }\n\n    /* Check that the number of argument coincides */\n    let expected;\n    if (this._symtable.isFunction(name)) {\n      expected = this._symtable.functionParameters(name).length;\n    } else {\n      /* Fields always have exactly one parameter */\n      expected = 1;\n    }\n    let received = expression.args.length;\n    if (expected !== received) {\n      this._lintCheck(\n        expression.startPos, expression.endPos,\n        'function-arity-mismatch', [\n          name,\n          expected,\n          received\n        ]\n      );\n    }\n\n    /* Recursively check arguments */\n    for (let argument of expression.args) {\n      this._lintExpression(argument);\n    }\n  }\n\n  _disableRecursion(ast) {\n    if (this._enabledLinterChecks['forbidden-extension-allow-recursion']) {\n      let cycle = new RecursionChecker().callCycle(ast);\n      if (cycle !== null) {\n        this._lintCheck(\n          cycle[0].location.startPos, cycle[0].location.endPos,\n          'forbidden-extension-allow-recursion', [cycle]\n        );\n      }\n    }\n  }\n\n  /* Throw a syntax error indicating that we expected the name of a\n   * constructor, but we got a name which is not a constructor.\n   *\n   * If the name is a type or a procedure, provide a more helpful\n   * error message. (Coinciding constructor and procedure names are\n   * not forbidden, but it is probably a mistake). */\n  _failExpectedConstructorButGot(startPos, endPos, name) {\n    if (this._symtable.isType(name)) {\n      this._lintCheck(\n        startPos, endPos,\n        'type-used-as-constructor', [\n          name,\n          this._symtable.typeConstructors(name)\n        ]\n      );\n    } else if (this._symtable.isProcedure(name)) {\n      this._lintCheck(\n        startPos, endPos,\n        'procedure-used-as-constructor', [name]\n      );\n    } else {\n      this._lintCheck(\n        startPos, endPos,\n        'undeclared-constructor', [name]\n      );\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/linter.js","\nimport {\n  N_DefProgram,\n  N_DefInteractiveProgram,\n  N_DefProcedure,\n  N_DefFunction,\n  N_StmtProcedureCall,\n  N_ExprFunctionCall,\n} from './ast';\nimport { Token } from './token';\n\nexport class RecursionChecker {\n\n  /*\n   * Each routine call (i.e. procedure or function call) in the source\n   * code is of the form:\n   *    R(e1, ..., en)\n   * where R is the identifier for the routine.\n   *\n   * The token R is called the 'location' of the call.\n   * Observe that the location includes not only the name of the\n   * routine but also its position in the source code.\n   *\n   * The call graph is a dictionary whose keys are strings\n   * and whose values are again dictionaries.\n   * The outer and the inner dictionaries are indexed by routine names\n   * in such a way that:\n   *\n   *   _callGraph[F][G]\n   *\n   * is the location of the first call to G inside the body of F.\n   */\n  constructor() {\n    this._currentRoutine = null;\n    this._callGraph = {};\n  }\n\n  /*\n   * If there is a cycle in the call graph (using either procedure calls\n   * or function calls), return a list:\n   *   [c1, ..., cn]\n   * where ci is the i-th call involved in a cycle.\n   * A call is of the form:\n   *   {caller: F , callee: G, location: L}\n   * where F is the name (string) of the caller,\n   *       G is the name (string) of the callee,\n   *   and L is the location of the call.\n   *\n   * Otherwise return null.\n   */\n  callCycle(ast) {\n    /* Build the call graph */\n    this._visitNode(ast);\n\n    /* Find a cycle in the call graph */\n    return this._findCallCycle();\n  }\n\n  /* Visitor -- build the call graph */\n\n  _addEdge(caller, callee) {\n    if (!(caller in this._callGraph)) {\n      this._callGraph[caller] = {};\n    }\n    if (!(callee.value in this._callGraph[caller])) {\n      this._callGraph[caller][callee.value] = callee;\n    }\n  }\n\n  _visitNode(node) {\n    if (node === null || node instanceof Token) {\n      /* Skip */\n    } else if (node instanceof Array) {\n      this._visitNodes(node);\n    } else {\n      this._visitTaggedNode(node);\n    }\n  }\n\n  _visitNodes(nodes) {\n    for (let node of nodes) {\n      this._visitNode(node);\n    }\n  }\n\n  _visitTaggedNode(node) {\n    switch (node.tag) {\n    case N_DefProgram:\n    case N_DefInteractiveProgram:\n      this._visitProgramDefinition(node);\n      break;\n    case N_DefProcedure:\n    case N_DefFunction:\n      this._visitRoutineDefinition(node);\n      break;\n    case N_StmtProcedureCall:\n      this._visitProcedureCall(node);\n      break;\n    case N_ExprFunctionCall:\n      this._visitFunctionCall(node);\n      break;\n    }\n    this._visitNodes(node.children);\n  }\n\n  _visitProgramDefinition(node) {\n    this._currentRoutine = 'program';\n  }\n\n  _visitRoutineDefinition(node) {\n    this._currentRoutine = node.name.value;\n  }\n\n  _visitProcedureCall(node) {\n    this._addEdge(this._currentRoutine, node.procedureName);\n  }\n\n  _visitFunctionCall(node) {\n    this._addEdge(this._currentRoutine, node.functionName);\n  }\n\n  /* Find a cycle in the call graph */\n\n  _findCallCycle() {\n    let visited = {};\n    let parents = {};\n    for (let f in this._callGraph) {\n      visited[f] = true;\n      parents[f] = true;\n      let cycle = this._findCallCycleFrom(visited, parents, [], f);\n      if (cycle != null) {\n        return cycle;\n      }\n      delete parents[f];\n    }\n    return null;\n  }\n\n  _findCallCycleFrom(visited, parents, path, f) {\n    for (let g in this._callGraph[f]) {\n      path.push({\n        'caller': f,\n        'callee': g,\n        'location': this._callGraph[f][g]\n      });\n      if (g in parents) {\n        while (path[0].caller !== g) {\n          path.shift();\n        }\n        path.push();\n        return path; /* Cycle */\n      }\n      if (!(g in visited)) {\n        visited[g] = true;\n        parents[g] = true;\n        let cycle = this._findCallCycleFrom(visited, parents, path, g);\n        if (cycle !== null) {\n          return cycle;\n        }\n        delete parents[g];\n      }\n      path.pop();\n    }\n    return null;\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/recursion_checker.js","import {\n  N_Main,\n  /* Definitions */\n  N_DefProgram,\n  N_DefInteractiveProgram,\n  N_DefProcedure,\n  N_DefFunction,\n  N_DefType,\n  /* Statements */\n  N_StmtBlock,\n  N_StmtReturn,\n  N_StmtIf,\n  N_StmtRepeat,\n  N_StmtForeach,\n  N_StmtWhile,\n  N_StmtSwitch,\n  N_StmtAssignVariable,\n  N_StmtAssignTuple,\n  N_StmtProcedureCall,\n  /* Patterns */\n  N_PatternWildcard,\n  N_PatternVariable,\n  N_PatternNumber,\n  N_PatternStructure,\n  N_PatternTuple,\n  N_PatternTimeout,\n  /* Expressions */\n  N_ExprVariable,\n  N_ExprConstantNumber,\n  N_ExprConstantString,\n  N_ExprChoose,\n  N_ExprMatching,\n  N_ExprList,\n  N_ExprRange,\n  N_ExprTuple,\n  N_ExprStructure,\n  N_ExprStructureUpdate,\n  N_ExprFunctionCall,\n  /* SwitchBranch: pattern -> body */\n  N_SwitchBranch,\n  /* MatchingBranch: pattern -> body */\n  N_MatchingBranch,\n  /* FieldValue: field <- value */\n  N_FieldValue,\n  /* ConstructorDeclaration */\n  N_ConstructorDeclaration,\n} from './ast';\nimport {\n  IPushInteger,\n  IPushString,\n  IPushVariable,\n  ISetVariable,\n  IUnsetVariable,\n  ILabel,\n  IJump,\n  IJumpIfFalse,\n  IJumpIfStructure,\n  IJumpIfTuple,\n  ICall,\n  IReturn,\n  IMakeTuple,\n  IMakeList,\n  IMakeStructure,\n  IUpdateStructure,\n  IReadTupleComponent,\n  IReadStructureField,\n  IReadStructureFieldPop,\n  IDup,\n  IPop,\n  IPrimitiveCall,\n  ISaveState,\n  IRestoreState,\n  ITypeCheck,\n  Code\n} from './instruction';\nimport {\n  TypeAny,\n  TypeInteger,\n  TypeTuple,\n  TypeStructure,\n  TypeList,\n} from './value';\nimport { RuntimePrimitives } from './runtime';\nimport { i18n } from './i18n';\n\n/*\n * A compiler receives a symbol table (instance of SymbolTable).\n *\n * The method this.compile(ast) receives an abstract syntax tree\n * (the output of a parser).\n *\n * The AST is expected to have been linted against the given symbol table.\n *\n * The compiler produces an instance of Code, representing code for the\n * virtual machine.\n *\n * Compiling a program should never throw an exception.\n * Exceptions thrown in this module correspond to assertions,\n * i.e. internal errors that should never occur.\n * - Static conditions should be checked beforehand during the\n *   parsing and linting phases.\n * - Runtime conditions are to be checked later, during execution.\n */\nexport class Compiler {\n\n  constructor(symtable) {\n    this._symtable = symtable;\n    this._code = new Code([]);\n    this._nextLabel = 0;\n    this._nextVariable = 0;\n    this._primitives = new RuntimePrimitives();\n  }\n\n  compile(ast) {\n    this._compileMain(ast);\n    return this._code;\n  }\n\n  _compileMain(ast) {\n    /* Accept the empty source */\n    if (ast.definitions.length === 0) {\n      this._produce(ast.startPos, ast.endPos,\n        new IReturn()\n      );\n      return;\n    }\n\n    /* Compile the program (or interactive program) */\n    for (let definition of ast.definitions) {\n      if (definition.tag === N_DefProgram) {\n        this._compileDefProgram(definition);\n      } else if (definition.tag === N_DefInteractiveProgram) {\n        this._compileDefInteractiveProgram(definition);\n      }\n    }\n\n    /* Compile procedures and functions */\n    for (let definition of ast.definitions) {\n      if (definition.tag === N_DefProcedure) {\n        this._compileDefProcedure(definition);\n      } else if (definition.tag === N_DefFunction) {\n        this._compileDefFunction(definition);\n      }\n    }\n  }\n\n  _compileDefProgram(definition) {\n    this._compileStatement(definition.body);\n    this._produce(definition.startPos, definition.endPos,\n      new IReturn()\n    );\n  }\n\n  /* An interactive program is compiled as a switch statement\n   * followed by a Return instruction. */\n  _compileDefInteractiveProgram(definition) {\n    this._compileMatchBranches(definition, false /* isMatching */);\n    this._produce(\n      definition.startPos, definition.endPos,\n      new IReturn()\n    );\n  }\n\n  /* A procedure definition:\n   *\n   *   procedure P(x1, ..., xN) {\n   *     <body>\n   *   }\n   *\n   * is compiled as follows:\n   *\n   *   P:\n   *     SetVariable x1\n   *     ...\n   *     SetVariable xN\n   *     <body>\n   *     Return\n   */\n  _compileDefProcedure(definition) {\n    this._produce(\n      definition.startPos, definition.endPos,\n      new ILabel(definition.name.value)\n    );\n    for (let i = 0; i < definition.parameters.length; i++) {\n      let parameterName = definition.parameters[i].value;\n      this._produce(\n        definition.startPos, definition.endPos,\n        new ISetVariable(parameterName)\n      );\n    }\n    this._compileStatement(definition.body);\n    this._produce(\n      definition.startPos, definition.endPos,\n      new IReturn()\n    );\n  }\n\n  /* A function definition:\n   *\n   *   function f(x1, ..., xN) {\n   *     <body>\n   *   }\n   *\n   * is compiled as follows:\n   *\n   *   f:\n   *     SaveState\n   *     SetVariable x1\n   *     ...\n   *     SetVariable xN\n   *     <body>\n   *     RestoreState\n   *     Return\n   */\n  _compileDefFunction(definition) {\n    this._produceList(definition.startPos, definition.endPos, [\n      new ILabel(definition.name.value),\n      new ISaveState(),\n    ]);\n    for (let i = 0; i < definition.parameters.length; i++) {\n      let parameterName = definition.parameters[i].value;\n      this._produce(\n        definition.startPos, definition.endPos,\n        new ISetVariable(parameterName)\n      );\n    }\n    this._compileStatement(definition.body);\n    this._produceList(definition.startPos, definition.endPos, [\n      new IRestoreState(),\n      new IReturn(),\n    ]);\n  }\n\n  /* Statements are compiled to VM instructions that start and end\n   * with an empty local stack. The stack may grow and shrink during the\n   * execution of a statement, but it should be empty by the end.\n   *\n   * The only exception to this rule is the \"return\" statement, which\n   * pushes a single value on the stack.\n   */\n  _compileStatement(statement) {\n    switch (statement.tag) {\n      case N_StmtBlock:\n        return this._compileStmtBlock(statement);\n      case N_StmtReturn:\n        return this._compileStmtReturn(statement);\n      case N_StmtIf:\n        return this._compileStmtIf(statement);\n      case N_StmtRepeat:\n        return this._compileStmtRepeat(statement);\n      case N_StmtForeach:\n        return this._compileStmtForeach(statement);\n      case N_StmtWhile:\n        return this._compileStmtWhile(statement);\n      case N_StmtSwitch:\n        return this._compileStmtSwitch(statement);\n      case N_StmtAssignVariable:\n        return this._compileStmtAssignVariable(statement);\n      case N_StmtAssignTuple:\n        return this._compileStmtAssignTuple(statement);\n      case N_StmtProcedureCall:\n        return this._compileStmtProcedureCall(statement);\n      default:\n        throw Error(\n                'Compiler: Statement not implemented: '\n              + Symbol.keyFor(statement.tag)\n              );\n    }\n  }\n\n  _compileStmtBlock(block) {\n    for (let statement of block.statements) {\n      this._compileStatement(statement);\n    }\n  }\n\n  /* Merely push the return value in the stack.\n   * The \"new IReturn()\" instruction itself is produced by the\n   * methods:\n   *   _compileDefProgram\n   *   _compileDefInteractiveProgram\n   *   _compileDefProcedure\n   *   _compileDefFunction\n   * */\n  _compileStmtReturn(statement) {\n    return this._compileExpression(statement.result);\n  }\n\n  /*\n   * If without else:\n   *\n   *   <condition>\n   *   TypeCheck Bool\n   *   JumpIfFalse labelElse\n   *   <thenBranch>\n   *   labelElse:\n   *\n   * If with else:\n   *\n   *   <condition>\n   *   TypeCheck Bool\n   *   JumpIfFalse labelElse\n   *   <thenBranch>\n   *   Jump labelEnd\n   *   labelElse:\n   *   <elseBranch>\n   *   labelEnd:\n   */\n  _compileStmtIf(statement) {\n    this._compileExpression(statement.condition);\n    this._produce(statement.condition.startPos, statement.condition.endPos,\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {}))\n    );\n    let labelElse = this._freshLabel();\n    this._produce(statement.startPos, statement.endPos,\n      new IJumpIfFalse(labelElse)\n    );\n    this._compileStatement(statement.thenBlock);\n    if (statement.elseBlock === null) {\n      this._produce(statement.startPos, statement.endPos,\n        new ILabel(labelElse)\n      );\n    } else {\n      let labelEnd = this._freshLabel();\n      this._produceList(statement.startPos, statement.endPos, [\n        new IJump(labelEnd),\n        new ILabel(labelElse),\n      ]);\n      this._compileStatement(statement.elseBlock);\n      this._produce(statement.startPos, statement.endPos,\n        new ILabel(labelEnd)\n      );\n    }\n  }\n\n  /* <times>\n   * TypeCheck Integer\n   * labelStart:\n   *   Dup                     ;\\\n   *   PushInteger 0           ;| if not positive, end\n   *   PrimitiveCall \">\", 2    ;|\n   *   JumpIfFalse labelEnd    ;/\n   *   <body>\n   *   PushInteger 1           ;\\ subtract 1\n   *   PrimitiveCall \"-\", 2    ;/\n   * Jump labelStart\n   * labelEnd:\n   * Pop                       ; pop the remaining number\n   */\n  _compileStmtRepeat(statement) {\n    this._compileExpression(statement.times);\n    this._produce(statement.times.startPos, statement.times.endPos,\n      new ITypeCheck(new TypeInteger())\n    );\n    let labelStart = this._freshLabel();\n    let labelEnd = this._freshLabel();\n    this._produceList(statement.startPos, statement.endPos, [\n      new ILabel(labelStart),\n      new IDup(),\n      new IPushInteger(0),\n      new IPrimitiveCall('>', 2),\n      new IJumpIfFalse(labelEnd),\n    ]);\n    this._compileStatement(statement.body);\n    this._produceList(statement.startPos, statement.endPos, [\n      new IPushInteger(1),\n      new IPrimitiveCall('-', 2),\n      new IJump(labelStart),\n      new ILabel(labelEnd),\n      new IPop(),\n    ]);\n  }\n\n  /* <range>                   ;\\ _list = temporary variable\n   * TypeCheck List(Any)       ;| holding the list we are ranging over\n   * SetVariable _list         ;/\n   *\n   * PushVariable _list                    ;\\ _n = temporary variable\n   * PrimitiveCall \"_unsafeListLength\", 1  ;| holding the total length\n   * SetVariable _n                        ;/ of the list\n   *\n   * PushInteger 0             ;\\ _pos = temporary variable holding the\n   * SetVariable _pos          ;/ current index inside the list\n   *\n   * labelStart:\n   *   PushVariable _pos       ;\\\n   *   PushVariable _n         ;| if out of the bounds of the list, end\n   *   PrimitiveCall \"<\", 2    ;|\n   *   JumpIfFalse labelEnd    ;/\n   *\n   *   PushVariable _list                    ;\\ get the `pos`-th element of the\n   *   PushVariable _pos                     ;| list and match the value\n   *   PrimitiveCall \"_unsafeListNth\", 2     ;| with the pattern of the foreach\n   *   [match with the pattern or fail]      ;/\n   *\n   *   <body>\n   *\n   *   PushVariable _pos       ;\\\n   *   PushInteger 1           ;| add 1 to the current index\n   *   PrimitiveCall \"+\", 2    ;|\n   *   SetVariable _pos        ;/\n   *\n   * Jump labelStart\n   * labelEnd:\n   * UnsetVariable _list\n   * UnsetVariable _n\n   * UnsetVariable _pos\n   * [unset all the variables bound by the pattern]\n   */\n  _compileStmtForeach(statement) {\n    let labelStart = this._freshLabel();\n    let labelEnd = this._freshLabel();\n    let list = this._freshVariable();\n    let pos = this._freshVariable();\n    let n = this._freshVariable();\n\n    this._compileExpression(statement.range);\n    this._produceList(statement.range.startPos, statement.range.endPos, [\n      new ITypeCheck(new TypeList(new TypeAny())),\n      new ISetVariable(list),\n\n      new IPushVariable(list),\n      new IPrimitiveCall('_unsafeListLength', 1),\n      new ISetVariable(n),\n    ]);\n    this._produceList(statement.startPos, statement.endPos, [\n      new IPushInteger(0),\n      new ISetVariable(pos),\n\n      new ILabel(labelStart),\n      new IPushVariable(pos),\n      new IPushVariable(n),\n      new IPrimitiveCall('<', 2),\n      new IJumpIfFalse(labelEnd),\n\n      new IPushVariable(list),\n      new IPushVariable(pos),\n      new IPrimitiveCall('_unsafeListNth', 2),\n    ]);\n    this._compileMatchForeachPatternOrFail(statement.pattern);\n    this._compileStatement(statement.body);\n    this._produceList(statement.startPos, statement.endPos, [\n      new IPushVariable(pos),\n      new IPushInteger(1),\n      new IPrimitiveCall('+', 2),\n      new ISetVariable(pos),\n\n      new IJump(labelStart),\n\n      new ILabel(labelEnd),\n      new IUnsetVariable(list),\n      new IUnsetVariable(n),\n      new IUnsetVariable(pos),\n    ]);\n    this._compilePatternUnbind(statement.pattern);\n  }\n\n  /* Attempt to match the pattern against the top of the stack.\n   * If the pattern matches, bind its variables.\n   * Otherwise, issue an error message.\n   * Always pops the top of the stack.\n   */\n  _compileMatchForeachPatternOrFail(pattern) {\n    switch (pattern.tag) {\n      case N_PatternWildcard:\n        this._produce(pattern.startPos, pattern.endPos, new IPop());\n        return;\n      case N_PatternVariable:\n        this._produce(pattern.startPos, pattern.endPos,\n          new ISetVariable(pattern.variableName.value)\n        );\n        return;\n      default:\n        /* Attempt to match, issuing an error message if there is no match:\n         *\n         *   [if subject matches pattern, jump to L]\n         *   [error message: no match]\n         * L:\n         *   [bind pattern to subject]\n         *   [pop subject]\n         */\n        let label = this._freshLabel();\n        this._compilePatternCheck(pattern, label);\n        this._produceList(pattern.startPos, pattern.endPos, [\n          new IPushString('foreach-pattern-does-not-match'),\n          new IPrimitiveCall('_FAIL', 1),\n          new ILabel(label),\n        ]);\n        this._compilePatternBind(pattern);\n        this._produce(pattern.startPos, pattern.endPos, new IPop());\n        return;\n    }\n  }\n\n  /* labelStart:\n   * <condition>\n   * TypeCheck Bool\n   * JumpIfFalse labelEnd\n   * <body>\n   * Jump labelStart\n   * labelEnd:\n   */\n  _compileStmtWhile(statement) {\n    let labelStart = this._freshLabel();\n    let labelEnd = this._freshLabel();\n    this._produce(statement.startPos, statement.endPos,\n      new ILabel(labelStart)\n    );\n    this._compileExpression(statement.condition);\n    this._produceList(statement.startPos, statement.endPos, [\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {})),\n      new IJumpIfFalse(labelEnd),\n    ]);\n    this._compileStatement(statement.body);\n    this._produceList(statement.startPos, statement.endPos, [\n      new IJump(labelStart),\n      new ILabel(labelEnd),\n    ]);\n  }\n\n  /* If the branches of the switch are:\n   *    pattern1 -> body1\n   *    ...      -> ...\n   *    patternN -> bodyN\n   * the switch construction is compiled as follows:\n   *\n   * <subject>\n   *   [if matches pattern1, jump to label1]\n   *   ...\n   *   [if matches patternN, jump to labelN]\n   *   [error message: no match]\n   *\n   * label1:\n   *   [bind parameters in pattern1]\n   *   [pop subject]\n   *   <body1>\n   *   [unbind parameters in pattern1]\n   *   Jump labelEnd\n   * ...\n   * labelN:\n   *   [bind parameters in patternN]\n   *   [pop subject]\n   *   <bodyN>\n   *   [unbind parameters in patternN]\n   *   Jump labelEnd\n   * labelEnd:\n   */\n  _compileStmtSwitch(statement) {\n    /* Compile the subject */\n    this._compileExpression(statement.subject);\n    this._compileMatchBranches(statement, false /* !isMatching */);\n  }\n\n  _compileMatchBranches(statement, isMatching) {\n    let branchLabels = [];\n    /* Attempt to match each pattern */\n    for (let branch of statement.branches) {\n      let label = this._freshLabel();\n      branchLabels.push(label);\n      this._compilePatternCheck(branch.pattern, label);\n    }\n\n    /* Issue an error message if there is no match */\n    this._produceList(statement.startPos, statement.endPos, [\n      new IPushString('switch-does-not-match'),\n      new IPrimitiveCall('_FAIL', 1),\n    ]);\n\n    /* Compile each branch */\n    let labelEnd = this._freshLabel();\n    for (let i = 0; i < branchLabels.length; i++) {\n      let branch = statement.branches[i];\n      let label = branchLabels[i];\n      this._produce(branch.startPos, branch.endPos, new ILabel(label));\n      this._compilePatternBind(branch.pattern);\n      this._produce(branch.startPos, branch.endPos, new IPop());\n      if (isMatching) {\n        this._compileExpression(branch.body);\n      } else {\n        this._compileStatement(branch.body);\n      }\n      this._compilePatternUnbind(branch.pattern);\n      this._produce(branch.startPos, branch.endPos, new IJump(labelEnd));\n    }\n    this._produce(\n      statement.startPos, statement.endPos,\n      new ILabel(labelEnd)\n    );\n  }\n\n  _compileStmtAssignVariable(statement) {\n    this._compileExpression(statement.value);\n    this._produce(statement.startPos, statement.endPos,\n      new ISetVariable(statement.variable.value)\n    );\n  }\n\n  _compileStmtAssignTuple(statement) {\n    this._compileExpression(statement.value);\n\n    /* Check that the value is indeed a tuple of the expected length */\n    let anys = [];\n    for (let index = 0; index < statement.variables.length; index++) {\n      anys.push(new TypeAny());\n    }\n    let expectedType = new TypeTuple(anys);\n    this._produce(\n      statement.startPos, statement.endPos,\n      new ITypeCheck(expectedType)\n    );\n\n    /* Assign each variable */\n    for (let index = 0; index < statement.variables.length; index++) {\n      this._produceList(statement.startPos, statement.endPos, [\n        new IReadTupleComponent(index),\n        new ISetVariable(statement.variables[index].value)\n      ]);\n    }\n\n    /* Pop the tuple */\n    this._produce(\n      statement.startPos, statement.endPos,\n      new IPop()\n    );\n\n  }\n\n  /* There are two cases:\n   * (1) The procedure is a built-in primitive.\n   * (2) The procedure is a user-defined procedure.\n   */\n  _compileStmtProcedureCall(statement) {\n    let procedureName = statement.procedureName.value;\n    for (let argument of statement.args) {\n      this._compileExpression(argument);\n    }\n    if (this._primitives.isProcedure(procedureName)) {\n      this._compileStmtProcedureCallPrimitive(statement);\n    } else if (this._symtable.isProcedure(procedureName)) {\n      this._compileStmtProcedureCallUserDefined(statement);\n    } else {\n      throw Error(\n        'Compiler: ' + procedureName + ' is an undefined procedure.'\n      );\n    }\n  }\n\n  _compileStmtProcedureCallPrimitive(statement) {\n    this._produce(statement.startPos, statement.endPos,\n      new IPrimitiveCall(statement.procedureName.value, statement.args.length)\n    );\n  }\n\n  _compileStmtProcedureCallUserDefined(statement) {\n    this._produce(statement.startPos, statement.endPos,\n      new ICall(statement.procedureName.value, statement.args.length)\n    );\n  }\n\n  /* Pattern checks are instructions that check whether the\n   * top of the stack has the expected form (matching a given pattern)\n   * and, in that case, branching to the given label.\n   * The top of the stack is never popped.\n   * The arguments of a pattern are not bound by this instruction.\n   */\n  _compilePatternCheck(pattern, targetLabel) {\n    switch (pattern.tag) {\n      case N_PatternWildcard:\n        return this._compilePatternCheckWildcard(pattern, targetLabel);\n      case N_PatternVariable:\n        return this._compilePatternCheckVariable(pattern, targetLabel);\n      case N_PatternNumber:\n        return this._compilePatternCheckNumber(pattern, targetLabel);\n      case N_PatternStructure:\n        return this._compilePatternCheckStructure(pattern, targetLabel);\n      case N_PatternTuple:\n        return this._compilePatternCheckTuple(pattern, targetLabel);\n      case N_PatternTimeout:\n        return this._compilePatternCheckTimeout(pattern, targetLabel);\n      default:\n        throw Error(\n                'Compiler: Pattern check not implemented: '\n              + Symbol.keyFor(pattern.tag)\n              );\n    }\n  }\n\n  _compilePatternCheckWildcard(pattern, targetLabel) {\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new IJump(targetLabel)\n    );\n  }\n\n  _compilePatternCheckVariable(pattern, targetLabel) {\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new IJump(targetLabel)\n    );\n  }\n\n  _compilePatternCheckNumber(pattern, targetLabel) {\n    this._produceList(pattern.startPos, pattern.endPos, [\n      new IDup(),\n      new ITypeCheck(new TypeInteger()),\n      new IPushInteger(pattern.number.value),\n      new IPrimitiveCall('/=', 2),\n      new IJumpIfFalse(targetLabel),\n    ]);\n  }\n\n  _compilePatternCheckStructure(pattern, targetLabel) {\n    /* Check that the type of the value coincides with the type\n     * of the constructor */\n    let constructorName = pattern.constructorName.value;\n    let typeName = this._symtable.constructorType(constructorName);\n    let expectedType = new TypeStructure(typeName, {});\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new ITypeCheck(expectedType)\n    );\n\n    /* Jump if the value matches */\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new IJumpIfStructure(constructorName, targetLabel)\n    );\n  }\n\n  _compilePatternCheckTuple(pattern, targetLabel) {\n    /* Check that the type of the value coincides with the type\n     * of the tuple */\n    let anys = [];\n    for (let i = 0; i < pattern.boundVariables.length; i++) {\n      anys.push(new TypeAny());\n    }\n    let expectedType = new TypeTuple(anys);\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new ITypeCheck(expectedType)\n    );\n\n    /* Jump if the value matches */\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new IJumpIfTuple(pattern.boundVariables.length, targetLabel)\n    );\n  }\n\n  _compilePatternCheckTimeout(pattern, targetLabel) {\n    this._produce(\n      pattern.startPos, pattern.endPos,\n      new IJumpIfStructure(i18n('CONS:TIMEOUT'), targetLabel)\n    );\n  }\n\n  /* Pattern binding are instructions that bind the parameters\n   * of a pattern to the corresponding parts of the value currently\n   * at the top of the stack. The value at the top of the stack\n   * is never popped (it must be duplicated if necessary).\n   */\n  _compilePatternBind(pattern) {\n    switch (pattern.tag) {\n      case N_PatternWildcard:\n        return; /* No parameters to bind */\n      case N_PatternVariable:\n        this._compilePatternBindVariable(pattern);\n        return;\n      case N_PatternNumber:\n        return; /* No parameters to bind */\n      case N_PatternStructure:\n        this._compilePatternBindStructure(pattern);\n        return;\n      case N_PatternTuple:\n        this._compilePatternBindTuple(pattern);\n        return;\n      case N_PatternTimeout:\n        return; /* No parameters to bind */\n      default:\n        throw Error(\n                'Compiler: Pattern binding not implemented: '\n              + Symbol.keyFor(pattern.tag)\n              );\n    }\n  }\n\n  _compilePatternBindVariable(pattern) {\n    this._produceList(pattern.startPos, pattern.endPos, [\n      new IDup(),\n      new ISetVariable(pattern.variableName.value),\n    ]);\n  }\n\n  _compilePatternBindStructure(pattern) {\n    /* Allow structure pattern with no parameters, even if the constructor\n     * has parameters */\n    if (pattern.boundVariables.length === 0) {\n      return;\n    }\n\n    let constructorName = pattern.constructorName.value;\n    let fieldNames = this._symtable.constructorFields(constructorName);\n    for (let i = 0; i < fieldNames.length; i++) {\n      let variable = pattern.boundVariables[i];\n      let fieldName = fieldNames[i];\n      this._produceList(pattern.startPos, pattern.endPos, [\n        new IReadStructureField(fieldName),\n        new ISetVariable(variable.value),\n      ]);\n    }\n  }\n\n  _compilePatternBindTuple(pattern) {\n    for (let index = 0; index < pattern.boundVariables.length; index++) {\n      let variable = pattern.boundVariables[index];\n      this._produceList(pattern.startPos, pattern.endPos, [\n        new IReadTupleComponent(index),\n        new ISetVariable(variable.value),\n      ]);\n    }\n  }\n\n  /* Pattern unbinding are instructions that unbind the parameters\n   * of a pattern. */\n  _compilePatternUnbind(pattern) {\n    for (let variable of pattern.boundVariables) {\n      this._produceList(pattern.startPos, pattern.endPos, [\n        new IUnsetVariable(variable.value),\n      ]);\n    }\n  }\n\n  /* Expressions are compiled to instructions that make the size\n   * of the local stack grow in exactly one.\n   * The stack may grow and shrink during the evaluation of an\n   * expression, but an expression should not consume values\n   * that were present on the stack before its evaluation started.\n   * In the end the stack should have exactly one more value than\n   * at the start.\n   */\n  _compileExpression(expression) {\n    switch (expression.tag) {\n      case N_ExprVariable:\n        return this._compileExprVariable(expression);\n      case N_ExprConstantNumber:\n        return this._compileExprConstantNumber(expression);\n      case N_ExprConstantString:\n        return this._compileExprConstantString(expression);\n      case N_ExprChoose:\n        return this._compileExprChoose(expression);\n      case N_ExprMatching:\n        return this._compileExprMatching(expression);\n      case N_ExprList:\n        return this._compileExprList(expression);\n      case N_ExprRange:\n        return this._compileExprRange(expression);\n      case N_ExprTuple:\n        return this._compileExprTuple(expression);\n      case N_ExprStructure:\n        return this._compileExprStructure(expression);\n      case N_ExprStructureUpdate:\n        return this._compileExprStructureUpdate(expression);\n      case N_ExprFunctionCall:\n        return this._compileExprFunctionCall(expression);\n      default:\n        throw Error(\n                'Compiler: Expression not implemented: '\n              + Symbol.keyFor(expression.tag)\n              );\n      }\n  }\n\n  _compileExprVariable(expression) {\n    this._produce(expression.startPos, expression.endPos,\n      new IPushVariable(expression.variableName.value)\n    );\n  }\n\n  _compileExprConstantNumber(expression) {\n    this._produce(expression.startPos, expression.endPos,\n      new IPushInteger(expression.number.value)\n    );\n  }\n\n  _compileExprConstantString(expression) {\n    this._produce(expression.startPos, expression.endPos,\n      new IPushString(expression.string.value)\n    );\n  }\n\n  /*\n   * An expression of the form:\n   *\n   *   choose a when (cond) b otherwise\n   *\n   * is compiled similarly as a statement of the form:\n   *\n   *   if (cond) { a } else { b }\n   *\n   * Recall that a 'choose' with many branches:\n   *\n   *   choose a1 when (cond1)\n   *          ...\n   *          aN when (condN)\n   *          b  otherwise\n   *\n   * is actually parsed as a sequence of nested binary choose\n   * constructions:\n   *\n   *   choose a1 when (cond1)\n   *          (\n   *            ...\n   *            choose aN when (condN)\n   *                    b otherwise\n   *            ...\n   *          ) otherwise\n   *\n   */\n  _compileExprChoose(expression) {\n    this._compileExpression(expression.condition);\n    this._produce(expression.condition.startPos, expression.condition.endPos,\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {}))\n    );\n    let labelOtherwise = this._freshLabel();\n    this._produce(expression.startPos, expression.endPos,\n      new IJumpIfFalse(labelOtherwise)\n    );\n    this._compileExpression(expression.trueExpr);\n    let labelEnd = this._freshLabel();\n    this._produceList(expression.startPos, expression.endPos, [\n      new IJump(labelEnd),\n      new ILabel(labelOtherwise),\n    ]);\n    this._compileExpression(expression.falseExpr);\n    this._produce(expression.startPos, expression.endPos,\n      new ILabel(labelEnd)\n    );\n  }\n\n  _compileExprMatching(expression) {\n    this._compileExpression(expression.subject);\n    this._compileMatchBranches(expression, true /* isMatching */);\n  }\n\n  _compileExprList(expression) {\n    for (let element of expression.elements) {\n      this._compileExpression(element);\n    }\n    this._produce(expression.startPos, expression.endPos,\n      new IMakeList(expression.elements.length)\n    );\n  }\n\n  /*\n   * Range expresions [first..last] and [first,second..last]\n   * are compiled by calling the primitive functions\n   *   _makeRange\n   *   _makeRangeWithSecond\n   */\n  _compileExprRange(expression) {\n    this._compileExpression(expression.first);\n    this._compileExpression(expression.last);\n    if (expression.second === null) {\n      this._produce(\n        expression.startPos, expression.endPos,\n        new IPrimitiveCall('_makeRange', 2)\n      );\n    } else {\n      this._compileExpression(expression.second);\n      this._produce(\n        expression.startPos, expression.endPos,\n        new IPrimitiveCall('_makeRangeWithSecond', 3)\n      );\n    }\n  }\n\n  _compileExprTuple(expression) {\n    for (let element of expression.elements) {\n      this._compileExpression(element);\n    }\n    this._produce(expression.startPos, expression.endPos,\n      new IMakeTuple(expression.elements.length)\n    );\n  }\n\n  _compileExprStructure(expression) {\n    let fieldNames = [];\n    for (let fieldBinding of expression.fieldBindings) {\n      this._compileExpression(fieldBinding.value);\n      fieldNames.push(fieldBinding.fieldName.value);\n    }\n    let constructorName = expression.constructorName.value;\n    let typeName = this._symtable.constructorType(constructorName);\n    this._produce(expression.startPos, expression.endPos,\n      new IMakeStructure(typeName, constructorName, fieldNames)\n    );\n  }\n\n  _compileExprStructureUpdate(expression) {\n    this._compileExpression(expression.original);\n    let fieldNames = [];\n    for (let fieldBinding of expression.fieldBindings) {\n      this._compileExpression(fieldBinding.value);\n      fieldNames.push(fieldBinding.fieldName.value);\n    }\n    let constructorName = expression.constructorName.value;\n    let typeName = this._symtable.constructorType(constructorName);\n    this._produce(expression.startPos, expression.endPos,\n      new IUpdateStructure(typeName, constructorName, fieldNames)\n    );\n  }\n\n  /* There are four cases:\n   * (1) The function is '&&' or '||' which must be considered separately\n   *     to account for short-circuting.\n   * (2) The function is a built-in primitive.\n   * (3) The function is a user-defined function.\n   * (4) The function is an observer / field accessor.\n   */\n  _compileExprFunctionCall(expression) {\n    let functionName = expression.functionName.value;\n    if (functionName === '&&') {\n      this._compileExprFunctionCallAnd(expression);\n    } else if (functionName === '||') {\n      this._compileExprFunctionCallOr(expression);\n    } else {\n      for (let argument of expression.args) {\n        this._compileExpression(argument);\n      }\n      if (this._primitives.isFunction(functionName)) {\n        this._compileExprFunctionCallPrimitive(expression);\n      } else if (this._symtable.isFunction(functionName)) {\n        this._compileExprFunctionCallUserDefined(expression);\n      } else if (this._symtable.isField(functionName)) {\n        this._compileExprFunctionCallFieldAccessor(expression);\n      } else {\n        throw Error(\n          'Compiler: ' + functionName + ' is an undefined function.'\n        );\n      }\n    }\n  }\n\n  /* <expr1>\n   * TypeCheck Bool\n   * JumpIfStructure 'False' labelEnd\n   * Pop\n   * <expr2>\n   * TypeCheck Bool\n   * labelEnd:\n   */\n  _compileExprFunctionCallAnd(expression) {\n    let expr1 = expression.args[0];\n    let expr2 = expression.args[1];\n    let labelEnd = this._freshLabel();\n    this._compileExpression(expr1);\n    this._produceList(expression.startPos, expression.endPos, [\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {})),\n      new IJumpIfStructure(i18n('CONS:False'), labelEnd),\n      new IPop(),\n    ]);\n    this._compileExpression(expr2);\n    this._produceList(expression.startPos, expression.endPos, [\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {})),\n      new ILabel(labelEnd),\n    ]);\n  }\n\n  /* <expr1>\n   * TypeCheck Bool\n   * JumpIfStructure 'True' labelEnd\n   * Pop\n   * <expr2>\n   * TypeCheck Bool\n   * labelEnd:\n   */\n  _compileExprFunctionCallOr(expression) {\n    let expr1 = expression.args[0];\n    let expr2 = expression.args[1];\n    let labelEnd = this._freshLabel();\n    this._compileExpression(expr1);\n    this._produceList(expression.startPos, expression.endPos, [\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {})),\n      new IJumpIfStructure(i18n('CONS:True'), labelEnd),\n      new IPop(),\n    ]);\n    this._compileExpression(expr2);\n    this._produceList(expression.startPos, expression.endPos, [\n      new ITypeCheck(new TypeStructure(i18n('TYPE:Bool'), {})),\n      new ILabel(labelEnd),\n    ]);\n  }\n\n  _compileExprFunctionCallPrimitive(expression) {\n    this._produce(expression.startPos, expression.endPos,\n      new IPrimitiveCall(expression.functionName.value, expression.args.length)\n    );\n  }\n\n  _compileExprFunctionCallUserDefined(expression) {\n    this._produce(expression.startPos, expression.endPos,\n      new ICall(expression.functionName.value, expression.args.length)\n    );\n  }\n\n  _compileExprFunctionCallFieldAccessor(expression) {\n    this._produceList(expression.startPos, expression.endPos, [\n      new IReadStructureFieldPop(expression.functionName.value),\n    ]);\n  }\n\n  /* Helpers */\n\n  /* Produce the given instruction, setting its starting and ending\n   * position to startPos and endPos respectively */\n  _produce(startPos, endPos, instruction) {\n    instruction.startPos = startPos;\n    instruction.endPos = endPos;\n    this._code.produce(instruction);\n  }\n\n  _produceList(startPos, endPos, instructions) {\n    for (let instruction of instructions) {\n      this._produce(startPos, endPos, instruction);\n    }\n  }\n\n  /* Create a fresh label name */\n  _freshLabel() {\n    let label = '_l' + this._nextLabel.toString();\n    this._nextLabel++;\n    return label;\n  }\n\n  /* Create a fresh local variable name */\n  _freshVariable() {\n    let v = '_v' + this._nextVariable.toString();\n    this._nextVariable++;\n    return v;\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/compiler.js","\nimport {\n  I_PushInteger,\n  I_PushString,\n  I_PushVariable,\n  I_SetVariable,\n  I_UnsetVariable,\n  I_Label,\n  I_Jump,\n  I_JumpIfFalse,\n  I_JumpIfStructure,\n  I_JumpIfTuple,\n  I_Call,\n  I_Return,\n  I_MakeTuple,\n  I_MakeList,\n  I_MakeStructure,\n  I_UpdateStructure,\n  I_ReadTupleComponent,\n  I_ReadStructureField,\n  I_ReadStructureFieldPop,\n  I_Add,\n  I_Dup,\n  I_Pop,\n  I_PrimitiveCall,\n  I_SaveState,\n  I_RestoreState,\n  I_TypeCheck,\n} from './instruction';\nimport {\n  V_Tuple,\n  V_Structure,\n  ValueInteger,\n  ValueString,\n  ValueTuple,\n  ValueList,\n  ValueStructure,\n  joinTypes,\n  TypeAny,\n} from './value';\nimport { GbsRuntimeError } from './exceptions';\nimport { i18n } from './i18n';\nimport { RuntimePrimitives } from './runtime';\n\n/* Conditions that may occur on runtime */\nconst RT_ExitProgram = Symbol.for('RT_ExitProgram');\n\n/* Instances of RuntimeCondition represent conditions that may occur\n * during runtime (e.g. program termination or timeout). */\nclass RuntimeCondition extends Error {\n  constructor(tag) {\n    super(Symbol.keyFor(tag));\n    this.tag = tag;\n  }\n}\n\n/* Runtime condition to mark the end of an execution */\nclass RuntimeExitProgram extends RuntimeCondition {\n  constructor(returnValue) {\n    super(RT_ExitProgram);\n    this.returnValue = returnValue;\n  }\n}\n\nfunction fail(startPos, endPos, reason, args) {\n  throw new GbsRuntimeError(startPos, endPos, reason, args);\n}\n\n/* An instance of Frame represents the local execution context of a\n * function or procedure (a.k.a. \"activation record\" or \"stack frame\").\n *\n * It includes:\n * - the name of the current routine:\n *   + 'program' for the main program\n *   + the name of the current procedure or function\n * - the current instruction pointer\n * - a stack of local values\n * - a map from local names to values\n *\n * Each local variable has a type and a value.\n * - The actual type of the current value held by a variable\n *   should always be an instance of the type.\n * - The type of a variable should be the join of all the\n *   types held historically by the variable.\n * - The Frame does not impose these conditions.\n */\nclass Frame {\n\n  constructor(frameId, routineName, instructionPointer) {\n    this._routineName = routineName;\n    this._instructionPointer = instructionPointer;\n    this._variableTypes = {};\n    this._variables = {};\n    this._stack = [];\n\n    /* The unique frame identifier is used to uniquely identify\n     * a function call during a stack trace. This is used in the\n     * API to generate snapshots. */\n    this._uniqueFrameId = frameId;\n  }\n\n  get routineName() {\n    return this._routineName;\n  }\n\n  get uniqueFrameId() {\n    return this._uniqueFrameId;\n  }\n\n  get instructionPointer() {\n    return this._instructionPointer;\n  }\n\n  set instructionPointer(value) {\n    this._instructionPointer = value;\n  }\n\n  /* Precondition:\n   *   Let oldType = this._variableTypes[name]\n   *   if this._variableTypes[name] is defined.\n   *   Otherwise, let oldType = new TypeAny().\n   *   Then the following condition must hold:\n   *     type = joinTypes(value.type(), oldType) */\n  setVariable(name, type, value) {\n    this._variableTypes[name] = type;\n    this._variables[name] = value;\n  }\n\n  unsetVariable(name, value) {\n    delete this._variables[name];\n  }\n\n  getVariableType(name) {\n    if (name in this._variableTypes) {\n      return this._variableTypes[name];\n    } else {\n      return new TypeAny();\n    }\n  }\n\n  getVariable(name) {\n    if (name in this._variables) {\n      return this._variables[name];\n    } else {\n      return null;\n    }\n  }\n\n  stackEmpty() {\n    return this._stack.length === 0;\n  }\n\n  pushValue(value) {\n    this._stack.push(value);\n  }\n\n  stackTop() {\n    if (this._stack.length === 0) {\n      throw Error('VM: no value at the top of the stack; the stack is empty.');\n    }\n    return this._stack[this._stack.length - 1];\n  }\n\n  popValue() {\n    if (this._stack.length === 0) {\n      throw Error('VM: no value to pop; the stack is empty.');\n    }\n    return this._stack.pop();\n  }\n\n}\n\n/*\n * Receives an instance of Code, representing a program for the virtual\n * machine, and sets it up for running.\n *\n * Then it implements the following interface:\n *\n *   vm.run();    Run the program until termination.\n *                If the program returns a value, this method\n *                returns it. Otherwise it returns null.\n */\nexport class VirtualMachine {\n\n  constructor(code, initialState) {\n    this._code = code;\n\n    /* \"this._labelTargets\" is a dictionary mapping label names to\n     * the corresponding instruction pointers.\n     *\n     * It is calculated automatically from code.\n     */\n    this._labelTargets = this._code.labelTargets();\n\n    this._nextFrameId = 0;\n\n    /* A \"call stack\" is a stack of frames.\n     *\n     * The topmost element of the stack (i.e. the last element of the list)\n     * is the execution context of the current function.\n     *\n     * The previous element is the execution context of the caller, and so on.\n     *\n     * During the execution of a program the call stack should never\n     * become empty.\n     */\n    this._callStack = [];\n    this._callStack.push(\n      this._newFrame('program', 0 /* instructionPointer */)\n    );\n\n    /* The global state is the data that is available globally.\n     *\n     * In Gobstones, the global state is the board. The VM module\n     * should not be aware of the actual implementation or nature of\n     * the global state.\n     *\n     * We have a stack of global states.\n     *\n     * The instruction 'SaveState' saves the current global state.\n     * It should be called whenever entering a user-defined function\n     * in Gobstones.\n     *\n     * The instruction 'RestoreState' restores the previous global state.\n     * It should be called whenever leaving a user-defined function\n     * in Gobstones.\n     */\n    this._globalStateStack = [initialState];\n\n    /* The following dictionary maps names of primitives to their\n     * implementation.\n     *\n     * A primitive always receives 1 + n parameters, the first one being\n     * the board.\n     */\n    this._primitives = new RuntimePrimitives();\n\n    /*\n     * A \"snapshot callback\" is a function that takes snapshots.\n     *\n     *   snapshotCallback(routineName, position, callStack, globalState)\n     *\n     *   routineName:\n     *     It is the name of the routine that triggers the\n     *     snapshot, it might be:\n     *     - 'program' for the main program,\n     *     - the name of a primitive procedure or function,\n     *     - the name of a user-defined procedure or function.\n     *\n     *   position:\n     *     The position in the source code for this snapshot.\n     *\n     *   callStack:\n     *     The current call stack.\n     *\n     *   globalState:\n     *     The current global state.\n     *\n     * Snapshots\n     * If _snapshotCallback is null, the VM does not take snapshots.\n     */\n    this._snapshotCallback = null;\n\n  }\n\n  run() {\n    return this.runWithTimeout(0);\n  }\n\n  /* Run the program, throwing an exception if the given timeout is met.\n   * If millisecs is 0, the program is run indefinitely. */\n  runWithTimeout(millisecs) {\n    return this.runWithTimeoutTakingSnapshots(millisecs, null);\n  }\n\n  /* Restart the program from the beginning, with the given eventValue\n   * at the top of the stack.\n   *\n   * This is used for interactive programs, which work by iteratively\n   * making calls to this function.\n   */\n  runEventWithTimeout(eventValue, millisecs) {\n    this._callStack = [\n      this._newFrame('program', 0 /* instructionPointer */)\n    ];\n    this._currentFrame().pushValue(eventValue);\n    return this.runWithTimeout(millisecs);\n  }\n\n  /* Run the program, throwing an exception if the given timeout is met.\n   * If millisecs is 0, the program is run indefinitely.\n   *\n   * Snapshots are taken:\n   * - At the very start of the program.\n   * - At the end of the program.\n   * - After calling any primitive procedure or function.\n   * - Whenever reaching an I_Return instruction from any routine.\n   *\n   * The snapshotCallback function receives:\n   * - The current call stack (list of frames).\n   * - The current global state.\n   */\n  runWithTimeoutTakingSnapshots(millisecs, snapshotCallback) {\n    let startTime = new Date().getTime();\n    this._snapshotCallback = snapshotCallback;\n    this._takeSnapshot('program');\n    try {\n      while (true) {\n        this._step();\n        this._timeoutIfNeeded(startTime, millisecs);\n      }\n    } catch (condition) {\n      if (condition.tag === RT_ExitProgram) {\n        return condition.returnValue;\n      } else {\n        throw condition;\n      }\n    }\n  }\n\n  _newFrame(routineName, instructionPointer) {\n    let frameId = this._nextFrameId;\n    this._nextFrameId++;\n    return new Frame(frameId, routineName, instructionPointer);\n  }\n\n  _timeoutIfNeeded(startTime, millisecs) {\n    if (millisecs > 0 && (new Date().getTime() - startTime) > millisecs) {\n      let instruction = this._currentInstruction();\n      fail(instruction.startPos, instruction.endPos, 'timeout', [millisecs]);\n    }\n  }\n\n  _takeSnapshot(routineName) {\n    if (this._snapshotCallback !== null) {\n      let instruction = this._currentInstruction();\n      this._snapshotCallback(\n        routineName, instruction.startPos, this._callStack, this.globalState()\n      );\n    }\n  }\n\n  globalState() {\n    return this._globalStateStack[this._globalStateStack.length - 1];\n  }\n\n  setGlobalState(globalState) {\n    this._globalStateStack[this._globalStateStack.length - 1] = globalState;\n  }\n\n  /* Return the current frame, which is the top of the call stack */\n  _currentFrame() {\n    return this._callStack[this._callStack.length - 1];\n  }\n\n  /* Return the current instruction, given by the instruction pointer\n   * of the current activation record */\n  _currentInstruction() {\n    return this._code.at(this._currentFrame().instructionPointer);\n  }\n\n  /* Execute a single instruction.\n   *\n   * If the program finishes, it throws an exception\n   *   RuntimeExitProgram(returnValue)\n   */\n  _step() {\n    switch (this._currentInstruction().opcode) {\n      case I_PushInteger:\n        return this._stepPushInteger();\n      case I_PushString:\n        return this._stepPushString();\n      case I_PushVariable:\n        return this._stepPushVariable();\n      case I_SetVariable:\n        return this._stepSetVariable();\n      case I_UnsetVariable:\n        return this._stepUnsetVariable();\n      case I_Label:\n        return this._stepLabel();\n      case I_Jump:\n        return this._stepJump();\n      case I_JumpIfFalse:\n        return this._stepJumpIfFalse();\n      case I_JumpIfStructure:\n        return this._stepJumpIfStructure();\n      case I_JumpIfTuple:\n        return this._stepJumpIfTuple();\n      case I_Call:\n        return this._stepCall();\n      case I_Return:\n        return this._stepReturn();\n      case I_MakeTuple:\n        return this._stepMakeTuple();\n      case I_MakeList:\n        return this._stepMakeList();\n      case I_MakeStructure:\n        return this._stepMakeStructure();\n      case I_UpdateStructure:\n        return this._stepUpdateStructure();\n      case I_ReadTupleComponent:\n        return this._stepReadTupleComponent();\n      case I_ReadStructureField:\n        return this._stepReadStructureField();\n      case I_ReadStructureFieldPop:\n        return this._stepReadStructureFieldPop();\n      case I_Add:\n        return this._stepAdd();\n      case I_Dup:\n        return this._stepDup();\n      case I_Pop:\n        return this._stepPop();\n      case I_PrimitiveCall:\n        return this._stepPrimitiveCall();\n      case I_SaveState:\n        return this._stepSaveState();\n      case I_RestoreState:\n        return this._stepRestoreState();\n      case I_TypeCheck:\n        return this._stepTypeCheck();\n      default:\n        throw Error(\n                'VM: opcode '\n              + Symbol.keyFor(this._currentInstruction().opcode)\n              + ' not implemented'\n              );\n    }\n  }\n\n  _stepPushInteger() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    frame.pushValue(new ValueInteger(instruction.number));\n    frame.instructionPointer++;\n  }\n\n  _stepPushString() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    frame.pushValue(new ValueString(instruction.string));\n    frame.instructionPointer++;\n  }\n\n  _stepPushVariable() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let value = frame.getVariable(instruction.variableName);\n    if (value === null) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'undefined-variable', [instruction.variableName]\n      );\n    }\n    frame.pushValue(value);\n    frame.instructionPointer++;\n  }\n\n  _stepSetVariable() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let newValue = frame.popValue();\n\n    /* Check that types are compatible */\n    let oldType = frame.getVariableType(instruction.variableName);\n    let valType = newValue.type();\n    let newType = joinTypes(oldType, valType);\n    if (newType === null) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'incompatible-types-on-assignment', [\n          instruction.variableName,\n          oldType,\n          valType,\n        ]\n      );\n    }\n\n    /* Proceed with assignment */\n    frame.setVariable(instruction.variableName, newType, newValue);\n    frame.instructionPointer++;\n  }\n\n  _stepUnsetVariable() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    frame.unsetVariable(instruction.variableName);\n    frame.instructionPointer++;\n  }\n\n  _stepLabel() {\n    /* Ignore pseudo-instruction */\n    let frame = this._currentFrame();\n    frame.instructionPointer++;\n  }\n\n  _stepJump() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    frame.instructionPointer = this._labelTargets[instruction.targetLabel];\n  }\n\n  _stepJumpIfFalse() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let value = frame.popValue(); /* Pop the value */\n    if (value.tag === V_Structure && value.constructorName === 'False') {\n      frame.instructionPointer = this._labelTargets[instruction.targetLabel];\n    } else {\n      frame.instructionPointer++;\n    }\n  }\n\n  _stepJumpIfStructure() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let value = frame.stackTop(); /* Do not pop the value */\n    if (value.tag === V_Structure\n        && value.constructorName === instruction.constructorName) {\n      frame.instructionPointer = this._labelTargets[instruction.targetLabel];\n    } else {\n      frame.instructionPointer++;\n    }\n  }\n\n  _stepJumpIfTuple() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let value = frame.stackTop(); /* Do not pop the value */\n    if (value.tag === V_Tuple && value.size() === instruction.size) {\n      frame.instructionPointer = this._labelTargets[instruction.targetLabel];\n    } else {\n      frame.instructionPointer++;\n    }\n  }\n\n  _stepCall() {\n    let callerFrame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    /* Create a new stack frame for the callee */\n    let newFrame = this._newFrame(\n                     instruction.targetLabel,\n                     this._labelTargets[instruction.targetLabel]\n                   );\n    this._callStack.push(newFrame);\n\n    /* Pop arguments from caller's frame and push them into callee's frame */\n    for (let i = 0; i < instruction.nargs; i++) {\n      if (callerFrame.stackEmpty()) {\n        fail(\n          instruction.startPos, instruction.endPos,\n          'too-few-arguments', [instruction.targetLabel]\n        );\n      }\n      newFrame.pushValue(callerFrame.popValue());\n    }\n  }\n\n  _stepReturn() {\n    let innerFrame = this._currentFrame();\n\n    let returnValue;\n    if (innerFrame.stackEmpty()) {\n      returnValue = null;\n    } else {\n      /* Take a snapshot when leaving a routine other than the program */\n      this._takeSnapshot(innerFrame.routineName);\n\n      returnValue = innerFrame.popValue();\n      if (!innerFrame.stackEmpty()) {\n        throw Error('VM: stack should be empty');\n      }\n    }\n\n    this._callStack.pop();\n    if (this._callStack.length === 0) {\n      /* There are no more frames in the call stack, which means\n       * that we are returning from the main program. */\n      throw new RuntimeExitProgram(returnValue);\n    } else {\n      /* There are further frames in the call stack, which means\n       * that we are returning from a function. */\n      let outerFrame = this._currentFrame();\n      if (returnValue !== null) {\n        outerFrame.pushValue(returnValue);\n      }\n      outerFrame.instructionPointer++;\n    }\n  }\n\n  _stepMakeTuple() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    let elements = [];\n    for (let i = 0; i < instruction.size; i++) {\n      elements.unshift(frame.popValue());\n    }\n    frame.pushValue(new ValueTuple(elements));\n    frame.instructionPointer++;\n  }\n\n  _stepMakeList() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    let elements = [];\n    for (let i = 0; i < instruction.size; i++) {\n      elements.unshift(frame.popValue());\n    }\n\n    /* Check that the types of the elements are compatible */\n    let contentType = new TypeAny();\n    let index = 0;\n    for (let element of elements) {\n      let oldType = contentType;\n      let newType = element.type();\n      contentType = joinTypes(oldType, newType);\n      if (contentType === null) {\n        fail(\n          instruction.startPos, instruction.endPos,\n          'incompatible-types-on-list-creation', [\n            index,\n            oldType,\n            newType,\n          ]\n        );\n      }\n      index++;\n    }\n    frame.pushValue(new ValueList(elements));\n    frame.instructionPointer++;\n  }\n\n  _stepMakeStructure() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    let fields = {};\n    let n = instruction.fieldNames.length;\n    for (let i = 0; i < n; i++) {\n      let fieldName = instruction.fieldNames[n - i - 1];\n      fields[fieldName] = frame.popValue();\n    }\n    frame.pushValue(\n      new ValueStructure(\n        instruction.typeName, instruction.constructorName, fields\n      )\n    );\n    frame.instructionPointer++;\n  }\n\n  _stepUpdateStructure() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    let newFields = {};\n    let newFieldNames = [];\n    let n = instruction.fieldNames.length;\n    for (let i = 0; i < n; i++) {\n      let fieldName = instruction.fieldNames[n - i - 1];\n      newFields[fieldName] = frame.popValue();\n      newFieldNames.unshift(fieldName);\n    }\n\n    /* Check that it is a structure and built with the same constructor */\n    let structure = frame.popValue();\n    if (structure.tag !== V_Structure) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'expected-structure-but-got', [\n          instruction.constructorName,\n          i18n(Symbol.keyFor(structure.tag)),\n        ]\n      );\n    }\n    if (structure.constructorName !== instruction.constructorName) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'expected-constructor-but-got', [\n          instruction.constructorName,\n          structure.constructorName,\n        ]\n      );\n    }\n    if (structure.typeName !== instruction.typeName) {\n      throw Error('VM: UpdateStructure instruction does not match type.');\n    }\n\n    /* Check that the types of the fields are compatible */\n    for (let fieldName of newFieldNames) {\n      let oldType = structure.fields[fieldName].type();\n      let newType = newFields[fieldName].type();\n      if (joinTypes(oldType, newType) === null) {\n        fail(\n          instruction.startPos, instruction.endPos,\n          'incompatible-types-on-structure-update', [\n            fieldName,\n            oldType,\n            newType,\n          ]\n        );\n      }\n    }\n\n    /* Proceed with structure update */\n    frame.pushValue(structure.updateFields(newFields));\n    frame.instructionPointer++;\n  }\n\n  _stepReadTupleComponent() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let tuple = frame.stackTop();\n    if (tuple.tag !== V_Tuple) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'expected-tuple-value-but-got', [tuple.type()]\n      );\n    }\n    if (instruction.index >= tuple.size()) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'tuple-component-out-of-bounds', [\n          tuple.size(), instruction.index,\n        ]\n      );\n    }\n    frame.pushValue(tuple.components[instruction.index]);\n    frame.instructionPointer++;\n  }\n\n  _stepReadStructureFieldGeneric(shouldPopStructure) {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let structure;\n    if (shouldPopStructure) {\n      structure = frame.popValue();\n    } else {\n      structure = frame.stackTop();\n    }\n    if (structure.tag !== V_Structure) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'expected-structure-value-but-got', [structure.type()]\n      );\n    }\n    if (!(instruction.fieldName in structure.fields)) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'structure-field-not-present', [\n          structure.fieldNames(),\n          instruction.fieldName,\n        ]\n      );\n    }\n    frame.pushValue(structure.fields[instruction.fieldName]);\n    frame.instructionPointer++;\n  }\n\n  _stepReadStructureField() {\n    this._stepReadStructureFieldGeneric(false); /* Do not pop the structure */\n  }\n\n  _stepReadStructureFieldPop() {\n    this._stepReadStructureFieldGeneric(true);  /* Pop the structure */\n  }\n\n  /* Instruction used for testing/debugging */\n  _stepAdd() {\n    let frame = this._currentFrame();\n    let v1 = frame.popValue();\n    let v2 = frame.popValue();\n    frame.pushValue(v1.add(v2));\n    frame.instructionPointer++;\n  }\n\n  _stepDup() {\n    let frame = this._currentFrame();\n    let value = frame.popValue();\n    frame.pushValue(value);\n    frame.pushValue(value);\n    frame.instructionPointer++;\n  }\n\n  _stepPop() {\n    let frame = this._currentFrame();\n    frame.popValue();\n    frame.instructionPointer++;\n  }\n\n  _stepPrimitiveCall() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n\n    /* Pop arguments from stack */\n    let args = [];\n    for (let i = 0; i < instruction.nargs; i++) {\n      args.unshift(frame.popValue());\n    }\n\n    /* Check that the primitive exists */\n    if (!this._primitives.isOperation(instruction.primitiveName)) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'primitive-does-not-exist', [instruction.primitiveName]\n      );\n    }\n\n    let primitive = this._primitives.getOperation(instruction.primitiveName);\n\n    /* Check that the number of expected parameters coincides with\n     * the actual arguments provided */\n    if (primitive.argumentTypes.length !== instruction.nargs) {\n      fail(instruction.startPos, instruction.endPos,\n        'primitive-arity-mismatch', [\n          instruction.primitiveName,\n          primitive.argumentTypes.length,\n          instruction.nargs,\n        ]\n      );\n    }\n\n    /* Check that the types of all parameters coincide with the types of the\n     * actual arguments */\n    for (let i = 0; i < instruction.nargs; i++) {\n      let expectedType = primitive.argumentTypes[i];\n      let receivedType = args[i].type();\n      if (joinTypes(expectedType, receivedType) === null) {\n        fail(\n          instruction.startPos, instruction.endPos,\n          'primitive-argument-type-mismatch', [\n            instruction.primitiveName,\n            i + 1,\n            instruction.nargs,\n            expectedType,\n            receivedType,\n          ]\n        );\n      }\n    }\n\n    /* Validate the arguments using the primitive-specific validator */\n    primitive.validateArguments(\n      instruction.startPos, instruction.endPos, this.globalState(), args\n    );\n\n    /* Proceed to call the primitive operation */\n    let result = primitive.call(this.globalState(), args); /* mutates 'args' */\n    if (result !== null) {\n      frame.pushValue(result);\n    }\n\n    /* Take a snapshot after calling the primitive operation */\n    this._takeSnapshot(instruction.primitiveName);\n\n    frame.instructionPointer++;\n  }\n\n  _stepSaveState() {\n    let frame = this._currentFrame();\n    this._globalStateStack.push(this.globalState().clone());\n    frame.instructionPointer++;\n  }\n\n  _stepRestoreState() {\n    let frame = this._currentFrame();\n    this._globalStateStack.pop();\n    if (this._globalStateStack.length === 0) {\n      throw Error('RestoreState: the stack of global states is empty.');\n    }\n    frame.instructionPointer++;\n  }\n\n  _stepTypeCheck() {\n    let frame = this._currentFrame();\n    let instruction = this._currentInstruction();\n    let expectedType = instruction.type;\n    let receivedType = frame.stackTop().type();\n    if (joinTypes(expectedType, receivedType) === null) {\n      fail(\n        instruction.startPos, instruction.endPos,\n        'expected-value-of-type-but-got', [\n          expectedType,\n          receivedType,\n        ]\n      );\n    }\n    frame.instructionPointer++;\n  }\n\n  /* Return the current dynamic stack of regions */\n  regionStack() {\n    let regionStack = [];\n    for (let stackFrame of this._callStack) {\n      let instruction = this._code.at(stackFrame.instructionPointer);\n      regionStack.push(instruction.startPos.region);\n    }\n    return regionStack;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/vm.js","\n/*\n * A board format FMT is a pair of two functions:\n *\n *   fromJboard : jboard -> string\n *   toJboard   : string -> jboard\n *\n * where \"string\" is a string in the given format, and\n * \"jboard\" is the internal format produced/consumed by\n * the RuntimeState class in src/runtime.js.\n *\n * Internal format:\n *   jboard.width  = width of the board\n *   jboard.height = height of the board\n *   jboard.head   = array [x, y] with the position of the head\n *   jboard.board  = array of <width> elements,\n *                   each of which is an array of <height> elements,\n *                   each of which is a cell, of the form\n *                     {\"a\": na, \"n\": nn, \"r\": nr, \"v\": nv}\n *                   in such a way that:\n *                     jboard.board[x][y].a = number of blue  stones at (x, y)\n *                     jboard.board[x][y].n = number of black stones at (x, y)\n *                     jboard.board[x][y].r = number of red   stones at (x, y)\n *                     jboard.board[x][y].v = number of green stones at (x, y)\n */\n\nclass BoardFormat {\n  constructor(formatName, description, extension, fromJboard, toJboard) {\n    this._formatName = formatName;\n    this._description = description;\n    this._extension = extension;\n    this._fromJboard = fromJboard;\n    this._toJboard = toJboard;\n  }\n\n  get formatName() {\n    return this._formatName;\n  }\n\n  get description() {\n    return this._description;\n  }\n\n  get extension() {\n    return this._extension;\n  }\n\n  get fromJboard() {\n    return this._fromJboard;\n  }\n\n  get toJboard() {\n    return this._toJboard;\n  }\n}\n\nexport function apiboardFromJboard(jboard) {\n  let apiboard = {};\n  apiboard.head = {x: jboard.head[0], y: jboard.head[1]};\n  apiboard.width = jboard.width;\n  apiboard.height = jboard.height;\n  apiboard.table = [];\n  for (let y = 0; y < jboard.height; y++) {\n    let row = [];\n    for (let x = 0; x < jboard.width; x++) {\n      let cellO = jboard.board[x][y];\n      let cell = {};\n      if (cellO.a > 0) {\n        cell.blue = cellO.a;\n      }\n      if (cellO.n > 0) {\n        cell.black = cellO.n;\n      }\n      if (cellO.r > 0) {\n        cell.red = cellO.r;\n      }\n      if (cellO.v > 0) {\n        cell.green = cellO.v;\n      }\n      row.push(cell);\n    }\n    apiboard.table.unshift(row);\n  }\n  return apiboard;\n}\n\nexport function apiboardToJboard(apiboard) {\n  let jboard = {};\n  jboard.head = [apiboard.head.x, apiboard.head.y];\n  jboard.width = apiboard.width;\n  jboard.height = apiboard.height;\n  jboard.board = [];\n  for (let x = 0; x < jboard.width; x++) {\n    let column = [];\n    for (let y = 0; y < jboard.height; y++) {\n      let cell = apiboard.table[jboard.height - y - 1][x];\n      let ca = ('blue' in cell) ? cell.blue : 0;\n      let cn = ('black' in cell) ? cell.black : 0;\n      let cr = ('red' in cell) ? cell.red : 0;\n      let cv = ('green' in cell) ? cell.green : 0;\n      column.push({\n        'a': ca,\n        'n': cn,\n        'r': cr,\n        'v': cv,\n      });\n    }\n    jboard.board.push(column);\n  }\n  return jboard;\n}\n\nfunction gsboardFromJboard(jboard) {\n  let gsboard = {};\n  gsboard.x = jboard.head[0];\n  gsboard.y = jboard.head[1];\n  gsboard.sizeX = jboard.width;\n  gsboard.sizeY = jboard.height;\n  gsboard.table = [];\n  for (let y = 0; y < jboard.height; y++) {\n    let row = [];\n    for (let x = 0; x < jboard.width; x++) {\n      let cell = jboard.board[x][y];\n      row.push({\n        'blue': cell.a,\n        'black': cell.n,\n        'red': cell.r,\n        'green': cell.v,\n      });\n    }\n    gsboard.table.unshift(row);\n  }\n  return JSON.stringify(gsboard);\n}\n\nfunction gsboardToJboard(gsBoardString) {\n  let gsboard = JSON.parse(gsBoardString);\n  let jboard = {};\n  jboard.head = [gsboard.x, gsboard.y];\n  jboard.width = gsboard.sizeX;\n  jboard.height = gsboard.sizeY;\n  jboard.board = [];\n  for (let x = 0; x < jboard.width; x++) {\n    let column = [];\n    for (let y = 0; y < jboard.height; y++) {\n      let cell = gsboard.table[jboard.height - y - 1][x];\n      column.push({\n        'a': cell.blue,\n        'n': cell.black,\n        'r': cell.red,\n        'v': cell.green,\n      });\n    }\n    jboard.board.push(column);\n  }\n  return jboard;\n}\n\nexport function gbbFromJboard(jboard) {\n  let gbb = [];\n  gbb.push('GBB/1.0');\n  gbb.push(\n    'size'\n    + ' ' + jboard.width.toString()\n    + ' ' + jboard.height.toString()\n  );\n  for (let y = 0; y < jboard.height; y++) {\n    for (let x = 0; x < jboard.width; x++) {\n      let cell = jboard.board[x][y];\n      if (cell.a + cell.n + cell.r + cell.v === 0) {\n        continue;\n      }\n      let c = 'cell ' + x.toString() + ' ' + y.toString();\n      if (cell.a > 0) {\n        c += ' Azul ' + cell.a.toString();\n      }\n      if (cell.n > 0) {\n        c += ' Negro ' + cell.n.toString();\n      }\n      if (cell.r > 0) {\n        c += ' Rojo ' + cell.r.toString();\n      }\n      if (cell.v > 0) {\n        c += ' Verde ' + cell.v.toString();\n      }\n      gbb.push(c);\n    }\n  }\n  gbb.push(\n    'head'\n    + ' ' + jboard.head[0].toString()\n    + ' ' + jboard.head[1].toString()\n  );\n  return gbb.join('\\n') + '\\n';\n}\n\nexport function gbbToJboard(gbb) {\n  let i = 0;\n  let jboard = {};\n\n  function isWhitespace(x) {\n    return x === ' ' || x === '\\t' || x === '\\r' || x === '\\n';\n  }\n\n  function isNumeric(str) {\n    for (let i = 0; i < str.length; i++) {\n      if ('0123456789'.indexOf(str[i]) === -1) {\n        return false;\n      }\n    }\n    return str.length > 0;\n  }\n\n  function skipWhitespace() {\n    /* Skip whitespace */\n    while (i < gbb.length && isWhitespace(gbb[i])) {\n      i++;\n    }\n  }\n\n  function readToken() {\n    let t = [];\n    skipWhitespace();\n    while (i < gbb.length && !isWhitespace(gbb[i])) {\n      t.push(gbb[i]);\n      i++;\n    }\n    return t.join('');\n  }\n\n  function readN(errmsg) {\n    let t = readToken();\n    if (!isNumeric(t)) {\n      throw Error(errmsg);\n    }\n    t = parseInt(t, 10);\n    if (t < 0) {\n      throw Error(errmsg);\n    }\n    return t;\n  }\n\n  function readRange(a, b, errmsg) {\n    let t = readN(errmsg);\n    if (t < a || t >= b) {\n      throw Error(errmsg);\n    }\n    return t;\n  }\n\n  if (readToken() !== 'GBB/1.0') {\n    throw Error('GBB/1.0: Board not in GBB/1.0 format.');\n  }\n  if (readToken() !== 'size') {\n    throw Error('GBB/1.0: Board lacks a size declaration.');\n  }\n  jboard.width = readN('GBB/1.0: Board width is not a number.');\n  jboard.height = readN('GBB/1.0: Board height is not a number.');\n  if (jboard.width <= 0 || jboard.height <= 0) {\n    throw Error('GBB/1.0: Board size should be positive.');\n  }\n  jboard.head = [0, 0];\n  jboard.board = [];\n  for (let i = 0; i < jboard.width; i++) {\n    let row = [];\n    for (let j = 0; j < jboard.height; j++) {\n      row.push({'a': 0, 'n': 0, 'r': 0, 'v': 0});\n    }\n    jboard.board.push(row);\n  }\n\n  let headDeclared = false;\n  let cellDeclared = {};\n  let colores = {\n    'Azul': 'a',\n    'A': 'a',\n    'Negro': 'n',\n    'N': 'n',\n    'Rojo': 'r',\n    'R': 'r',\n    'Verde': 'v',\n    'V': 'v',\n  };\n\n  while (i < gbb.length) {\n    let op = readToken();\n    if (op === '') {\n      break;\n    } else if (op === 'head') {\n      if (headDeclared) {\n        throw Error('GBB/1.0: Head position cannot be declared twice.');\n      }\n      headDeclared = true;\n      let hx = readRange(0, jboard.width, 'GBB/1.0: Invalid head position.');\n      let hy = readRange(0, jboard.height, 'GBB/1.0: Invalid head position.');\n      jboard.head = [hx, hy];\n    } else if (op === 'cell') {\n      let cx = readRange(0, jboard.width, 'GBB/1.0: Invalid cell position.');\n      let cy = readRange(0, jboard.height, 'GBB/1.0: Invalid cell position.');\n      if ([cx, cy] in cellDeclared) {\n        throw Error('GBB/1.0: Cell cannot be declared twice.');\n      }\n      cellDeclared[[cx, cy]] = true;\n\n      let colorDeclared = {};\n      while (i < gbb.length) {\n        let color = readToken();\n        if (!(color in colores)) {\n          i -= color.length;\n          break;\n        }\n        let colorId = colores[color];\n        if (colorId in colorDeclared) {\n          throw Error('GBB/1.0: Color cannot be declared twice.');\n        }\n        let n = readN('GBB/1.0: Invalid amount of stones.');\n        jboard.board[cx][cy][colorId] = n;\n      }\n    } else {\n      throw Error('GBB/1.0: Malformed board: unknown command \"' + op + '\".');\n    }\n  }\n  return jboard;\n}\n\nlet BOARD_FORMAT_LIST = [\n\n  new BoardFormat(\n    'jboard',\n    'Representation of a board as a JavaScript object for internal usage.',\n    'jboard',\n    JSON.stringify,\n    JSON.parse\n  ),\n\n  new BoardFormat(\n    'gs-weblang-cli-json-board',\n    'Representation of a board as a Javascript object' +\n    ' used by the gs-weblang-cli tool.',\n    'json',\n    gsboardFromJboard,\n    gsboardToJboard\n  ),\n\n  new BoardFormat(\n    'gbb',\n    'GBB/1.0',\n    'gbb',\n    gbbFromJboard,\n    gbbToJboard,\n  ),\n\n];\n\nexport let DEFAULT_FORMAT = 'gs-weblang-cli-json-board';\nexport let BOARD_FORMATS = {};\nfor (let boardFormat of BOARD_FORMAT_LIST) {\n  BOARD_FORMATS[boardFormat.formatName] = boardFormat;\n}\n\nfunction fileExtension(filename) {\n  let parts = filename.split('.');\n  return parts[parts.length - 1];\n}\n\nfunction fileBoardFormat(filename) {\n  let extension = fileExtension(filename);\n  for (let fmt of BOARD_FORMAT_LIST) {\n    if (extension === fmt.extension) {\n      return fmt;\n    }\n  }\n  return BOARD_FORMATS[DEFAULT_FORMAT];\n}\n\nconst fs = require('fs');\n\nexport function readJboardFromFile(filename) {\n  let format = fileBoardFormat(filename);\n  let contents = fs.readFileSync(filename, 'utf8');\n  return format.toJboard(contents);\n}\n\nexport function writeJboardToFile(filename, jboard) {\n  let format = fileBoardFormat(filename);\n  let contents = format.fromJboard(jboard);\n  fs.writeFileSync(filename, contents, 'utf8');\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/board_formats.js"],"sourceRoot":""}