{"version":3,"sources":["scripts/loaders/spec/libraryLoader.spec.js"],"names":["describe","loader","beforeEach","LibraryLoader","it","context","editor","code","library","getProjectName","expect","getFiles","toEqual","content","name","callback","sinon","spy","setCode","runCode","onRunCode","_readText","stub","callsArgWith","read","called","toBeTruthy","calledWith"],"mappings":";;AAAAA,SAAS,eAAT,EAA0B,YAAW;AACnC,MAAIC,MAAJ;;AAEAC,aAAW,YAAW;AACpBD,aAAS,IAAIE,aAAJ,EAAT;AACD,GAFD;;AAIAC,KAAG,gCAAH,EAAqC,YAAW;AAC9C,QAAIC,UAAU;AACZC,cAAQ;AACNC,cAAM;AACJC,mBAAS;AADL;AADA,OADI;AAMZC,sBAAgB,0BAAW;AAAE,eAAO,QAAP;AAAiB;AANlC,KAAd;;AASAC,WAAOT,OAAOU,QAAP,CAAgBN,OAAhB,CAAP,EAAiCO,OAAjC,CAAyC,CAAC;AACxCC,eAAS,kBAD+B;AAExCC,YAAM;AAFkC,KAAD,CAAzC;AAID,GAdD;;AAgBAV,KAAG,oDAAH,EAAyD,YAAW;AAClE,QAAIW,WAAWC,MAAMC,GAAN,EAAf;AACA,QAAIC,UAAUF,MAAMC,GAAN,EAAd;AACA,QAAIE,UAAUH,MAAMC,GAAN,EAAd;;AAEA,QAAIZ,UAAU;AACZC,cAAQ;AACNY,iBAASA,OADH;AAENE,mBAAWD;AAFL;AADI,KAAd;;AAOAlB,WAAOoB,SAAP,GAAmBL,MAAMM,IAAN,GAAaC,YAAb,CAA0B,CAA1B,EAA6B,UAA7B,EAAyC,WAAzC,CAAnB;AACAtB,WAAOuB,IAAP,CAAYnB,OAAZ,EAAqB,IAArB,EAA2BU,QAA3B;;AAEAL,WAAOK,SAASU,MAAhB,EAAwBC,UAAxB;AACAhB,WAAOQ,QAAQS,UAAR,CAAmB,UAAnB,EAA+B,SAA/B,CAAP,EAAkDD,UAAlD;AACAhB,WAAOS,QAAQM,MAAf,EAAuBC,UAAvB;AACD,GAlBD;AAoBD,CA3CD","file":"libraryLoader.spec.js","sourcesContent":["describe('LibraryLoader', function() {\n  var loader;\n\n  beforeEach(function() {\n    loader = new LibraryLoader();\n  })\n\n  it(\"can retrieve the file to store\", function() {\n    var context = {\n      editor: {\n        code: {\n          library: \"The library code\"\n        }\n      },\n      getProjectName: function() { return \"sarasa\" }\n    };\n\n    expect(loader.getFiles(context)).toEqual([{\n      content: \"The library code\",\n      name: \"sarasa.library.gbs\"\n    }]);\n  });\n\n  it(\"runs the code and calls the callback after reading\", function() {\n    var callback = sinon.spy();\n    var setCode = sinon.spy();\n    var runCode = sinon.spy();\n\n    var context = {\n      editor: {\n        setCode: setCode,\n        onRunCode: runCode\n      }\n    };\n\n    loader._readText = sinon.stub().callsArgWith(1, \"AContent\", \"AFileName\");\n    loader.read(context, null, callback);\n\n    expect(callback.called).toBeTruthy();\n    expect(setCode.calledWith(\"AContent\", \"library\")).toBeTruthy();\n    expect(runCode.called).toBeTruthy();\n  });\n\n});\n"]}