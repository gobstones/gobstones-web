{"version":3,"sources":["scripts/vendor/platform.js"],"names":["objectTypes","root","window","oldRoot","freeExports","exports","freeModule","module","nodeType","freeGlobal","global","self","maxSafeInteger","Math","pow","reOpera","thisBinding","objectProto","Object","prototype","hasOwnProperty","toString","capitalize","string","String","charAt","toUpperCase","slice","cleanupOS","os","pattern","label","data","test","exec","replace","RegExp","format","split","each","object","callback","index","length","forOwn","trim","key","call","getClassOf","value","isHostType","property","type","qualify","reduce","array","accumulator","parse","ua","context","isCustomContext","nav","navigator","userAgent","isModuleScope","likeChrome","objectClass","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","doc","document","opera","operamini","operaClass","arch","description","prerelease","useFeatures","version","isSpecialCasedOS","layout","getLayout","name","getName","product","getProduct","manufacturer","getManufacturer","getOS","guesses","result","guess","getVersion","patterns","toStringPlatform","push","unshift","indexOf","parseFloat","lang","System","getProperty","require","join","e","system","process","browser","versions","electron","node","nw","platform","runtime","flash","Capabilities","phantom","major","minor","patch","documentMode","toFixed","appMinorVersion","external","parseInt","family","architecture","cpuClass","define","amd"],"mappings":"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","file":"platform.js","sourcesContent":["/* eslint-disable */\n/*!\n * Platform.js\n * Copyright 2014-2020 Benjamin Tan\n * Copyright 2011-2013 John-David Dalton\n * Available under MIT license\n */\n;(function() {\n  'use strict';\n\n  /** Used to determine if values are of the language type `Object`. */\n  var objectTypes = {\n    'function': true,\n    'object': true\n  };\n\n  /** Used as a reference to the global object. */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Backup possible global object. */\n  var oldRoot = root;\n\n  /** Detect free variable `exports`. */\n  var freeExports = objectTypes[typeof exports] && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root`. */\n  var freeGlobal = freeExports && freeModule && typeof global == 'object' && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /**\n   * Used as the maximum length of an array-like object.\n   * See the [ES6 spec](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength)\n   * for more details.\n   */\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n\n  /** Regular expression to detect Opera. */\n  var reOpera = /\\bOpera/;\n\n  /** Possible global object. */\n  var thisBinding = this;\n\n  /** Used for native method references. */\n  var objectProto = Object.prototype;\n\n  /** Used to check for own properties of an object. */\n  var hasOwnProperty = objectProto.hasOwnProperty;\n\n  /** Used to resolve the internal `[[Class]]` of values. */\n  var toString = objectProto.toString;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Capitalizes a string value.\n   *\n   * @private\n   * @param {string} string The string to capitalize.\n   * @returns {string} The capitalized string.\n   */\n  function capitalize(string) {\n    string = String(string);\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  /**\n   * A utility function to clean up the OS name.\n   *\n   * @private\n   * @param {string} os The OS name to clean up.\n   * @param {string} [pattern] A `RegExp` pattern matching the OS name.\n   * @param {string} [label] A label for the OS.\n   */\n  function cleanupOS(os, pattern, label) {\n    // Platform tokens are defined at:\n    // http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    // http://web.archive.org/web/20081122053950/http://msdn.microsoft.com/en-us/library/ms537503(VS.85).aspx\n    var data = {\n      '10.0': '10',\n      '6.4':  '10 Technical Preview',\n      '6.3':  '8.1',\n      '6.2':  '8',\n      '6.1':  'Server 2008 R2 / 7',\n      '6.0':  'Server 2008 / Vista',\n      '5.2':  'Server 2003 / XP 64-bit',\n      '5.1':  'XP',\n      '5.01': '2000 SP1',\n      '5.0':  '2000',\n      '4.0':  'NT',\n      '4.90': 'ME'\n    };\n    // Detect Windows version from platform tokens.\n    if (pattern && label && /^Win/i.test(os) && !/^Windows Phone /i.test(os) &&\n        (data = data[/[\\d.]+$/.exec(os)])) {\n      os = 'Windows ' + data;\n    }\n    // Correct character case and cleanup string.\n    os = String(os);\n\n    if (pattern && label) {\n      os = os.replace(RegExp(pattern, 'i'), label);\n    }\n\n    os = format(\n      os.replace(/ ce$/i, ' CE')\n        .replace(/\\bhpw/i, 'web')\n        .replace(/\\bMacintosh\\b/, 'Mac OS')\n        .replace(/_PowerPC\\b/i, ' OS')\n        .replace(/\\b(OS X) [^ \\d]+/i, '$1')\n        .replace(/\\bMac (OS X)\\b/, '$1')\n        .replace(/\\/(\\d)/, ' $1')\n        .replace(/_/g, '.')\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, '')\n        .replace(/\\bx86\\.64\\b/gi, 'x86_64')\n        .replace(/\\b(Windows Phone) OS\\b/, '$1')\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, '$1')\n        .split(' on ')[0]\n    );\n\n    return os;\n  }\n\n  /**\n   * An iteration utility for arrays and objects.\n   *\n   * @private\n   * @param {Array|Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   */\n  function each(object, callback) {\n    var index = -1,\n        length = object ? object.length : 0;\n\n    if (typeof length == 'number' && length > -1 && length <= maxSafeInteger) {\n      while (++index < length) {\n        callback(object[index], index, object);\n      }\n    } else {\n      forOwn(object, callback);\n    }\n  }\n\n  /**\n   * Trim and conditionally capitalize string values.\n   *\n   * @private\n   * @param {string} string The string to format.\n   * @returns {string} The formatted string.\n   */\n  function format(string) {\n    string = trim(string);\n    return /^(?:webOS|i(?:OS|P))/.test(string)\n      ? string\n      : capitalize(string);\n  }\n\n  /**\n   * Iterates over an object's own properties, executing the `callback` for each.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function executed per own property.\n   */\n  function forOwn(object, callback) {\n    for (var key in object) {\n      if (hasOwnProperty.call(object, key)) {\n        callback(object[key], key, object);\n      }\n    }\n  }\n\n  /**\n   * Gets the internal `[[Class]]` of a value.\n   *\n   * @private\n   * @param {*} value The value.\n   * @returns {string} The `[[Class]]`.\n   */\n  function getClassOf(value) {\n    return value == null\n      ? capitalize(value)\n      : toString.call(value).slice(8, -1);\n  }\n\n  /**\n   * Host objects can return type values that are different from their actual\n   * data type. The objects we are concerned with usually return non-primitive\n   * types of \"object\", \"function\", or \"unknown\".\n   *\n   * @private\n   * @param {*} object The owner of the property.\n   * @param {string} property The property to check.\n   * @returns {boolean} Returns `true` if the property value is a non-primitive, else `false`.\n   */\n  function isHostType(object, property) {\n    var type = object != null ? typeof object[property] : 'number';\n    return !/^(?:boolean|number|string|undefined)$/.test(type) &&\n      (type == 'object' ? !!object[property] : true);\n  }\n\n  /**\n   * Prepares a string for use in a `RegExp` by making hyphens and spaces optional.\n   *\n   * @private\n   * @param {string} string The string to qualify.\n   * @returns {string} The qualified string.\n   */\n  function qualify(string) {\n    return String(string).replace(/([ -])(?!$)/g, '$1?');\n  }\n\n  /**\n   * A bare-bones `Array#reduce` like utility function.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @returns {*} The accumulated result.\n   */\n  function reduce(array, callback) {\n    var accumulator = null;\n    each(array, function(value, index) {\n      accumulator = callback(accumulator, value, index, array);\n    });\n    return accumulator;\n  }\n\n  /**\n   * Removes leading and trailing whitespace from a string.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} The trimmed string.\n   */\n  function trim(string) {\n    return String(string).replace(/^ +| +$/g, '');\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a new platform object.\n   *\n   * @memberOf platform\n   * @param {Object|string} [ua=navigator.userAgent] The user agent string or\n   *  context object.\n   * @returns {Object} A platform object.\n   */\n  function parse(ua) {\n\n    /** The environment context object. */\n    var context = root;\n\n    /** Used to flag when a custom context is provided. */\n    var isCustomContext = ua && typeof ua == 'object' && getClassOf(ua) != 'String';\n\n    // Juggle arguments.\n    if (isCustomContext) {\n      context = ua;\n      ua = null;\n    }\n\n    /** Browser navigator object. */\n    var nav = context.navigator || {};\n\n    /** Browser user agent string. */\n    var userAgent = nav.userAgent || '';\n\n    ua || (ua = userAgent);\n\n    /** Used to flag when `thisBinding` is the [ModuleScope]. */\n    var isModuleScope = isCustomContext || thisBinding == oldRoot;\n\n    /** Used to detect if browser is like Chrome. */\n    var likeChrome = isCustomContext\n      ? !!nav.likeChrome\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\n\n    /** Internal `[[Class]]` value shortcuts. */\n    var objectClass = 'Object',\n        airRuntimeClass = isCustomContext ? objectClass : 'ScriptBridgingProxyObject',\n        enviroClass = isCustomContext ? objectClass : 'Environment',\n        javaClass = (isCustomContext && context.java) ? 'JavaPackage' : getClassOf(context.java),\n        phantomClass = isCustomContext ? objectClass : 'RuntimeObject';\n\n    /** Detect Java environments. */\n    var java = /\\bJava/.test(javaClass) && context.java;\n\n    /** Detect Rhino. */\n    var rhino = java && getClassOf(context.environment) == enviroClass;\n\n    /** A character to represent alpha. */\n    var alpha = java ? 'a' : '\\u03b1';\n\n    /** A character to represent beta. */\n    var beta = java ? 'b' : '\\u03b2';\n\n    /** Browser document object. */\n    var doc = context.document || {};\n\n    /**\n     * Detect Opera browser (Presto-based).\n     * http://www.howtocreate.co.uk/operaStuff/operaObject.html\n     * http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#operamini\n     */\n    var opera = context.operamini || context.opera;\n\n    /** Opera `[[Class]]`. */\n    var operaClass = reOpera.test(operaClass = (isCustomContext && opera) ? opera['[[Class]]'] : getClassOf(opera))\n      ? operaClass\n      : (opera = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /** Temporary variable used over the script's lifetime. */\n    var data;\n\n    /** The CPU architecture. */\n    var arch = ua;\n\n    /** Platform description array. */\n    var description = [];\n\n    /** Platform alpha/beta indicator. */\n    var prerelease = null;\n\n    /** A flag to indicate that environment features should be used to resolve the platform. */\n    var useFeatures = ua == userAgent;\n\n    /** The browser/environment version. */\n    var version = useFeatures && opera && typeof opera.version == 'function' && opera.version();\n\n    /** A flag to indicate if the OS ends with \"/ Version\" */\n    var isSpecialCasedOS;\n\n    /* Detectable layout engines (order is important). */\n    var layout = getLayout([\n      { 'label': 'EdgeHTML', 'pattern': 'Edge' },\n      'Trident',\n      { 'label': 'WebKit', 'pattern': 'AppleWebKit' },\n      'iCab',\n      'Presto',\n      'NetFront',\n      'Tasman',\n      'KHTML',\n      'Gecko'\n    ]);\n\n    /* Detectable browser names (order is important). */\n    var name = getName([\n      'Adobe AIR',\n      'Arora',\n      'Avant Browser',\n      'Breach',\n      'Camino',\n      'Electron',\n      'Epiphany',\n      'Fennec',\n      'Flock',\n      'Galeon',\n      'GreenBrowser',\n      'iCab',\n      'Iceweasel',\n      'K-Meleon',\n      'Konqueror',\n      'Lunascape',\n      'Maxthon',\n      { 'label': 'Microsoft Edge', 'pattern': '(?:Edge|Edg|EdgA|EdgiOS)' },\n      'Midori',\n      'Nook Browser',\n      'PaleMoon',\n      'PhantomJS',\n      'Raven',\n      'Rekonq',\n      'RockMelt',\n      { 'label': 'Samsung Internet', 'pattern': 'SamsungBrowser' },\n      'SeaMonkey',\n      { 'label': 'Silk', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Sleipnir',\n      'SlimBrowser',\n      { 'label': 'SRWare Iron', 'pattern': 'Iron' },\n      'Sunrise',\n      'Swiftfox',\n      'Vivaldi',\n      'Waterfox',\n      'WebPositive',\n      { 'label': 'Yandex Browser', 'pattern': 'YaBrowser' },\n      { 'label': 'UC Browser', 'pattern': 'UCBrowser' },\n      'Opera Mini',\n      { 'label': 'Opera Mini', 'pattern': 'OPiOS' },\n      'Opera',\n      { 'label': 'Opera', 'pattern': 'OPR' },\n      'Chromium',\n      'Chrome',\n      { 'label': 'Chrome', 'pattern': '(?:HeadlessChrome)' },\n      { 'label': 'Chrome Mobile', 'pattern': '(?:CriOS|CrMo)' },\n      { 'label': 'Firefox', 'pattern': '(?:Firefox|Minefield)' },\n      { 'label': 'Firefox for iOS', 'pattern': 'FxiOS' },\n      { 'label': 'IE', 'pattern': 'IEMobile' },\n      { 'label': 'IE', 'pattern': 'MSIE' },\n      'Safari'\n    ]);\n\n    /* Detectable products (order is important). */\n    var product = getProduct([\n      { 'label': 'BlackBerry', 'pattern': 'BB10' },\n      'BlackBerry',\n      { 'label': 'Galaxy S', 'pattern': 'GT-I9000' },\n      { 'label': 'Galaxy S2', 'pattern': 'GT-I9100' },\n      { 'label': 'Galaxy S3', 'pattern': 'GT-I9300' },\n      { 'label': 'Galaxy S4', 'pattern': 'GT-I9500' },\n      { 'label': 'Galaxy S5', 'pattern': 'SM-G900' },\n      { 'label': 'Galaxy S6', 'pattern': 'SM-G920' },\n      { 'label': 'Galaxy S6 Edge', 'pattern': 'SM-G925' },\n      { 'label': 'Galaxy S7', 'pattern': 'SM-G930' },\n      { 'label': 'Galaxy S7 Edge', 'pattern': 'SM-G935' },\n      'Google TV',\n      'Lumia',\n      'iPad',\n      'iPod',\n      'iPhone',\n      'Kindle',\n      { 'label': 'Kindle Fire', 'pattern': '(?:Cloud9|Silk-Accelerated)' },\n      'Nexus',\n      'Nook',\n      'PlayBook',\n      'PlayStation Vita',\n      'PlayStation',\n      'TouchPad',\n      'Transformer',\n      { 'label': 'Wii U', 'pattern': 'WiiU' },\n      'Wii',\n      'Xbox One',\n      { 'label': 'Xbox 360', 'pattern': 'Xbox' },\n      'Xoom'\n    ]);\n\n    /* Detectable manufacturers. */\n    var manufacturer = getManufacturer({\n      'Apple': { 'iPad': 1, 'iPhone': 1, 'iPod': 1 },\n      'Alcatel': {},\n      'Archos': {},\n      'Amazon': { 'Kindle': 1, 'Kindle Fire': 1 },\n      'Asus': { 'Transformer': 1 },\n      'Barnes & Noble': { 'Nook': 1 },\n      'BlackBerry': { 'PlayBook': 1 },\n      'Google': { 'Google TV': 1, 'Nexus': 1 },\n      'HP': { 'TouchPad': 1 },\n      'HTC': {},\n      'Huawei': {},\n      'Lenovo': {},\n      'LG': {},\n      'Microsoft': { 'Xbox': 1, 'Xbox One': 1 },\n      'Motorola': { 'Xoom': 1 },\n      'Nintendo': { 'Wii U': 1,  'Wii': 1 },\n      'Nokia': { 'Lumia': 1 },\n      'Oppo': {},\n      'Samsung': { 'Galaxy S': 1, 'Galaxy S2': 1, 'Galaxy S3': 1, 'Galaxy S4': 1 },\n      'Sony': { 'PlayStation': 1, 'PlayStation Vita': 1 },\n      'Xiaomi': { 'Mi': 1, 'Redmi': 1 }\n    });\n\n    /* Detectable operating systems (order is important). */\n    var os = getOS([\n      'Windows Phone',\n      'KaiOS',\n      'Android',\n      'CentOS',\n      { 'label': 'Chrome OS', 'pattern': 'CrOS' },\n      'Debian',\n      { 'label': 'DragonFly BSD', 'pattern': 'DragonFly' },\n      'Fedora',\n      'FreeBSD',\n      'Gentoo',\n      'Haiku',\n      'Kubuntu',\n      'Linux Mint',\n      'OpenBSD',\n      'Red Hat',\n      'SuSE',\n      'Ubuntu',\n      'Xubuntu',\n      'Cygwin',\n      'Symbian OS',\n      'hpwOS',\n      'webOS ',\n      'webOS',\n      'Tablet OS',\n      'Tizen',\n      'Linux',\n      'Mac OS X',\n      'Macintosh',\n      'Mac',\n      'Windows 98;',\n      'Windows '\n    ]);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Picks the layout engine from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected layout engine.\n     */\n    function getLayout(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the manufacturer from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An object of guesses.\n     * @returns {null|string} The detected manufacturer.\n     */\n    function getManufacturer(guesses) {\n      return reduce(guesses, function(result, value, key) {\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\n        return result || (\n          value[product] ||\n          value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\n          RegExp('\\\\b' + qualify(key) + '(?:\\\\b|\\\\w*\\\\d)', 'i').exec(ua)\n        ) && key;\n      });\n    }\n\n    /**\n     * Picks the browser name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected browser name.\n     */\n    function getName(guesses) {\n      return reduce(guesses, function(result, guess) {\n        return result || RegExp('\\\\b' + (\n          guess.pattern || qualify(guess)\n        ) + '\\\\b', 'i').exec(ua) && (guess.label || guess);\n      });\n    }\n\n    /**\n     * Picks the OS name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected OS name.\n     */\n    function getOS(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + '(?:/[\\\\d.]+|[ \\\\w.]*)', 'i').exec(ua)\n            )) {\n          result = cleanupOS(result, pattern, guess.label || guess);\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Picks the product name from an array of guesses.\n     *\n     * @private\n     * @param {Array} guesses An array of guesses.\n     * @returns {null|string} The detected product name.\n     */\n    function getProduct(guesses) {\n      return reduce(guesses, function(result, guess) {\n        var pattern = guess.pattern || qualify(guess);\n        if (!result && (result =\n              RegExp('\\\\b' + pattern + ' *\\\\d+[.\\\\w_]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + ' *\\\\w+-[\\\\w]*', 'i').exec(ua) ||\n              RegExp('\\\\b' + pattern + '(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)', 'i').exec(ua)\n            )) {\n          // Split by forward slash and append product version if needed.\n          if ((result = String((guess.label && !RegExp(pattern, 'i').test(guess.label)) ? guess.label : result).split('/'))[1] && !/[\\d.]+/.test(result[0])) {\n            result[0] += ' ' + result[1];\n          }\n          // Correct character case and cleanup string.\n          guess = guess.label || guess;\n          result = format(result[0]\n            .replace(RegExp(pattern, 'i'), guess)\n            .replace(RegExp('; *(?:' + guess + '[_-])?', 'i'), ' ')\n            .replace(RegExp('(' + guess + ')[-_.]?(\\\\w)', 'i'), '$1 $2'));\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Resolves the version using an array of UA patterns.\n     *\n     * @private\n     * @param {Array} patterns An array of UA patterns.\n     * @returns {null|string} The detected version.\n     */\n    function getVersion(patterns) {\n      return reduce(patterns, function(result, pattern) {\n        return result || (RegExp(pattern +\n          '(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)', 'i').exec(ua) || 0)[1] || null;\n      });\n    }\n\n    /**\n     * Returns `platform.description` when the platform object is coerced to a string.\n     *\n     * @name toString\n     * @memberOf platform\n     * @returns {string} Returns `platform.description` if available, else an empty string.\n     */\n    function toStringPlatform() {\n      return this.description || '';\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Convert layout to an array so we can add extra details.\n    layout && (layout = [layout]);\n\n    // Detect Android products.\n    // Browsers on Android devices typically provide their product IDS after \"Android;\"\n    // up to \"Build\" or \") AppleWebKit\".\n    // Example:\n    // \"Mozilla/5.0 (Linux; Android 8.1.0; Moto G (5) Plus) AppleWebKit/537.36\n    // (KHTML, like Gecko) Chrome/70.0.3538.80 Mobile Safari/537.36\"\n    if (/\\bAndroid\\b/.test(os) && !product &&\n        (data = /\\bAndroid[^;]*;(.*?)(?:Build|\\) AppleWebKit)\\b/i.exec(ua))) {\n      product = trim(data[1])\n        // Replace any language codes (eg. \"en-US\").\n        .replace(/^[a-z]{2}-[a-z]{2};\\s*/i, '')\n        || null;\n    }\n    // Detect product names that contain their manufacturer's name.\n    if (manufacturer && !product) {\n      product = getProduct([manufacturer]);\n    } else if (manufacturer && product) {\n      product = product\n        .replace(RegExp('^(' + qualify(manufacturer) + ')[-_.\\\\s]', 'i'), manufacturer + ' ')\n        .replace(RegExp('^(' + qualify(manufacturer) + ')[-_.]?(\\\\w)', 'i'), manufacturer + ' $2');\n    }\n    // Clean up Google TV.\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\n      product = data[0];\n    }\n    // Detect simulators.\n    if (/\\bSimulator\\b/i.test(ua)) {\n      product = (product ? product + ' ' : '') + 'Simulator';\n    }\n    // Detect Opera Mini 8+ running in Turbo/Uncompressed mode on iOS.\n    if (name == 'Opera Mini' && /\\bOPiOS\\b/.test(ua)) {\n      description.push('running in Turbo/Uncompressed mode');\n    }\n    // Detect IE Mobile 11.\n    if (name == 'IE' && /\\blike iPhone OS\\b/.test(ua)) {\n      data = parse(ua.replace(/like iPhone OS/, ''));\n      manufacturer = data.manufacturer;\n      product = data.product;\n    }\n    // Detect iOS.\n    else if (/^iP/.test(product)) {\n      name || (name = 'Safari');\n      os = 'iOS' + ((data = / OS ([\\d_]+)/i.exec(ua))\n        ? ' ' + data[1].replace(/_/g, '.')\n        : '');\n    }\n    // Detect Kubuntu.\n    else if (name == 'Konqueror' && /^Linux\\b/i.test(os)) {\n      os = 'Kubuntu';\n    }\n    // Detect Android browsers.\n    else if ((manufacturer && manufacturer != 'Google' &&\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) || /\\bVita\\b/.test(product))) ||\n        (/\\bAndroid\\b/.test(os) && /^Chrome/.test(name) && /\\bVersion\\//i.test(ua))) {\n      name = 'Android Browser';\n      os = /\\bAndroid\\b/.test(os) ? os : 'Android';\n    }\n    // Detect Silk desktop/accelerated modes.\n    else if (name == 'Silk') {\n      if (!/\\bMobi/i.test(ua)) {\n        os = 'Android';\n        description.unshift('desktop mode');\n      }\n      if (/Accelerated *= *true/i.test(ua)) {\n        description.unshift('accelerated');\n      }\n    }\n    // Detect UC Browser speed mode.\n    else if (name == 'UC Browser' && /\\bUCWEB\\b/.test(ua)) {\n      description.push('speed mode');\n    }\n    // Detect PaleMoon identifying as Firefox.\n    else if (name == 'PaleMoon' && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\n      description.push('identifying as Firefox ' + data[1]);\n    }\n    // Detect Firefox OS and products running Firefox.\n    else if (name == 'Firefox' && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\n      os || (os = 'Firefox OS');\n      product || (product = data[1]);\n    }\n    // Detect false positives for Firefox/Safari.\n    else if (!name || (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))) {\n      // Escape the `/` for Firefox 1.\n      if (name && !product && /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + '/') + 8))) {\n        // Clear name of false positives.\n        name = null;\n      }\n      // Reassign a generic name.\n      if ((data = product || manufacturer || os) &&\n          (product || manufacturer || /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))) {\n        name = /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) + ' Browser';\n      }\n    }\n    // Add Chrome version to description for Electron.\n    else if (name == 'Electron' && (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])) {\n      description.push('Chromium ' + data);\n    }\n    // Detect non-Opera (Presto-based) versions (order is important).\n    if (!version) {\n      version = getVersion([\n        '(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$)|UCBrowser|YaBrowser)',\n        'Version',\n        qualify(name),\n        '(?:Firefox|Minefield|NetFront)'\n      ]);\n    }\n    // Detect stubborn layout engines.\n    if ((data =\n          layout == 'iCab' && parseFloat(version) > 3 && 'WebKit' ||\n          /\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? 'Blink' : 'Presto') ||\n          /\\b(?:Midori|Nook|Safari)\\b/i.test(ua) && !/^(?:Trident|EdgeHTML)$/.test(layout) && 'WebKit' ||\n          !layout && /\\bMSIE\\b/i.test(ua) && (os == 'Mac OS' ? 'Tasman' : 'Trident') ||\n          layout == 'WebKit' && /\\bPlayStation\\b(?! Vita\\b)/i.test(name) && 'NetFront'\n        )) {\n      layout = [data];\n    }\n    // Detect Windows Phone 7 desktop mode.\n    if (name == 'IE' && (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])) {\n      name += ' Mobile';\n      os = 'Windows Phone ' + (/\\+$/.test(data) ? data : data + '.x');\n      description.unshift('desktop mode');\n    }\n    // Detect Windows Phone 8.x desktop mode.\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\n      name = 'IE Mobile';\n      os = 'Windows Phone 8.x';\n      description.unshift('desktop mode');\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\n    }\n    // Detect IE 11 identifying as other browsers.\n    else if (name != 'IE' && layout == 'Trident' && (data = /\\brv:([\\d.]+)/.exec(ua))) {\n      if (name) {\n        description.push('identifying as ' + name + (version ? ' ' + version : ''));\n      }\n      name = 'IE';\n      version = data[1];\n    }\n    // Leverage environment features.\n    if (useFeatures) {\n      // Detect server-side environments.\n      // Rhino has a global function while others have a global object.\n      if (isHostType(context, 'global')) {\n        if (java) {\n          data = java.lang.System;\n          arch = data.getProperty('os.arch');\n          os = os || data.getProperty('os.name') + ' ' + data.getProperty('os.version');\n        }\n        if (rhino) {\n          try {\n            version = context.require('ringo/engine').version.join('.');\n            name = 'RingoJS';\n          } catch(e) {\n            if ((data = context.system) && data.global.system == context.system) {\n              name = 'Narwhal';\n              os || (os = data[0].os || null);\n            }\n          }\n          if (!name) {\n            name = 'Rhino';\n          }\n        }\n        else if (\n          typeof context.process == 'object' && !context.process.browser &&\n          (data = context.process)\n        ) {\n          if (typeof data.versions == 'object') {\n            if (typeof data.versions.electron == 'string') {\n              description.push('Node ' + data.versions.node);\n              name = 'Electron';\n              version = data.versions.electron;\n            } else if (typeof data.versions.nw == 'string') {\n              description.push('Chromium ' + version, 'Node ' + data.versions.node);\n              name = 'NW.js';\n              version = data.versions.nw;\n            }\n          }\n          if (!name) {\n            name = 'Node.js';\n            arch = data.arch;\n            os = data.platform;\n            version = /[\\d.]+/.exec(data.version);\n            version = version ? version[0] : null;\n          }\n        }\n      }\n      // Detect Adobe AIR.\n      else if (getClassOf((data = context.runtime)) == airRuntimeClass) {\n        name = 'Adobe AIR';\n        os = data.flash.system.Capabilities.os;\n      }\n      // Detect PhantomJS.\n      else if (getClassOf((data = context.phantom)) == phantomClass) {\n        name = 'PhantomJS';\n        version = (data = data.version || null) && (data.major + '.' + data.minor + '.' + data.patch);\n      }\n      // Detect IE compatibility modes.\n      else if (typeof doc.documentMode == 'number' && (data = /\\bTrident\\/(\\d+)/i.exec(ua))) {\n        // We're in compatibility mode when the Trident version + 4 doesn't\n        // equal the document mode.\n        version = [version, doc.documentMode];\n        if ((data = +data[1] + 4) != version[1]) {\n          description.push('IE ' + version[1] + ' mode');\n          layout && (layout[1] = '');\n          version[1] = data;\n        }\n        version = name == 'IE' ? String(version[1].toFixed(1)) : version[0];\n      }\n      // Detect IE 11 masking as other browsers.\n      else if (typeof doc.documentMode == 'number' && /^(?:Chrome|Firefox)\\b/.test(name)) {\n        description.push('masking as ' + name + ' ' + version);\n        name = 'IE';\n        version = '11.0';\n        layout = ['Trident'];\n        os = 'Windows';\n      }\n      os = os && format(os);\n    }\n    // Detect prerelease phases.\n    if (version && (data =\n          /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\n          /(?:alpha|beta)(?: ?\\d)?/i.exec(ua + ';' + (useFeatures && nav.appMinorVersion)) ||\n          /\\bMinefield\\b/i.test(ua) && 'a'\n        )) {\n      prerelease = /b/i.test(data) ? 'beta' : 'alpha';\n      version = version.replace(RegExp(data + '\\\\+?$'), '') +\n        (prerelease == 'beta' ? beta : alpha) + (/\\d+\\+?/.exec(data) || '');\n    }\n    // Detect Firefox Mobile.\n    if (name == 'Fennec' || name == 'Firefox' && /\\b(?:Android|Firefox OS|KaiOS)\\b/.test(os)) {\n      name = 'Firefox Mobile';\n    }\n    // Obscure Maxthon's unreliable version.\n    else if (name == 'Maxthon' && version) {\n      version = version.replace(/\\.[\\d.]+/, '.x');\n    }\n    // Detect Xbox 360 and Xbox One.\n    else if (/\\bXbox\\b/i.test(product)) {\n      if (product == 'Xbox 360') {\n        os = null;\n      }\n      if (product == 'Xbox 360' && /\\bIEMobile\\b/.test(ua)) {\n        description.unshift('mobile mode');\n      }\n    }\n    // Add mobile postfix.\n    else if ((/^(?:Chrome|IE|Opera)$/.test(name) || name && !product && !/Browser|Mobi/.test(name)) &&\n        (os == 'Windows CE' || /Mobi/i.test(ua))) {\n      name += ' Mobile';\n    }\n    // Detect IE platform preview.\n    else if (name == 'IE' && useFeatures) {\n      try {\n        if (context.external === null) {\n          description.unshift('platform preview');\n        }\n      } catch(e) {\n        description.unshift('embedded');\n      }\n    }\n    // Detect BlackBerry OS version.\n    // http://docs.blackberry.com/en/developers/deliverables/18169/HTTP_headers_sent_by_BB_Browser_1234911_11.jsp\n    else if ((/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) && (data =\n          (RegExp(product.replace(/ +/g, ' *') + '/([.\\\\d]+)', 'i').exec(ua) || 0)[1] ||\n          version\n        )) {\n      data = [data, /BB10/.test(ua)];\n      os = (data[1] ? (product = null, manufacturer = 'BlackBerry') : 'Device Software') + ' ' + data[0];\n      version = null;\n    }\n    // Detect Opera identifying/masking itself as another browser.\n    // http://www.opera.com/support/kb/view/843/\n    else if (this != forOwn && product != 'Wii' && (\n          (useFeatures && opera) ||\n          (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\n          (name == 'Firefox' && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\n          (name == 'IE' && (\n            (os && !/^Win/.test(os) && version > 5.5) ||\n            /\\bWindows XP\\b/.test(os) && version > 8 ||\n            version == 8 && !/\\bTrident\\b/.test(ua)\n          ))\n        ) && !reOpera.test((data = parse.call(forOwn, ua.replace(reOpera, '') + ';'))) && data.name) {\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\n      data = 'ing as ' + data.name + ((data = data.version) ? ' ' + data : '');\n      if (reOpera.test(name)) {\n        if (/\\bIE\\b/.test(data) && os == 'Mac OS') {\n          os = null;\n        }\n        data = 'identify' + data;\n      }\n      // When \"masking\", the UA contains only the other browser's name.\n      else {\n        data = 'mask' + data;\n        if (operaClass) {\n          name = format(operaClass.replace(/([a-z])([A-Z])/g, '$1 $2'));\n        } else {\n          name = 'Opera';\n        }\n        if (/\\bIE\\b/.test(data)) {\n          os = null;\n        }\n        if (!useFeatures) {\n          version = null;\n        }\n      }\n      layout = ['Presto'];\n      description.push(data);\n    }\n    // Detect WebKit Nightly and approximate Chrome/Safari versions.\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n      // Correct build number for numeric comparison.\n      // (e.g. \"532.5\" becomes \"532.05\")\n      data = [parseFloat(data.replace(/\\.(\\d)$/, '.0$1')), data];\n      // Nightly builds are postfixed with a \"+\".\n      if (name == 'Safari' && data[1].slice(-1) == '+') {\n        name = 'WebKit Nightly';\n        prerelease = 'alpha';\n        version = data[1].slice(0, -1);\n      }\n      // Clear incorrect browser versions.\n      else if (version == data[1] ||\n          version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\n        version = null;\n      }\n      // Use the full Chrome version when available.\n      data[1] = (/\\b(?:Headless)?Chrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\n      // Detect Blink layout engine.\n      if (data[0] == 537.36 && data[2] == 537.36 && parseFloat(data[1]) >= 28 && layout == 'WebKit') {\n        layout = ['Blink'];\n      }\n      // Detect JavaScriptCore.\n      // http://stackoverflow.com/questions/6768474/how-can-i-detect-which-javascript-engine-v8-or-jsc-is-used-at-runtime-in-androi\n      if (!useFeatures || (!likeChrome && !data[1])) {\n        layout && (layout[1] = 'like Safari');\n        data = (data = data[0], data < 400 ? 1 : data < 500 ? 2 : data < 526 ? 3 : data < 533 ? 4 : data < 534 ? '4+' : data < 535 ? 5 : data < 537 ? 6 : data < 538 ? 7 : data < 601 ? 8 : data < 602 ? 9 : data < 604 ? 10 : data < 606 ? 11 : data < 608 ? 12 : '12');\n      } else {\n        layout && (layout[1] = 'like Chrome');\n        data = data[1] || (data = data[0], data < 530 ? 1 : data < 532 ? 2 : data < 532.05 ? 3 : data < 533 ? 4 : data < 534.03 ? 5 : data < 534.07 ? 6 : data < 534.10 ? 7 : data < 534.13 ? 8 : data < 534.16 ? 9 : data < 534.24 ? 10 : data < 534.30 ? 11 : data < 535.01 ? 12 : data < 535.02 ? '13+' : data < 535.07 ? 15 : data < 535.11 ? 16 : data < 535.19 ? 17 : data < 536.05 ? 18 : data < 536.10 ? 19 : data < 537.01 ? 20 : data < 537.11 ? '21+' : data < 537.13 ? 23 : data < 537.18 ? 24 : data < 537.24 ? 25 : data < 537.36 ? 26 : layout != 'Blink' ? '27' : '28');\n      }\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\n      layout && (layout[1] += ' ' + (data += typeof data == 'number' ? '.x' : /[.+]/.test(data) ? '' : '+'));\n      // Obscure version for some Safari 1-2 releases.\n      if (name == 'Safari' && (!version || parseInt(version) > 45)) {\n        version = data;\n      } else if (name == 'Chrome' && /\\bHeadlessChrome/i.test(ua)) {\n        description.unshift('headless');\n      }\n    }\n    // Detect Opera desktop modes.\n    if (name == 'Opera' &&  (data = /\\bzbov|zvav$/.exec(os))) {\n      name += ' ';\n      description.unshift('desktop mode');\n      if (data == 'zvav') {\n        name += 'Mini';\n        version = null;\n      } else {\n        name += 'Mobile';\n      }\n      os = os.replace(RegExp(' *' + data + '$'), '');\n    }\n    // Detect Chrome desktop mode.\n    else if (name == 'Safari' && /\\bChrome\\b/.exec(layout && layout[1])) {\n      description.unshift('desktop mode');\n      name = 'Chrome Mobile';\n      version = null;\n\n      if (/\\bOS X\\b/.test(os)) {\n        manufacturer = 'Apple';\n        os = 'iOS 4.3+';\n      } else {\n        os = null;\n      }\n    }\n    // Newer versions of SRWare Iron uses the Chrome tag to indicate its version number.\n    else if (/\\bSRWare Iron\\b/.test(name) && !version) {\n      version = getVersion('Chrome');\n    }\n    // Strip incorrect OS versions.\n    if (version && version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\n        ua.indexOf('/' + data + '-') > -1) {\n      os = trim(os.replace(data, ''));\n    }\n    // Ensure OS does not include the browser name.\n    if (os && os.indexOf(name) != -1 && !RegExp(name + ' OS').test(os)) {\n      os = os.replace(RegExp(' *' + qualify(name) + ' *'), '');\n    }\n    // Add layout engine.\n    if (layout && !/\\b(?:Avant|Nook)\\b/.test(name) && (\n        /Browser|Lunascape|Maxthon/.test(name) ||\n        name != 'Safari' && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1]) ||\n        /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(name) && layout[1])) {\n      // Don't add layout details to description if they are falsey.\n      (data = layout[layout.length - 1]) && description.push(data);\n    }\n    // Combine contextual information.\n    if (description.length) {\n      description = ['(' + description.join('; ') + ')'];\n    }\n    // Append manufacturer to description.\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\n      description.push('on ' + manufacturer);\n    }\n    // Append product to description.\n    if (product) {\n      description.push((/^on /.test(description[description.length - 1]) ? '' : 'on ') + product);\n    }\n    // Parse the OS into an object.\n    if (os) {\n      data = / ([\\d.+]+)$/.exec(os);\n      isSpecialCasedOS = data && os.charAt(os.length - data[0].length - 1) == '/';\n      os = {\n        'architecture': 32,\n        'family': (data && !isSpecialCasedOS) ? os.replace(data[0], '') : os,\n        'version': data ? data[1] : null,\n        'toString': function() {\n          var version = this.version;\n          return this.family + ((version && !isSpecialCasedOS) ? ' ' + version : '') + (this.architecture == 64 ? ' 64-bit' : '');\n        }\n      };\n    }\n    // Add browser/OS architecture.\n    if ((data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) && !/\\bi686\\b/i.test(arch)) {\n      if (os) {\n        os.architecture = 64;\n        os.family = os.family.replace(RegExp(' *' + data), '');\n      }\n      if (\n          name && (/\\bWOW64\\b/i.test(ua) ||\n          (useFeatures && /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) && !/\\bWin64; x64\\b/i.test(ua)))\n      ) {\n        description.unshift('32-bit');\n      }\n    }\n    // Chrome 39 and above on OS X is always 64-bit.\n    else if (\n        os && /^OS X/.test(os.family) &&\n        name == 'Chrome' && parseFloat(version) >= 39\n    ) {\n      os.architecture = 64;\n    }\n\n    ua || (ua = null);\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The platform object.\n     *\n     * @name platform\n     * @type Object\n     */\n    var platform = {};\n\n    /**\n     * The platform description.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.description = ua;\n\n    /**\n     * The name of the browser's layout engine.\n     *\n     * The list of common layout engines include:\n     * \"Blink\", \"EdgeHTML\", \"Gecko\", \"Trident\" and \"WebKit\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.layout = layout && layout[0];\n\n    /**\n     * The name of the product's manufacturer.\n     *\n     * The list of manufacturers include:\n     * \"Apple\", \"Archos\", \"Amazon\", \"Asus\", \"Barnes & Noble\", \"BlackBerry\",\n     * \"Google\", \"HP\", \"HTC\", \"LG\", \"Microsoft\", \"Motorola\", \"Nintendo\",\n     * \"Nokia\", \"Samsung\" and \"Sony\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.manufacturer = manufacturer;\n\n    /**\n     * The name of the browser/environment.\n     *\n     * The list of common browser names include:\n     * \"Chrome\", \"Electron\", \"Firefox\", \"Firefox for iOS\", \"IE\",\n     * \"Microsoft Edge\", \"PhantomJS\", \"Safari\", \"SeaMonkey\", \"Silk\",\n     * \"Opera Mini\" and \"Opera\"\n     *\n     * Mobile versions of some browsers have \"Mobile\" appended to their name:\n     * eg. \"Chrome Mobile\", \"Firefox Mobile\", \"IE Mobile\" and \"Opera Mobile\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.name = name;\n\n    /**\n     * The alpha/beta release indicator.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.prerelease = prerelease;\n\n    /**\n     * The name of the product hosting the browser.\n     *\n     * The list of common products include:\n     *\n     * \"BlackBerry\", \"Galaxy S4\", \"Lumia\", \"iPad\", \"iPod\", \"iPhone\", \"Kindle\",\n     * \"Kindle Fire\", \"Nexus\", \"Nook\", \"PlayBook\", \"TouchPad\" and \"Transformer\"\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.product = product;\n\n    /**\n     * The browser's user agent string.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.ua = ua;\n\n    /**\n     * The browser/environment version.\n     *\n     * @memberOf platform\n     * @type string|null\n     */\n    platform.version = name && version;\n\n    /**\n     * The name of the operating system.\n     *\n     * @memberOf platform\n     * @type Object\n     */\n    platform.os = os || {\n\n      /**\n       * The CPU architecture the OS is built for.\n       *\n       * @memberOf platform.os\n       * @type number|null\n       */\n      'architecture': null,\n\n      /**\n       * The family of the OS.\n       *\n       * Common values include:\n       * \"Windows\", \"Windows Server 2008 R2 / 7\", \"Windows Server 2008 / Vista\",\n       * \"Windows XP\", \"OS X\", \"Linux\", \"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\",\n       * \"SuSE\", \"Android\", \"iOS\" and \"Windows Phone\"\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'family': null,\n\n      /**\n       * The version of the OS.\n       *\n       * @memberOf platform.os\n       * @type string|null\n       */\n      'version': null,\n\n      /**\n       * Returns the OS string.\n       *\n       * @memberOf platform.os\n       * @returns {string} The OS string.\n       */\n      'toString': function() { return 'null'; }\n    };\n\n    platform.parse = parse;\n    platform.toString = toStringPlatform;\n\n    if (platform.version) {\n      description.unshift(version);\n    }\n    if (platform.name) {\n      description.unshift(name);\n    }\n    if (os && name && !(os == String(os).split(' ')[0] && (os == name.split(' ')[0] || product))) {\n      description.push(product ? '(' + os + ')' : 'on ' + os);\n    }\n    if (description.length) {\n      platform.description = description.join(' ');\n    }\n    return platform;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export platform.\n  var platform = parse();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose platform on the global object to prevent errors when platform is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    root.platform = platform;\n\n    // Define as an anonymous module so platform can be aliased through path mapping.\n    define(function() {\n      return platform;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds an `exports` object.\n  else if (freeExports && freeModule) {\n    // Export for CommonJS support.\n    forOwn(platform, function(value, key) {\n      freeExports[key] = value;\n    });\n  }\n  else {\n    // Export to the global object.\n    root.platform = platform;\n  }\n}.call(this));\n"]}